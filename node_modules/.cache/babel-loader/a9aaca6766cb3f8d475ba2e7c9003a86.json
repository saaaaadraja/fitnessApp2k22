{"ast":null,"code":"/**\n * PdfGraphics.ts class for EJ2-PDF\n */\nimport { PdfColorSpace, TextRenderingMode, PdfFillMode, PdfTextAlignment } from './enum';\nimport { PdfVerticalAlignment, PdfBlendMode } from './enum';\nimport { PdfSubSuperScript } from './fonts/enum';\nimport { PdfStreamWriter } from './../input-output/pdf-stream-writer';\nimport { PdfPen } from './pdf-pen';\nimport { PdfBrush } from './brushes/pdf-brush';\nimport { PdfSolidBrush } from './brushes/pdf-solid-brush';\nimport { PdfFont } from './fonts/pdf-font';\nimport { PdfTransformationMatrix } from './pdf-transformation-matrix';\nimport { PointF, SizeF, RectangleF } from './../drawing/pdf-drawing';\nimport { ProcedureSets } from './constants';\nimport { PdfString } from './../primitives/pdf-string';\nimport { PdfStringFormat } from './fonts/pdf-string-format';\nimport { TemporaryDictionary } from './../collections/object-object-pair/dictionary';\nimport { PdfTransparency } from './pdf-transparency';\nimport { PdfStringLayouter, LineType } from './fonts/string-layouter';\nimport { DictionaryProperties } from './../input-output/pdf-dictionary-properties';\nimport { StringTokenizer } from './fonts/string-tokenizer';\nimport { PdfAutomaticFieldInfoCollection } from './../document/automatic-fields/automatic-field-info-collection';\nimport { PdfAutomaticFieldInfo } from './../document/automatic-fields/automatic-field-info';\nimport { Operators } from './../input-output/pdf-operators';\nimport { UnicodeTrueTypeFont } from './fonts/unicode-true-type-font';\nimport { InternalEnum } from './../primitives/pdf-string';\nimport { RtlRenderer } from './fonts/rtl-renderer';\nimport { PdfTextDirection } from './enum';\nimport { PathPointType } from './figures/enum';\nimport { PdfGradientBrush } from './../../implementation/graphics/brushes/pdf-gradient-brush';\nimport { PdfTilingBrush } from './brushes/pdf-tiling-brush';\n/**\n * `PdfGraphics` class represents a graphics context of the objects.\n * It's used for performing all the graphics operations.\n * ```typescript\n * // create a new PDF document\n * let document : PdfDocument = new PdfDocument();\n * // add a new page to the document\n * let page1 : PdfPage = document.pages.add();\n * // set the font\n * let font : PdfStandardFont = new PdfStandardFont(PdfFontFamily.Helvetica, 20);\n * // create black brush\n * let blackBrush : PdfSolidBrush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n * //\n * //graphics of the page\n * let page1Graphics : PdfGraphics = page1.graphics;\n * // draw the text on the page1 graphics\n * page1Graphics.drawString('Hello World', font, blackBrush, new PointF(0, 0));\n * //\n * // save the document\n * document.save('output.pdf');\n * // destroy the document\n * document.destroy();\n * ```\n */\n\nvar PdfGraphics =\n/** @class */\nfunction () {\n  function PdfGraphics(arg1, arg2, arg3) {\n    /**\n     * Represents the `Current color space`.\n     * @private\n     */\n    this.currentColorSpace = PdfColorSpace.Rgb;\n    /**\n     * Stores `previous rendering mode`.\n     * @private\n     */\n\n    this.previousTextRenderingMode = TextRenderingMode.Fill;\n    /**\n     * Previous `character spacing` value or 0.\n     * @private\n     */\n\n    this.previousCharacterSpacing = 0.0;\n    /**\n     * Previous `word spacing` value or 0.\n     * @private\n     */\n\n    this.previousWordSpacing = 0.0;\n    /**\n     * The `previously used text scaling` value.\n     * @private\n     */\n\n    this.previousTextScaling = 100.0;\n    /**\n     * Instance of `ProcedureSets` class.\n     * @private\n     */\n\n    this.procedureSets = new ProcedureSets();\n    /**\n     * To check wihether it is a `direct text rendering`.\n     * @default true\n     * @private\n     */\n\n    this.isNormalRender = true;\n    /**\n     * check whether to `use font size` to calculate the shift.\n     * @default false\n     * @private\n     */\n\n    this.isUseFontSize = false;\n    /**\n     * check whether the font is in `italic type`.\n     * @default false\n     * @private\n     */\n\n    this.isItalic = false;\n    /**\n     * Check whether it is an `emf Text Matrix`.\n     * @default false\n     * @private\n     */\n\n    this.isEmfTextScaled = false;\n    /**\n     * Check whether it is an `emf` call.\n     * @default false\n     * @private\n     */\n\n    this.isEmf = false;\n    /**\n     * Check whether it is an `emf plus` call.\n     * @default false\n     * @private\n     */\n\n    this.isEmfPlus = false;\n    /**\n     * Check whether it is in `base line format`.\n     * @default true\n     * @private\n     */\n\n    this.isBaselineFormat = true;\n    /**\n     * Emf Text `Scaling Factor`.\n     * @private\n     */\n\n    this.emfScalingFactor = new SizeF(0, 0);\n    /**\n     * To check whether the `last color space` of document and garphics is saved.\n     * @private\n     */\n\n    this.colorSpaceChanged = false;\n    /**\n     * Stores an instance of `DictionaryProperties`.\n     * @private\n     */\n\n    this.dictionaryProperties = new DictionaryProperties();\n    /**\n     * Checks whether the x co-ordinate is need to set as client size or not.\n     * @hidden\n     * @private\n     */\n\n    this.isOverloadWithPosition = false;\n    /**\n     * Checks whether the x co-ordinate is need to set as client size or not.\n     * @hidden\n     * @private\n     */\n\n    this.isPointOverload = false;\n    /**\n     * Current colorspaces.\n     * @hidden\n     * @private\n     */\n\n    this.currentColorSpaces = ['RGB', 'CMYK', 'GrayScale', 'Indexed'];\n    /**\n     * Checks the current image `is optimized` or not.\n     * @default false.\n     * @private\n     */\n\n    this.isImageOptimized = false;\n    /**\n     * Stores the `graphics states`.\n     * @private\n     */\n\n    this.graphicsState = [];\n    /**\n     * Indicates whether the object `had trasparency`.\n     * @default false\n     * @private\n     */\n\n    this.istransparencySet = false;\n    /**\n     * Stores the instance of `PdfAutomaticFieldInfoCollection` class .\n     * @default null\n     * @private\n     */\n\n    this.internalAutomaticFields = null;\n    /**\n     * Stores the index of the start line that should draw with in the next page.\n     * @private\n     */\n\n    this.startCutIndex = -1;\n    this.getResources = arg2;\n    this.canvasSize = arg1;\n\n    if (arg3 instanceof PdfStreamWriter) {\n      this.pdfStreamWriter = arg3;\n    } else {\n      this.pdfStreamWriter = new PdfStreamWriter(arg3);\n    }\n\n    this.initialize();\n  }\n\n  Object.defineProperty(PdfGraphics.prototype, \"stringLayoutResult\", {\n    //  Properties\n\n    /**\n     * Returns the `result` after drawing string.\n     * @private\n     */\n    get: function get() {\n      return this.pdfStringLayoutResult;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphics.prototype, \"size\", {\n    /**\n     * Gets the `size` of the canvas.\n     * @private\n     */\n    get: function get() {\n      return this.canvasSize;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphics.prototype, \"mediaBoxUpperRightBound\", {\n    /**\n     * Gets and Sets the value of `MediaBox upper right bound`.\n     * @private\n     */\n    get: function get() {\n      if (typeof this.internalMediaBoxUpperRightBound === 'undefined') {\n        this.internalMediaBoxUpperRightBound = 0;\n      }\n\n      return this.internalMediaBoxUpperRightBound;\n    },\n    set: function set(value) {\n      this.internalMediaBoxUpperRightBound = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphics.prototype, \"clientSize\", {\n    /**\n     * Gets the `size` of the canvas reduced by margins and page templates.\n     * @private\n     */\n    get: function get() {\n      return new SizeF(this.clipBounds.width, this.clipBounds.height);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphics.prototype, \"colorSpace\", {\n    /**\n     * Gets or sets the current `color space` of the document\n     * @private\n     */\n    get: function get() {\n      return this.currentColorSpace;\n    },\n    set: function set(value) {\n      this.currentColorSpace = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphics.prototype, \"streamWriter\", {\n    /**\n     * Gets the `stream writer`.\n     * @private\n     */\n    get: function get() {\n      return this.pdfStreamWriter;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphics.prototype, \"matrix\", {\n    /**\n     * Gets the `transformation matrix` reflecting current transformation.\n     * @private\n     */\n    get: function get() {\n      if (this.transformationMatrix == null) {\n        this.transformationMatrix = new PdfTransformationMatrix();\n      }\n\n      return this.transformationMatrix;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphics.prototype, \"layer\", {\n    /**\n     * Gets the `layer` for the graphics, if exists.\n     * @private\n     */\n    get: function get() {\n      return this.pageLayer;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphics.prototype, \"page\", {\n    /**\n     * Gets the `page` for this graphics, if exists.\n     * @private\n     */\n    get: function get() {\n      return this.pageLayer.page;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphics.prototype, \"automaticFields\", {\n    get: function get() {\n      if (this.internalAutomaticFields == null || typeof this.internalAutomaticFields === 'undefined') {\n        this.internalAutomaticFields = new PdfAutomaticFieldInfoCollection();\n      }\n\n      return this.internalAutomaticFields;\n    },\n    enumerable: true,\n    configurable: true\n  }); //Implementation\n\n  /**\n   * `Initializes` this instance.\n   * @private\n   */\n\n  PdfGraphics.prototype.initialize = function () {\n    this.bStateSaved = false;\n    this.currentPen = null;\n    this.currentBrush = null;\n    this.currentFont = null;\n    this.currentColorSpace = PdfColorSpace.Rgb;\n    this.bCSInitialized = false;\n    this.transformationMatrix = null;\n    this.previousTextRenderingMode = -1; //.Fill;\n\n    this.previousCharacterSpacing = -1.0;\n    this.previousWordSpacing = -1.0;\n    this.previousTextScaling = -100.0; // this.m_trasparencies = null;\n\n    this.currentStringFormat = null;\n    this.clipBounds = new RectangleF(new PointF(0, 0), this.size);\n    this.getResources.getResources().requireProcedureSet(this.procedureSets.pdf);\n  };\n\n  PdfGraphics.prototype.drawPdfTemplate = function (template, location, size) {\n    if (typeof size === 'undefined') {\n      if (template == null) {\n        throw Error('ArgumentNullException-template');\n      }\n\n      this.drawPdfTemplate(template, location, template.size);\n    } else {\n      // let crossTable : PdfCrossTable = null;\n      // if (this.pageLayer != null) {\n      //     crossTable = (this.page as PdfPage).section.parentDocument.crossTable;\n      // }\n      if (template == null) {\n        throw Error('ArgumentNullException-template');\n      }\n\n      var scaleX = template.width > 0 ? size.width / template.width : 1;\n      var scaleY = template.height > 0 ? size.height / template.height : 1;\n      var bNeedScale = !(scaleX === 1 && scaleY === 1); // Save state.\n\n      var state = this.save(); // Take into consideration that rect location is bottom/left.\n\n      var matrix = new PdfTransformationMatrix();\n\n      if (this.pageLayer != null) {\n        this.getTranslateTransform(location.x, location.y + size.height, matrix);\n      }\n\n      if (bNeedScale) {\n        this.getScaleTransform(scaleX, scaleY, matrix);\n      }\n\n      this.pdfStreamWriter.modifyCtm(matrix); // Output template.\n\n      var resources = this.getResources.getResources();\n      var name_1 = resources.getName(template);\n      this.pdfStreamWriter.executeObject(name_1); // Restore state.\n\n      this.restore(state); //Transfer automatic fields from template.\n\n      var g = template.graphics;\n\n      if (g != null) {\n        for (var index = 0; index < g.automaticFields.automaticFields.length; index++) {\n          var fieldInfo = g.automaticFields.automaticFields[index];\n          var newLocation = new PointF(fieldInfo.location.x + location.x, fieldInfo.location.y + location.y);\n          var scalingX = template.size.width == 0 ? 0 : size.width / template.size.width;\n          var scalingY = template.size.height == 0 ? 0 : size.height / template.size.height;\n          this.automaticFields.add(new PdfAutomaticFieldInfo(fieldInfo.field, newLocation, scalingX, scalingY));\n          this.page.dictionary.modify();\n        }\n      }\n\n      this.getResources.getResources().requireProcedureSet(this.procedureSets.imageB);\n      this.getResources.getResources().requireProcedureSet(this.procedureSets.imageC);\n      this.getResources.getResources().requireProcedureSet(this.procedureSets.imageI);\n      this.getResources.getResources().requireProcedureSet(this.procedureSets.text);\n    }\n  };\n  /* tslint:disable */\n\n  /**\n   * @public\n   */\n\n\n  PdfGraphics.prototype.drawString = function (arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9) {\n    if (typeof arg1 === 'string' && arg2 instanceof PdfFont && (arg3 instanceof PdfPen || arg3 === null) && (arg4 instanceof PdfBrush || arg4 === null) && typeof arg5 === 'number' && typeof arg6 === 'number' && (arg7 instanceof PdfStringFormat || arg7 === null) && typeof arg8 === 'undefined') {\n      this.isOverloadWithPosition = true;\n      this.drawString(arg1, arg2, arg3, arg4, arg5, arg6, this.clientSize.width - arg5, 0, arg7);\n    } else {\n      var temparg3 = arg3;\n      var temparg4 = arg4;\n      var temparg5 = arg5;\n      var temparg6 = arg6;\n      var temparg7 = arg7;\n      var temparg8 = arg8;\n      var temparg9 = arg9;\n      var layouter = new PdfStringLayouter();\n      var result = layouter.layout(arg1, arg2, temparg9, new SizeF(temparg7, temparg8), this.isOverloadWithPosition, this.clientSize);\n\n      if (!result.empty) {\n        var rect = this.checkCorrectLayoutRectangle(result.actualSize, temparg5, temparg6, temparg9);\n\n        if (temparg7 <= 0) {\n          temparg5 = rect.x;\n          temparg7 = rect.width;\n        }\n\n        if (temparg8 <= 0) {\n          temparg6 = rect.y;\n          temparg8 = rect.height;\n        }\n\n        this.drawStringLayoutResult(result, arg2, temparg3, temparg4, new RectangleF(temparg5, temparg6, temparg7, temparg8), temparg9);\n        this.isEmfTextScaled = false;\n        this.emfScalingFactor = new SizeF(0, 0);\n      }\n\n      this.getResources.getResources().requireProcedureSet(this.procedureSets.text);\n      this.isNormalRender = true;\n      this.pdfStringLayoutResult = result;\n      this.isUseFontSize = false;\n    }\n  };\n  /* tslint:enable */\n\n\n  PdfGraphics.prototype.drawLine = function (arg1, arg2, arg3, arg4, arg5) {\n    if (arg2 instanceof PointF) {\n      var temparg2 = arg2;\n      var temparg3 = arg3;\n      this.drawLine(arg1, temparg2.x, temparg2.y, temparg3.x, temparg3.y);\n    } else {\n      var temparg2 = arg2;\n      var temparg3 = arg3;\n      var temparg4 = arg4;\n      var temparg5 = arg5;\n      this.stateControl(arg1, null, null);\n      var sw = this.streamWriter;\n      sw.beginPath(temparg2, temparg3);\n      sw.appendLineSegment(temparg4, temparg5);\n      sw.strokePath();\n      this.getResources.getResources().requireProcedureSet(this.procedureSets.pdf);\n    }\n  };\n  /* tslint:disable */\n\n\n  PdfGraphics.prototype.drawRectangle = function (arg1, arg2, arg3, arg4, arg5, arg6) {\n    if (arg1 instanceof PdfPen && typeof arg2 === 'number') {\n      var temparg3 = arg3;\n      this.drawRectangle(arg1, null, arg2, temparg3, arg4, arg5);\n    } else if (arg1 instanceof PdfBrush && typeof arg2 === 'number') {\n      var temparg3 = arg3;\n      this.drawRectangle(null, arg1, arg2, temparg3, arg4, arg5);\n    } else {\n      var temparg3 = arg3;\n      var temparg4 = arg4;\n      var temparg5 = arg5;\n      var temparg6 = arg6;\n\n      if (arg2 instanceof PdfTilingBrush) {\n        this.bCSInitialized = false;\n        var xOffset = this.matrix.matrix.offsetX + temparg3;\n        var yOffset = void 0;\n\n        if (this.layer != null && this.layer.page != null) {\n          yOffset = this.layer.page.size.height - this.matrix.matrix.offsetY + temparg4;\n        } else {\n          yOffset = this.clientSize.height - this.matrix.matrix.offsetY + temparg4;\n        }\n\n        arg2.location = new PointF(xOffset, yOffset);\n        arg2.graphics.colorSpace = this.colorSpace;\n      } else if (arg2 instanceof PdfGradientBrush) {\n        arg2.colorSpace = this.colorSpace;\n      }\n\n      if (arg2 instanceof PdfSolidBrush && arg2.color.isEmpty) {\n        arg2 = null;\n      }\n\n      var temparg1 = arg1;\n      var temparg2 = arg2;\n      this.stateControl(temparg1, temparg2, null);\n      this.streamWriter.appendRectangle(temparg3, temparg4, temparg5, temparg6);\n      this.drawPathHelper(temparg1, temparg2, false);\n    }\n  };\n\n  PdfGraphics.prototype.drawPathHelper = function (arg1, arg2, arg3, arg4) {\n    if (typeof arg3 === 'boolean') {\n      var temparg3 = arg3;\n      this.drawPathHelper(arg1, arg2, PdfFillMode.Winding, temparg3);\n    } else {\n      var temparg3 = arg3;\n      var temparg4 = arg4;\n      var isPen = arg1 != null;\n      var isBrush = arg2 != null;\n      var isEvenOdd = temparg3 === PdfFillMode.Alternate;\n\n      if (isPen && isBrush) {\n        this.streamWriter.fillStrokePath(isEvenOdd);\n      } else if (!isPen && !isBrush) {\n        this.streamWriter.endPath();\n      } else if (isPen) {\n        this.streamWriter.strokePath();\n      } else {\n        this.streamWriter.fillPath(isEvenOdd);\n      }\n    }\n  };\n  /* tslint:disable */\n\n\n  PdfGraphics.prototype.drawImage = function (arg1, arg2, arg3, arg4, arg5) {\n    if (typeof arg2 === 'number' && typeof arg3 === 'number' && typeof arg4 === 'undefined') {\n      var size = arg1.physicalDimension;\n      this.drawImage(arg1, arg2, arg3, size.width, size.height);\n    } else {\n      var temparg2 = arg2;\n      var temparg3 = arg3;\n      var temparg4 = arg4;\n      var temparg5 = arg5;\n      arg1.save();\n      var matrix = new PdfTransformationMatrix();\n      this.getTranslateTransform(temparg2, temparg3 + temparg5, matrix);\n      this.getScaleTransform(arg4, arg5, matrix);\n      this.pdfStreamWriter.write('q');\n      this.pdfStreamWriter.modifyCtm(matrix); // Output template.\n\n      var resources = this.getResources.getResources();\n\n      if (typeof this.pageLayer !== 'undefined' && this.page != null) {\n        resources.document = this.page.document;\n      }\n\n      var name_2 = resources.getName(arg1);\n\n      if (typeof this.pageLayer !== 'undefined') {\n        this.page.setResources(resources);\n      }\n\n      this.pdfStreamWriter.executeObject(name_2);\n      this.pdfStreamWriter.write(Operators.restoreState);\n      this.pdfStreamWriter.write(Operators.newLine);\n      var resource = this.getResources.getResources();\n      resource.requireProcedureSet(this.procedureSets.imageB);\n      resource.requireProcedureSet(this.procedureSets.imageC);\n      resource.requireProcedureSet(this.procedureSets.imageI);\n      resource.requireProcedureSet(this.procedureSets.text);\n    }\n  }; //Implementation\n\n  /* tslint:disable */\n\n  /**\n   * Returns `bounds` of the line info.\n   * @private\n   */\n\n\n  PdfGraphics.prototype.getLineBounds = function (lineIndex, result, font, layoutRectangle, format) {\n    var bounds;\n\n    if (!result.empty && lineIndex < result.lineCount && lineIndex >= 0) {\n      var line = result.lines[lineIndex];\n      var vShift = this.getTextVerticalAlignShift(result.actualSize.height, layoutRectangle.height, format);\n      var y = vShift + layoutRectangle.y + result.lineHeight * lineIndex;\n      var lineWidth = line.width;\n      var hShift = this.getHorizontalAlignShift(lineWidth, layoutRectangle.width, format);\n      var lineIndent = this.getLineIndent(line, format, layoutRectangle, lineIndex === 0);\n      hShift += !this.rightToLeft(format) ? lineIndent : 0;\n      var x = layoutRectangle.x + hShift;\n      /* tslint:disable */\n\n      var width = !this.shouldJustify(line, layoutRectangle.width, format) ? lineWidth - lineIndent : layoutRectangle.width - lineIndent;\n      /* tslint:enable */\n\n      var height = result.lineHeight;\n      bounds = new RectangleF(x, y, width, height);\n    } else {\n      bounds = new RectangleF(0, 0, 0, 0);\n    }\n\n    return bounds;\n  };\n  /**\n   * Creates `lay outed rectangle` depending on the text settings.\n   * @private\n   */\n\n\n  PdfGraphics.prototype.checkCorrectLayoutRectangle = function (textSize, x, y, format) {\n    var layoutedRectangle = new RectangleF(x, y, textSize.width, textSize.width);\n\n    if (format != null) {\n      switch (format.alignment) {\n        case PdfTextAlignment.Center:\n          layoutedRectangle.x -= layoutedRectangle.width / 2;\n          break;\n\n        case PdfTextAlignment.Right:\n          layoutedRectangle.x -= layoutedRectangle.width;\n          break;\n      }\n\n      switch (format.lineAlignment) {\n        case PdfVerticalAlignment.Middle:\n          layoutedRectangle.y -= layoutedRectangle.height / 2;\n          break;\n\n        case PdfVerticalAlignment.Bottom:\n          layoutedRectangle.y -= layoutedRectangle.height;\n          break;\n      }\n    }\n\n    return layoutedRectangle;\n  };\n  /**\n   * Sets the `layer` for the graphics.\n   * @private\n   */\n\n\n  PdfGraphics.prototype.setLayer = function (layer) {\n    this.pageLayer = layer;\n    var page = layer.page;\n\n    if (page != null && typeof page !== 'undefined') {\n      page.beginSave = this.pageSave;\n    }\n  };\n  /**\n   * Adding page number field before page saving.\n   * @private\n   */\n\n  /* tslint:disable */\n\n\n  PdfGraphics.prototype.pageSave = function (page) {\n    if (page.graphics.automaticFields != null) {\n      for (var i = 0; i < page.graphics.automaticFields.automaticFields.length; i++) {\n        var fieldInfo = page.graphics.automaticFields.automaticFields[i];\n        fieldInfo.field.performDraw(page.graphics, fieldInfo.location, fieldInfo.scalingX, fieldInfo.scalingY);\n      }\n    }\n  };\n  /**\n   * `Draws a layout result`.\n   * @private\n   */\n\n\n  PdfGraphics.prototype.drawStringLayoutResult = function (result, font, pen, brush, layoutRectangle, format) {\n    if (!result.empty) {\n      this.applyStringSettings(font, pen, brush, format, layoutRectangle); // Set text scaling\n\n      var textScaling = format != null ? format.horizontalScalingFactor : 100.0;\n\n      if (textScaling !== this.previousTextScaling && !this.isEmfTextScaled) {\n        this.pdfStreamWriter.setTextScaling(textScaling);\n        this.previousTextScaling = textScaling;\n      }\n\n      var height = format == null || format.lineSpacing === 0 ? font.height : format.lineSpacing + font.height;\n      var subScript = format != null && format.subSuperScript === PdfSubSuperScript.SubScript;\n      var shift = 0;\n      shift = subScript ? height - (font.height + font.metrics.getDescent(format)) : height - font.metrics.getAscent(format);\n      this.shift = shift;\n      this.pdfStreamWriter.startNextLine(layoutRectangle.x, layoutRectangle.y - shift);\n      this.pdfStreamWriter.setLeading(+height);\n      var resultHeight = 0;\n      var remainingString = '';\n\n      for (var i = 0; i < result.lines.length; i++) {\n        resultHeight += result.lineHeight;\n\n        if (layoutRectangle.y + resultHeight > this.clientSize.height) {\n          this.startCutIndex = i;\n          break;\n        }\n      }\n\n      for (var j = this.startCutIndex; j < result.lines.length && j >= 0; j++) {\n        remainingString += result.lines[j].text;\n      }\n\n      var bounds = new RectangleF(layoutRectangle.x, layoutRectangle.y, layoutRectangle.width, layoutRectangle.height);\n      this.drawLayoutResult(result, font, format, layoutRectangle);\n      this.underlineStrikeoutText(pen, brush, result, font, bounds, format);\n      this.isEmfPlus = false;\n      this.isUseFontSize = false;\n\n      if (this.startCutIndex !== -1) {\n        var page = this.getNextPage();\n        page.graphics.drawString(remainingString, font, pen, brush, layoutRectangle.x, 0, layoutRectangle.width, 0, format);\n      }\n    } else {\n      throw new Error('ArgumentNullException:result');\n    }\n  };\n  /**\n   * Gets the `next page`.\n   * @private\n   */\n\n\n  PdfGraphics.prototype.getNextPage = function () {\n    var section = this.currentPage.section;\n    var nextPage = null;\n    var index = section.indexOf(this.currentPage);\n\n    if (index === section.count - 1) {\n      nextPage = section.add();\n    } else {\n      nextPage = section.getPages()[index + 1];\n    }\n\n    return nextPage;\n  };\n\n  PdfGraphics.prototype.setClip = function (rectangle, mode) {\n    if (typeof mode === 'undefined') {\n      this.setClip(rectangle, PdfFillMode.Winding);\n    } else {\n      this.pdfStreamWriter.appendRectangle(rectangle);\n      this.pdfStreamWriter.clipPath(mode === PdfFillMode.Alternate);\n    }\n  };\n  /**\n   * Applies all the `text settings`.\n   * @private\n   */\n\n\n  PdfGraphics.prototype.applyStringSettings = function (font, pen, brush, format, bounds) {\n    if (brush instanceof PdfTilingBrush) {\n      this.bCSInitialized = false;\n      brush.graphics.colorSpace = this.colorSpace;\n    } else if (brush instanceof PdfGradientBrush) {\n      this.bCSInitialized = false;\n      brush.colorSpace = this.colorSpace;\n    }\n\n    var setLineWidth = false;\n    var tm = this.getTextRenderingMode(pen, brush, format);\n    this.stateControl(pen, brush, font, format);\n    this.pdfStreamWriter.beginText();\n\n    if (tm !== this.previousTextRenderingMode) {\n      this.pdfStreamWriter.setTextRenderingMode(tm);\n      this.previousTextRenderingMode = tm;\n    } // Set character spacing.\n\n\n    var cs = format != null ? format.characterSpacing : 0;\n\n    if (cs !== this.previousCharacterSpacing && !this.isEmfTextScaled) {\n      this.pdfStreamWriter.setCharacterSpacing(cs);\n      this.previousCharacterSpacing = cs;\n    } // Set word spacing.\n    // NOTE: it works only if the space code is equal to 32 (0x20).\n\n\n    var ws = format != null ? format.wordSpacing : 0;\n\n    if (ws !== this.previousWordSpacing) {\n      this.pdfStreamWriter.setWordSpacing(ws);\n      this.previousWordSpacing = ws;\n    }\n  };\n  /**\n   * Calculates `shift value` if the text is vertically aligned.\n   * @private\n   */\n\n\n  PdfGraphics.prototype.getTextVerticalAlignShift = function (textHeight, boundsHeight, format) {\n    var shift = 0;\n\n    if (boundsHeight >= 0 && format != null && format.lineAlignment !== PdfVerticalAlignment.Top) {\n      switch (format.lineAlignment) {\n        case PdfVerticalAlignment.Middle:\n          shift = (boundsHeight - textHeight) / 2;\n          break;\n\n        case PdfVerticalAlignment.Bottom:\n          shift = boundsHeight - textHeight;\n          break;\n      }\n    }\n\n    return shift;\n  };\n  /* tslint:disable */\n\n  /**\n   * `Draws layout result`.\n   * @private\n   */\n\n\n  PdfGraphics.prototype.drawLayoutResult = function (result, font, format, layoutRectangle) {\n    var vAlignShift = this.getTextVerticalAlignShift(result.actualSize.height, layoutRectangle.height, format);\n\n    if (vAlignShift !== 0) {\n      this.pdfStreamWriter.startNextLine(0, vAlignShift);\n    }\n\n    var ttfFont = font;\n    var unicode = ttfFont != null && ttfFont.isUnicode;\n    var embed = ttfFont != null && ttfFont.isEmbedFont;\n    var lines = result.lines;\n\n    for (var i = 0, len = lines.length; i < len && i !== this.startCutIndex; i++) {\n      var lineInfo = lines[i];\n      var line = lineInfo.text;\n      var lineWidth = lineInfo.width;\n      var hAlignShift = this.getHorizontalAlignShift(lineWidth, layoutRectangle.width, format);\n      var lineIndent = this.getLineIndent(lineInfo, format, layoutRectangle, i === 0);\n      hAlignShift += !this.rightToLeft(format) ? lineIndent : 0;\n\n      if (hAlignShift !== 0 && !this.isEmfTextScaled) {\n        this.pdfStreamWriter.startNextLine(hAlignShift, 0);\n      }\n\n      if (unicode) {\n        this.drawUnicodeLine(lineInfo, layoutRectangle, font, format);\n      } else {\n        this.drawAsciiLine(lineInfo, layoutRectangle, font, format);\n      }\n\n      if (hAlignShift !== 0 && !this.isEmfTextScaled) {\n        this.pdfStreamWriter.startNextLine(-hAlignShift, 0);\n      }\n\n      if (this.isOverloadWithPosition && lines.length > 1) {\n        this.pdfStreamWriter.startNextLine(-layoutRectangle.x, 0);\n        layoutRectangle.x = 0;\n        layoutRectangle.width = this.clientSize.width;\n        this.isOverloadWithPosition = false;\n        this.isPointOverload = true;\n      }\n    }\n\n    this.getResources.getResources().requireProcedureSet(this.procedureSets.text);\n\n    if (vAlignShift !== 0) {\n      this.pdfStreamWriter.startNextLine(0, -(vAlignShift - result.lineHeight));\n    }\n\n    this.pdfStreamWriter.endText();\n  };\n  /**\n   * `Draws Ascii line`.\n   * @private\n   */\n\n\n  PdfGraphics.prototype.drawAsciiLine = function (lineInfo, layoutRectangle, font, format) {\n    this.justifyLine(lineInfo, layoutRectangle.width, format);\n    var value = '';\n\n    if (lineInfo.text.indexOf('(') !== -1 || lineInfo.text.indexOf(')') !== -1) {\n      for (var i = 0; i < lineInfo.text.length; i++) {\n        if (lineInfo.text[i] === '(') {\n          value += '\\\\\\(';\n        } else if (lineInfo.text[i] === ')') {\n          value += '\\\\\\)';\n        } else {\n          value += lineInfo.text[i];\n        }\n      }\n    }\n\n    if (value === '') {\n      value = lineInfo.text;\n    }\n\n    var line = '(' + value + ')';\n    this.pdfStreamWriter.showNextLineText(new PdfString(line));\n  };\n  /**\n   * Draws unicode line.\n   * @private\n   */\n\n\n  PdfGraphics.prototype.drawUnicodeLine = function (lineInfo, layoutRectangle, font, format) {\n    var line = lineInfo.text;\n    var lineWidth = lineInfo.width;\n    var rtl = format !== null && typeof format !== 'undefined' && format.rightToLeft;\n    /* tslint:disable-next-line:max-line-length */\n\n    var useWordSpace = format !== null && typeof format !== 'undefined' && (format.wordSpacing !== 0 || format.alignment === PdfTextAlignment.Justify);\n    var ttfFont = font;\n    var wordSpacing = this.justifyLine(lineInfo, layoutRectangle.width, format);\n    var rtlRender = new RtlRenderer();\n\n    if (rtl || format !== null && typeof format !== 'undefined' && format.textDirection !== PdfTextDirection.None) {\n      var blocks = null;\n      /* tslint:disable-next-line:max-line-length */\n\n      var rightAlign = format !== null && typeof format !== 'undefined' && format.alignment === PdfTextAlignment.Right;\n\n      if (format !== null && typeof format !== 'undefined' && format.textDirection !== PdfTextDirection.None) {\n        /* tslint:disable-next-line:max-line-length */\n        blocks = rtlRender.layout(line, ttfFont, format.textDirection === PdfTextDirection.RightToLeft ? true : false, useWordSpace, format);\n      } else {\n        blocks = rtlRender.layout(line, ttfFont, rightAlign, useWordSpace, format);\n      }\n\n      var words = null;\n\n      if (blocks.length > 1) {\n        if (format !== null && typeof format !== 'undefined' && format.textDirection !== PdfTextDirection.None) {\n          /* tslint:disable-next-line:max-line-length */\n          words = rtlRender.splitLayout(line, ttfFont, format.textDirection === PdfTextDirection.RightToLeft ? true : false, useWordSpace, format);\n        } else {\n          words = rtlRender.splitLayout(line, ttfFont, rightAlign, useWordSpace, format);\n        }\n      } else {\n        words = [line];\n      }\n\n      this.drawUnicodeBlocks(blocks, words, ttfFont, format, wordSpacing);\n    } else {\n      if (useWordSpace) {\n        var result = this.breakUnicodeLine(line, ttfFont, null);\n        var blocks = result.tokens;\n        var words = result.words;\n        this.drawUnicodeBlocks(blocks, words, ttfFont, format, wordSpacing);\n      } else {\n        var token = this.convertToUnicode(line, ttfFont);\n        var value = this.getUnicodeString(token);\n        this.streamWriter.showNextLineText(value);\n      }\n    }\n  };\n  /**\n   * Draws array of unicode tokens.\n   */\n\n  /* tslint:disable */\n\n\n  PdfGraphics.prototype.drawUnicodeBlocks = function (blocks, words, font, format, wordSpacing) {\n    /* tslint:enable */\n    if (blocks == null) {\n      throw new Error('Argument Null Exception : blocks');\n    }\n\n    if (words == null) {\n      throw new Error('Argument Null Exception : words');\n    }\n\n    if (font == null) {\n      throw new Error('Argument Null Exception : font');\n    }\n\n    this.streamWriter.startNextLine();\n    var x = 0;\n    var xShift = 0;\n    var firstLineIndent = 0;\n    var paragraphIndent = 0;\n\n    try {\n      if (format !== null && typeof format !== 'undefined') {\n        firstLineIndent = format.firstLineIndent;\n        paragraphIndent = format.paragraphIndent;\n        format.firstLineIndent = 0;\n        format.paragraphIndent = 0;\n      }\n\n      var spaceWidth = font.getCharWidth(StringTokenizer.whiteSpace, format) + wordSpacing;\n      var characterSpacing = format != null ? format.characterSpacing : 0;\n      var wordSpace = format !== null && typeof format !== 'undefined' && wordSpacing === 0 ? format.wordSpacing : 0;\n      spaceWidth += characterSpacing + wordSpace;\n\n      for (var i = 0; i < blocks.length; i++) {\n        var token = blocks[i];\n        var word = words[i];\n        var tokenWidth = 0;\n\n        if (x !== 0) {\n          this.streamWriter.startNextLine(x, 0);\n        }\n\n        if (word.length > 0) {\n          tokenWidth +=\n          /*Utils.Round(*/\n          font.measureString(word, format).width\n          /*)*/\n          ;\n          tokenWidth += characterSpacing;\n          var val = this.getUnicodeString(token);\n          this.streamWriter.showText(val);\n        }\n\n        if (i !== blocks.length - 1) {\n          x = tokenWidth + spaceWidth;\n          xShift += x;\n        }\n      } // Rolback current line position.\n\n\n      if (xShift > 0) {\n        this.streamWriter.startNextLine(-xShift, 0);\n      }\n    } finally {\n      if (format !== null && typeof format !== 'undefined') {\n        format.firstLineIndent = firstLineIndent;\n        format.paragraphIndent = paragraphIndent;\n      }\n    }\n  };\n  /**\n   * Breakes the unicode line to the words and converts symbols to glyphs.\n   */\n\n\n  PdfGraphics.prototype.breakUnicodeLine = function (line, ttfFont, words) {\n    if (line === null) {\n      throw new Error('Argument Null Exception : line');\n    }\n\n    words = line.split(null);\n    var tokens = [];\n\n    for (var i = 0; i < words.length; i++) {\n      // Reconvert string according to unicode standard.\n      var word = words[i];\n      var token = this.convertToUnicode(word, ttfFont);\n      tokens[i] = token;\n    }\n\n    return {\n      tokens: tokens,\n      words: words\n    };\n  };\n  /**\n   * Creates PdfString from the unicode text.\n   */\n\n\n  PdfGraphics.prototype.getUnicodeString = function (token) {\n    if (token === null) {\n      throw new Error('Argument Null Exception : token');\n    }\n\n    var val = new PdfString(token);\n    val.converted = true;\n    val.encode = InternalEnum.ForceEncoding.Ascii;\n    return val;\n  };\n  /**\n   * Converts to unicode format.\n   */\n\n\n  PdfGraphics.prototype.convertToUnicode = function (text, ttfFont) {\n    var token = null;\n\n    if (text == null) {\n      throw new Error('Argument Null Exception : text');\n    }\n\n    if (ttfFont == null) {\n      throw new Error('Argument Null Exception : ttfFont');\n    }\n\n    if (ttfFont.fontInternal instanceof UnicodeTrueTypeFont) {\n      var ttfReader = ttfFont.fontInternal.ttfReader;\n      ttfFont.setSymbols(text);\n      token = ttfReader.convertString(text);\n      var bytes = PdfString.toUnicodeArray(token, false);\n      token = PdfString.byteToString(bytes);\n    }\n\n    return token;\n  };\n  /**\n   * `Justifies` the line if needed.\n   * @private\n   */\n\n\n  PdfGraphics.prototype.justifyLine = function (lineInfo, boundsWidth, format) {\n    var line = lineInfo.text;\n    var lineWidth = lineInfo.width;\n    var shouldJustify = this.shouldJustify(lineInfo, boundsWidth, format);\n    var hasWordSpacing = format != null && format.wordSpacing !== 0;\n    var symbols = StringTokenizer.spaces;\n    var whitespacesCount = StringTokenizer.getCharsCount(line, symbols);\n    var wordSpace = 0;\n\n    if (shouldJustify) {\n      // Correct line width.\n      if (hasWordSpacing) {\n        lineWidth -= whitespacesCount * format.wordSpacing;\n      }\n\n      var difference = boundsWidth - lineWidth;\n      wordSpace = difference / whitespacesCount;\n      this.pdfStreamWriter.setWordSpacing(wordSpace);\n    } else {\n      // If there is justifying, but the line shouldn't be justified, restore default word spacing.\n      if (hasWordSpacing) {\n        this.pdfStreamWriter.setWordSpacing(format.wordSpacing);\n      } else {\n        this.pdfStreamWriter.setWordSpacing(0);\n      }\n    }\n\n    return wordSpace;\n  };\n  /**\n   * `Reset` or reinitialize the current graphic value.\n   * @private\n   */\n\n\n  PdfGraphics.prototype.reset = function (size) {\n    this.canvasSize = size;\n    this.streamWriter.clear();\n    this.initialize();\n    this.initializeCoordinates();\n  };\n  /**\n   * Checks whether the line should be `justified`.\n   * @private\n   */\n\n\n  PdfGraphics.prototype.shouldJustify = function (lineInfo, boundsWidth, format) {\n    var line = lineInfo.text;\n    var lineWidth = lineInfo.width;\n    var justifyStyle = format != null && format.alignment === PdfTextAlignment.Justify;\n    var goodWidth = boundsWidth >= 0 && lineWidth < boundsWidth;\n    var symbols = StringTokenizer.spaces;\n    var whitespacesCount = StringTokenizer.getCharsCount(line, symbols);\n    var hasSpaces = whitespacesCount > 0 && line[0] !== StringTokenizer.whiteSpace;\n    var goodLineBreakStyle = (lineInfo.lineType & LineType.LayoutBreak) > 0;\n    /* tslint:disable */\n\n    var shouldJustify = justifyStyle && goodWidth && hasSpaces && (goodLineBreakStyle || format.alignment === PdfTextAlignment.Justify);\n    /* tslint:enable */\n\n    return shouldJustify;\n  };\n  /* tslint:disable */\n\n  /**\n   * Emulates `Underline, Strikeout` of the text if needed.\n   * @private\n   */\n\n\n  PdfGraphics.prototype.underlineStrikeoutText = function (pen, brush, result, font, layoutRectangle, format) {\n    if (font.underline || font.strikeout) {\n      // Calculate line width.\n      var linePen = this.createUnderlineStikeoutPen(pen, brush, font, format);\n\n      if (linePen != null) {\n        // Approximate line positions.\n        var vShift = this.getTextVerticalAlignShift(result.actualSize.height, layoutRectangle.height, format);\n        var underlineYOffset = 0;\n        underlineYOffset = layoutRectangle.y + vShift + font.metrics.getAscent(format) + 1.5 * linePen.width;\n        var strikeoutYOffset = layoutRectangle.y + vShift + font.metrics.getHeight(format) / 2 + 1.5 * linePen.width;\n        var lines = result.lines; // Run through the text and draw lines.\n\n        for (var i = 0, len = result.lineCount; i < len; i++) {\n          var lineInfo = lines[i];\n          var line = lineInfo.text;\n          var lineWidth = lineInfo.width;\n          var hShift = this.getHorizontalAlignShift(lineWidth, layoutRectangle.width, format);\n          var lineIndent = this.getLineIndent(lineInfo, format, layoutRectangle, i === 0);\n          hShift += !this.rightToLeft(format) ? lineIndent : 0;\n          var x1 = layoutRectangle.x + hShift;\n          /* tslint:disable */\n\n          var x2 = !this.shouldJustify(lineInfo, layoutRectangle.width, format) ? x1 + lineWidth - lineIndent : x1 + layoutRectangle.width - lineIndent;\n          /* tslint:enable */\n\n          if (font.underline) {\n            var y = underlineYOffset;\n            this.drawLine(linePen, x1, y, x2, y);\n            underlineYOffset += result.lineHeight;\n          }\n\n          if (font.strikeout) {\n            var y = strikeoutYOffset;\n            this.drawLine(linePen, x1, y, x2, y);\n            strikeoutYOffset += result.lineHeight;\n          }\n\n          if (this.isPointOverload && lines.length > 1) {\n            layoutRectangle.x = 0;\n            layoutRectangle.width = this.clientSize.width;\n          }\n        }\n\n        this.isPointOverload = false;\n      }\n    }\n  };\n  /**\n   * `Creates a pen` for drawing lines in the text.\n   * @private\n   */\n\n\n  PdfGraphics.prototype.createUnderlineStikeoutPen = function (pen, brush, font, format) {\n    // Calculate line width.\n    var lineWidth = font.metrics.getSize(format) / 20;\n    var linePen = null; // Create a pen fo the lines.\n\n    if (pen != null) {\n      linePen = new PdfPen(pen.color, lineWidth);\n    } else if (brush != null) {\n      linePen = new PdfPen(brush, lineWidth);\n    }\n\n    return linePen;\n  };\n  /**\n   * Return `text rendering mode`.\n   * @private\n   */\n\n\n  PdfGraphics.prototype.getTextRenderingMode = function (pen, brush, format) {\n    var tm = TextRenderingMode.None;\n\n    if (pen != null && brush != null) {\n      tm = TextRenderingMode.FillStroke;\n    } else if (pen != null) {\n      tm = TextRenderingMode.Stroke;\n    } else {\n      tm = TextRenderingMode.Fill;\n    }\n\n    if (format != null && format.clipPath) {\n      tm |= TextRenderingMode.ClipFlag;\n    }\n\n    return tm;\n  };\n  /**\n   * Returns `line indent` for the line.\n   * @private\n   */\n\n\n  PdfGraphics.prototype.getLineIndent = function (lineInfo, format, layoutBounds, firstLine) {\n    var lineIndent = 0;\n    var firstParagraphLine = (lineInfo.lineType & LineType.FirstParagraphLine) > 0;\n\n    if (format != null && firstParagraphLine) {\n      lineIndent = firstLine ? format.firstLineIndent : format.paragraphIndent;\n      lineIndent = layoutBounds.width > 0 ? Math.min(layoutBounds.width, lineIndent) : lineIndent;\n    }\n\n    return lineIndent;\n  };\n  /**\n   * Calculates shift value if the line is `horizontaly aligned`.\n   * @private\n   */\n\n\n  PdfGraphics.prototype.getHorizontalAlignShift = function (lineWidth, boundsWidth, format) {\n    var shift = 0;\n\n    if (boundsWidth >= 0 && format != null && format.alignment !== PdfTextAlignment.Left) {\n      switch (format.alignment) {\n        case PdfTextAlignment.Center:\n          shift = (boundsWidth - lineWidth) / 2;\n          break;\n\n        case PdfTextAlignment.Right:\n          shift = boundsWidth - lineWidth;\n          break;\n      }\n    }\n\n    return shift;\n  };\n  /**\n   * Gets or sets the value that indicates `text direction` mode.\n   * @private\n   */\n\n\n  PdfGraphics.prototype.rightToLeft = function (format) {\n    var rtl = format !== null && typeof format !== 'undefined' && format.rightToLeft;\n\n    if (format !== null && typeof format !== 'undefined') {\n      if (format.textDirection !== PdfTextDirection.None && typeof format.textDirection !== 'undefined') {\n        rtl = true;\n      }\n    }\n\n    return rtl;\n  };\n\n  PdfGraphics.prototype.stateControl = function (pen, brush, font, format) {\n    if (typeof format === 'undefined') {\n      this.stateControl(pen, brush, font, null);\n    } else {\n      if (brush instanceof PdfGradientBrush) {\n        this.bCSInitialized = false;\n        brush.colorSpace = this.colorSpace;\n      }\n\n      if (brush instanceof PdfTilingBrush) {\n        this.bCSInitialized = false;\n        brush.graphics.colorSpace = this.colorSpace;\n      }\n\n      var saveState = false;\n\n      if (brush !== null) {\n        var solidBrush = brush;\n\n        if (typeof this.pageLayer !== 'undefined' && this.pageLayer != null) {\n          if (this.colorSpaceChanged === false) {\n            this.lastDocumentCS = this.pageLayer.page.document.colorSpace;\n            this.lastGraphicsCS = this.pageLayer.page.graphics.colorSpace;\n            this.colorSpace = this.pageLayer.page.document.colorSpace;\n            this.currentColorSpace = this.pageLayer.page.document.colorSpace;\n            this.colorSpaceChanged = true;\n          }\n        }\n\n        this.initCurrentColorSpace(this.currentColorSpace);\n      } else if (pen != null) {\n        var pdfPen = pen;\n\n        if (typeof this.pageLayer !== 'undefined' && this.pageLayer != null) {\n          /* tslint:disable */\n          this.colorSpace = this.pageLayer.page.document.colorSpace;\n          this.currentColorSpace = this.pageLayer.page.document.colorSpace;\n        }\n\n        this.initCurrentColorSpace(this.currentColorSpace);\n      }\n\n      this.penControl(pen, saveState);\n      this.brushControl(brush, saveState);\n      this.fontControl(font, format, saveState);\n    }\n  };\n  /**\n   * Initializes the `current color space`.\n   * @private\n   */\n\n\n  PdfGraphics.prototype.initCurrentColorSpace = function (colorspace) {\n    var re = this.getResources.getResources();\n\n    if (!this.bCSInitialized) {\n      if (this.currentColorSpace != PdfColorSpace.GrayScale) {\n        this.pdfStreamWriter.setColorSpace('Device' + this.currentColorSpaces[this.currentColorSpace], true);\n        this.pdfStreamWriter.setColorSpace('Device' + this.currentColorSpaces[this.currentColorSpace], false);\n        this.bCSInitialized = true;\n      } else {\n        this.pdfStreamWriter.setColorSpace('DeviceGray', true);\n        this.pdfStreamWriter.setColorSpace('DeviceGray', false);\n        this.bCSInitialized = true;\n      }\n    }\n  };\n  /**\n   * Controls the `pen state`.\n   * @private\n   */\n\n\n  PdfGraphics.prototype.penControl = function (pen, saveState) {\n    if (pen != null) {\n      this.currentPen = pen;\n      /* tslint:disable */\n\n      pen.monitorChanges(this.currentPen, this.pdfStreamWriter, this.getResources, saveState, this.colorSpace, this.matrix.clone());\n      /* tslint:enable */\n\n      this.currentPen = pen.clone();\n    }\n  };\n  /**\n   * Controls the `brush state`.\n   * @private\n   */\n\n\n  PdfGraphics.prototype.brushControl = function (brush, saveState) {\n    if (brush != null && typeof brush !== 'undefined') {\n      var b = brush.clone();\n      var lgb = b;\n\n      if (lgb !== null && typeof lgb !== 'undefined' && !(brush instanceof PdfSolidBrush) && !(brush instanceof PdfTilingBrush)) {\n        var m = lgb.matrix;\n        var matrix = this.matrix.clone();\n\n        if (m != null) {\n          m.multiply(matrix);\n          matrix = m;\n        }\n\n        lgb.matrix = matrix;\n      }\n\n      this.currentBrush = lgb;\n      var br = brush;\n      /* tslint:disable */\n\n      b.monitorChanges(this.currentBrush, this.pdfStreamWriter, this.getResources, saveState, this.colorSpace);\n      /* tslint:enable */\n\n      this.currentBrush = brush;\n      brush = null;\n    }\n  };\n  /**\n   * Saves the font and other `font settings`.\n   * @private\n   */\n\n\n  PdfGraphics.prototype.fontControl = function (font, format, saveState) {\n    if (font != null) {\n      var curSubSuper = format != null ? format.subSuperScript : PdfSubSuperScript.None;\n      /* tslint:disable */\n\n      var prevSubSuper = this.currentStringFormat != null ? this.currentStringFormat.subSuperScript : PdfSubSuperScript.None;\n      /* tslint:enable */\n\n      if (saveState || font !== this.currentFont || curSubSuper !== prevSubSuper) {\n        var resources = this.getResources.getResources();\n        this.currentFont = font;\n        this.currentStringFormat = format;\n        var size = font.metrics.getSize(format);\n        /* tslint:disable */\n\n        this.isEmfTextScaled = false;\n        var fontName = resources.getName(font);\n        this.pdfStreamWriter.setFont(font, fontName, size);\n      }\n    }\n  };\n\n  PdfGraphics.prototype.setTransparency = function (arg1, arg2, arg3) {\n    if (typeof arg2 === 'undefined') {\n      this.istransparencySet = true;\n      this.setTransparency(arg1, arg1, PdfBlendMode.Normal);\n    } else if (typeof arg2 === 'number' && typeof arg3 === 'undefined') {\n      this.setTransparency(arg1, arg2, PdfBlendMode.Normal);\n    } else {\n      if (this.trasparencies == null) {\n        this.trasparencies = new TemporaryDictionary();\n      }\n\n      var transp = null;\n      var td = new TransparencyData(arg1, arg2, arg3);\n\n      if (this.trasparencies.containsKey(td)) {\n        transp = this.trasparencies.getValue(td);\n      }\n\n      if (transp == null) {\n        transp = new PdfTransparency(arg1, arg2, arg3);\n        this.trasparencies.setValue(td, transp);\n      }\n\n      var resources = this.getResources.getResources();\n      var name_3 = resources.getName(transp);\n      var sw = this.streamWriter;\n      sw.setGraphicsState(name_3);\n    }\n  };\n\n  PdfGraphics.prototype.clipTranslateMargins = function (x, y, left, top, right, bottom) {\n    if (x instanceof RectangleF && typeof y === 'undefined') {\n      this.clipBounds = x;\n      this.pdfStreamWriter.writeComment('Clip margins.');\n      this.pdfStreamWriter.appendRectangle(x);\n      this.pdfStreamWriter.closePath();\n      this.pdfStreamWriter.clipPath(false);\n      this.pdfStreamWriter.writeComment('Translate co-ordinate system.');\n      this.translateTransform(x.x, x.y);\n    } else if (typeof x === 'number') {\n      var clipArea = new RectangleF(left, top, this.size.width - left - right, this.size.height - top - bottom);\n      this.clipBounds = clipArea;\n      this.pdfStreamWriter.writeComment(\"Clip margins.\");\n      this.pdfStreamWriter.appendRectangle(clipArea);\n      this.pdfStreamWriter.closePath();\n      this.pdfStreamWriter.clipPath(false);\n      this.pdfStreamWriter.writeComment(\"Translate co-ordinate system.\");\n      this.translateTransform(x, y);\n    }\n  };\n  /**\n   * `Updates y` co-ordinate.\n   * @private\n   */\n\n\n  PdfGraphics.prototype.updateY = function (y) {\n    return -y;\n  };\n  /**\n   * Used to `translate the transformation`.\n   * ```typescript\n   * // create a new PDF document\n   * let document : PdfDocument = new PdfDocument();\n   * // create a new page\n   * let page1 : PdfPage = document.pages.add();\n   * // set pen\n   * let pen : PdfPen = new PdfPen(new PdfColor(0, 0, 0));\n   * //\n   * // set translate transform\n   * page1.graphics.translateTransform(100, 100);\n   * //\n   * // draw the rectangle after applying translate transform\n   * page1.graphics.drawRectangle(pen, new RectangleF({x : 0, y : 0}, {width : 100, height : 50}));\n   * // save the document.\n   * document.save('output.pdf');\n   * // destroy the document\n   * document.destroy();\n   * ```\n   * @param offsetX The x-coordinate of the translation.\n   * @param offsetY The y-coordinate of the translation.\n   */\n\n\n  PdfGraphics.prototype.translateTransform = function (offsetX, offsetY) {\n    var matrix = new PdfTransformationMatrix();\n    this.getTranslateTransform(offsetX, offsetY, matrix);\n    this.pdfStreamWriter.modifyCtm(matrix);\n    this.matrix.multiply(matrix);\n  };\n  /**\n   * `Translates` coordinates of the input matrix.\n   * @private\n   */\n\n\n  PdfGraphics.prototype.getTranslateTransform = function (x, y, input) {\n    input.translate(x, this.updateY(y));\n    return input;\n  };\n  /* tslint:disable */\n\n  /**\n   * Applies the specified `scaling operation` to the transformation matrix of this Graphics by prepending it to the object's transformation matrix.\n   * ```typescript\n   * // create a new PDF document\n   * let document : PdfDocument = new PdfDocument();\n   * // create a new page\n   * let page1 : PdfPage = document.pages.add();\n   * // create pen\n   * let pen : PdfPen = new PdfPen(new PdfColor(0, 0, 0));\n   * //\n   * // apply scaling trasformation\n   * page1.graphics.scaleTransform(1.5, 2);\n   * //\n   * // draw the rectangle after applying scaling transform\n   * page1.graphics.drawRectangle(pen, new RectangleF({x : 100, y : 100}, {width : 100, height : 50}));\n   * // save the document.\n   * document.save('output.pdf');\n   * // destroy the document\n   * document.destroy();\n   * ```\n   * @param scaleX Scale factor in the x direction.\n   * @param scaleY Scale factor in the y direction.\n   */\n\n  /* tslint:enable */\n\n\n  PdfGraphics.prototype.scaleTransform = function (scaleX, scaleY) {\n    var matrix = new PdfTransformationMatrix();\n    this.getScaleTransform(scaleX, scaleY, matrix);\n    this.pdfStreamWriter.modifyCtm(matrix);\n    this.matrix.multiply(matrix);\n  };\n  /**\n   * `Scales` coordinates of the input matrix.\n   * @private\n   */\n\n\n  PdfGraphics.prototype.getScaleTransform = function (x, y, input) {\n    if (input == null) {\n      input = new PdfTransformationMatrix();\n    }\n\n    input.scale(x, y);\n    return input;\n  };\n  /**\n   * Applies the specified `rotation` to the transformation matrix of this Graphics.\n   * ```typescript\n   * // create a new PDF document\n   * let document : PdfDocument = new PdfDocument();\n   * // create a new page\n   * let page1 : PdfPage = document.pages.add();\n   * // create pen\n   * let pen : PdfPen = new PdfPen(new PdfColor(0, 0, 0));\n   * //\n   * // set RotateTransform with 25 degree of angle\n   * page1.graphics.rotateTransform(25);\n   * //\n   * // draw the rectangle after RotateTransformation\n   * page1.graphics.drawRectangle(pen, new RectangleF({x : 100, y : 100}, {width : 100, height : 50}));\n   * // save the document.\n   * document.save('output.pdf');\n   * // destroy the document\n   * document.destroy();\n   * ```\n   * @param angle Angle of rotation in degrees.\n   */\n\n\n  PdfGraphics.prototype.rotateTransform = function (angle) {\n    var matrix = new PdfTransformationMatrix();\n    this.getRotateTransform(angle, matrix);\n    this.pdfStreamWriter.modifyCtm(matrix);\n    this.matrix.multiply(matrix);\n  };\n  /**\n   * `Initializes coordinate system`.\n   * @private\n   */\n\n\n  PdfGraphics.prototype.initializeCoordinates = function () {\n    // Matrix equation: TM(T-1)=M', where T=[1 0 0 -1 0 h]\n    this.pdfStreamWriter.writeComment('Change co-ordinate system to left/top.'); // Translate co-ordinates only, don't flip.\n\n    if (this.mediaBoxUpperRightBound !== -this.size.height) {\n      if (this.cropBox == null) {\n        if (this.mediaBoxUpperRightBound === this.size.height || this.mediaBoxUpperRightBound === 0) {\n          this.translateTransform(0, this.updateY(this.size.height));\n        } else {\n          this.translateTransform(0, this.updateY(this.mediaBoxUpperRightBound));\n        }\n      }\n    }\n  };\n  /**\n   * `Rotates` coordinates of the input matrix.\n   * @private\n   */\n\n\n  PdfGraphics.prototype.getRotateTransform = function (angle, input) {\n    if (input == null || typeof input === 'undefined') {\n      input = new PdfTransformationMatrix();\n    }\n\n    input.rotate(this.updateY(angle));\n    return input;\n  };\n  /**\n   * `Saves` the current state of this Graphics and identifies the saved state with a GraphicsState.\n   * ```typescript\n   * // create a new PDF document\n   * let document : PdfDocument = new PdfDocument();\n   * // create a new page\n   * let page1 : PdfPage = document.pages.add();\n   * // create pen\n   * let pen : PdfPen = new PdfPen(new PdfColor(0, 0, 0));\n   * //\n   * // save the graphics state\n   * let state1 : PdfGraphicsState = page1.graphics.save();\n   * //\n   * page1.graphics.scaleTransform(1.5, 2);\n   * // draw the rectangle\n   * page1.graphics.drawRectangle(pen, new RectangleF({x : 100, y : 100}, {width : 100, height : 50}));\n   * // restore the graphics state\n   * page1.graphics.restore(state1);\n   * // save the document.\n   * document.save('output.pdf');\n   * // destroy the document\n   * document.destroy();\n   * ```\n   */\n\n\n  PdfGraphics.prototype.save = function () {\n    var state = new PdfGraphicsState(this, this.matrix.clone());\n    state.brush = this.currentBrush;\n    state.pen = this.currentPen;\n    state.font = this.currentFont;\n    state.colorSpace = this.currentColorSpace;\n    state.characterSpacing = this.previousCharacterSpacing;\n    state.wordSpacing = this.previousWordSpacing;\n    state.textScaling = this.previousTextScaling;\n    state.textRenderingMode = this.previousTextRenderingMode;\n    this.graphicsState.push(state);\n    this.pdfStreamWriter.saveGraphicsState();\n    return state;\n  };\n\n  PdfGraphics.prototype.restore = function (state) {\n    if (typeof state === 'undefined') {\n      if (this.graphicsState.length > 0) {\n        this.doRestoreState();\n      }\n    } else {\n      if (this.graphicsState.indexOf(state) !== -1) {\n        for (;;) {\n          if (this.graphicsState.length === 0) {\n            break;\n          }\n\n          var popState = this.doRestoreState();\n\n          if (popState === state) {\n            break;\n          }\n        }\n      }\n    }\n  };\n  /**\n   * `Restores graphics state`.\n   * @private\n   */\n\n\n  PdfGraphics.prototype.doRestoreState = function () {\n    var state = this.graphicsState.pop();\n    this.transformationMatrix = state.matrix;\n    this.currentBrush = state.brush;\n    this.currentPen = state.pen;\n    this.currentFont = state.font;\n    this.currentColorSpace = state.colorSpace;\n    this.previousCharacterSpacing = state.characterSpacing;\n    this.previousWordSpacing = state.wordSpacing;\n    this.previousTextScaling = state.textScaling;\n    this.previousTextRenderingMode = state.textRenderingMode;\n    this.pdfStreamWriter.restoreGraphicsState();\n    return state;\n  };\n  /* tslint:enable */\n\n  /**\n   * `Draws the specified path`, using its original physical size, at the location specified by a coordinate pair.\n   * ```typescript\n   * // create a new PDF document.\n   * let document : PdfDocument = new PdfDocument();\n   * // add a page to the document.\n   * let page1 : PdfPage = document.pages.add();\n   * //Create new PDF path.\n   * let path : PdfPath = new PdfPath();\n   * //Add line path points.\n   * path.addLine(new PointF(10, 100), new PointF(10, 200));\n   * path.addLine(new PointF(100, 100), new PointF(100, 200));\n   * path.addLine(new PointF(100, 200), new PointF(55, 150));\n   * // set pen\n   * let pen : PdfPen = new PdfPen(new PdfColor(255, 0, 0));\n   * // set brush\n   * let brush : PdfSolidBrush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n   * // draw the path\n   * page1.graphics.drawPath(pen, brush, path);\n   * //\n   * // save the document.\n   * document.save('output.pdf');\n   * // destroy the document\n   * document.destroy();\n   * ```\n   * @param pen Color of the text.\n   * @param brush Color of the text.\n   * @param path Draw path.\n   */\n\n\n  PdfGraphics.prototype.drawPath = function (pen, brush, path) {\n    if (brush instanceof PdfTilingBrush) {\n      this.bCSInitialized = false;\n      brush.graphics.colorSpace = this.colorSpace;\n    } else if (brush instanceof PdfGradientBrush) {\n      this.bCSInitialized = false;\n      brush.colorSpace = this.colorSpace;\n    }\n\n    this.stateControl(pen, brush, null);\n    this.buildUpPath(path.pathPoints, path.pathTypes);\n    this.drawPathHelper(pen, brush, path.fillMode, false);\n  };\n  /* tslint:disable-next-line:max-line-length */\n\n\n  PdfGraphics.prototype.drawArc = function (arg1, arg2, arg3, arg4, arg5, arg6, arg7) {\n    if (arg2 instanceof RectangleF) {\n      this.drawArc(arg1, arg2.x, arg2.y, arg2.width, arg2.height, arg3, arg4);\n    } else {\n      if (arg7 !== 0) {\n        this.stateControl(arg1, null, null);\n        this.constructArcPath(arg2, arg3, arg2 + arg4, arg3 + arg5, arg6, arg7);\n        this.drawPathHelper(arg1, null, false);\n      }\n    }\n  };\n  /**\n   * Builds up the path.\n   * @private\n   */\n\n\n  PdfGraphics.prototype.buildUpPath = function (arg1, arg2) {\n    var cnt = arg1.length;\n\n    for (var i = 0; i < cnt; ++i) {\n      var typeValue = 0;\n      var point = arg1[i];\n\n      switch (arg2[i] & PdfGraphics.pathTypesValuesMask) {\n        case PathPointType.Start:\n          this.pdfStreamWriter.beginPath(point.x, point.y);\n          break;\n\n        case PathPointType.Bezier3:\n          var p2 = new PointF(0, 0);\n          var p3 = new PointF(0, 0);\n          var result1 = this.getBezierPoints(arg1, arg2, i, p2, p3);\n          this.pdfStreamWriter.appendBezierSegment(point, result1.p2, result1.p3);\n          i = result1.i;\n          break;\n\n        case PathPointType.Line:\n          this.pdfStreamWriter.appendLineSegment(point);\n          break;\n\n        default:\n          throw new Error('ArithmeticException - Incorrect path formation.');\n      }\n\n      typeValue = arg2[i];\n      this.checkFlags(typeValue);\n    }\n  };\n  /**\n   * Gets the bezier points from respective arrays.\n   * @private\n   */\n\n  /* tslint:disable-next-line:max-line-length */\n\n\n  PdfGraphics.prototype.getBezierPoints = function (points, types, i, p2, p3) {\n    var errorMsg = 'Malforming path.';\n    ++i;\n\n    if ((types[i] & PdfGraphics.pathTypesValuesMask) === PathPointType.Bezier3) {\n      p2 = points[i];\n      ++i;\n\n      if ((types[i] & PdfGraphics.pathTypesValuesMask) === PathPointType.Bezier3) {\n        p3 = points[i];\n      } else {\n        throw new Error('ArgumentException : errorMsg');\n      }\n    } else {\n      throw new Error('ArgumentException : errorMsg');\n    }\n\n    return {\n      i: i,\n      p2: p2,\n      p3: p3\n    };\n  };\n  /**\n   * Checks path point type flags.\n   * @private\n   */\n\n\n  PdfGraphics.prototype.checkFlags = function (type) {\n    if ((type & PathPointType.CloseSubpath) === PathPointType.CloseSubpath) {\n      this.pdfStreamWriter.closePath();\n    }\n  };\n  /**\n   * Constructs the arc path using Bezier curves.\n   * @private\n   */\n\n\n  PdfGraphics.prototype.constructArcPath = function (x1, y1, x2, y2, startAng, sweepAngle) {\n    var points = this.getBezierArc(x1, y1, x2, y2, startAng, sweepAngle);\n\n    if (points.length === 0) {\n      return;\n    }\n\n    var pt = [points[0], points[1], points[2], points[3], points[4], points[5], points[6], points[7]];\n    this.pdfStreamWriter.beginPath(pt[0], pt[1]);\n    var i = 0;\n\n    for (i = 0; i < points.length; i = i + 8) {\n      pt = [points[i], points[i + 1], points[i + 2], points[i + 3], points[i + 4], points[i + 5], points[i + 6], points[i + 7]];\n      this.pdfStreamWriter.appendBezierSegment(pt[2], pt[3], pt[4], pt[5], pt[6], pt[7]);\n    }\n  };\n  /**\n   * Gets the bezier points for arc constructing.\n   * @private\n   */\n\n\n  PdfGraphics.prototype.getBezierArc = function (numX1, numY1, numX2, numY2, s1, e1) {\n    if (numX1 > numX2) {\n      var tmp = void 0;\n      tmp = numX1;\n      numX1 = numX2;\n      numX2 = tmp;\n    }\n\n    if (numY2 > numY1) {\n      var tmp = void 0;\n      tmp = numY1;\n      numY1 = numY2;\n      numY2 = tmp;\n    }\n\n    var fragAngle1;\n    var numFragments;\n\n    if (Math.abs(e1) <= 90) {\n      fragAngle1 = e1;\n      numFragments = 1;\n    } else {\n      numFragments = Math.ceil(Math.abs(e1) / 90);\n      fragAngle1 = e1 / numFragments;\n    }\n\n    var xcen = (numX1 + numX2) / 2;\n    var ycen = (numY1 + numY2) / 2;\n    var rx = (numX2 - numX1) / 2;\n    var ry = (numY2 - numY1) / 2;\n    var halfAng = fragAngle1 * (Math.PI / 360);\n    var kappa = Math.abs(4.0 / 3.0 * (1.0 - Math.cos(halfAng)) / Math.sin(halfAng));\n    var pointsList = [];\n\n    for (var i = 0; i < numFragments; i++) {\n      var thetaValue0 = (s1 + i * fragAngle1) * (Math.PI / 180);\n      var thetaValue1 = (s1 + (i + 1) * fragAngle1) * (Math.PI / 180);\n      var cos0 = Math.cos(thetaValue0);\n      var cos1 = Math.cos(thetaValue1);\n      var sin0 = Math.sin(thetaValue0);\n      var sin1 = Math.sin(thetaValue1);\n\n      if (fragAngle1 > 0) {\n        /* tslint:disable-next-line:max-line-length */\n        pointsList.push(xcen + rx * cos0, ycen - ry * sin0, xcen + rx * (cos0 - kappa * sin0), ycen - ry * (sin0 + kappa * cos0), xcen + rx * (cos1 + kappa * sin1), ycen - ry * (sin1 - kappa * cos1), xcen + rx * cos1, ycen - ry * sin1);\n      } else {\n        /* tslint:disable-next-line:max-line-length */\n        pointsList.push(xcen + rx * cos0, ycen - ry * sin0, xcen + rx * (cos0 + kappa * sin0), ycen - ry * (sin0 - kappa * cos0), xcen + rx * (cos1 - kappa * sin1), ycen - ry * (sin1 + kappa * cos1), xcen + rx * cos1, ycen - ry * sin1);\n      }\n    }\n\n    return pointsList;\n  }; // Constants\n\n  /**\n   * Specifies the mask of `path type values`.\n   * @private\n   */\n\n\n  PdfGraphics.pathTypesValuesMask = 0xf;\n  /**\n   * Checks whether the object is `transparencyObject`.\n   * @hidden\n   * @private\n   */\n\n  PdfGraphics.transparencyObject = false;\n  return PdfGraphics;\n}();\n\nexport { PdfGraphics };\n/**\n * `GetResourceEventHandler` class is alternate for event handlers and delegates.\n * @private\n * @hidden\n */\n\nvar GetResourceEventHandler =\n/** @class */\nfunction () {\n  /**\n   * Initialize instance of `GetResourceEventHandler` class.\n   * Alternate for event handlers and delegates.\n   * @private\n   */\n  function GetResourceEventHandler(sender) {\n    this.sender = sender;\n  }\n  /**\n   * Return the instance of `PdfResources` class.\n   * @private\n   */\n\n\n  GetResourceEventHandler.prototype.getResources = function () {\n    return this.sender.getResources();\n  };\n\n  return GetResourceEventHandler;\n}();\n\nexport { GetResourceEventHandler };\n\nvar PdfGraphicsState =\n/** @class */\nfunction () {\n  function PdfGraphicsState(graphics, matrix) {\n    /**\n     * Stores `previous rendering mode`.\n     * @default TextRenderingMode.Fill\n     * @private\n     */\n    this.internalTextRenderingMode = TextRenderingMode.Fill;\n    /**\n     * `Previous character spacing` value or 0.\n     * @default 0.0\n     * @private\n     */\n\n    this.internalCharacterSpacing = 0.0;\n    /**\n     * `Previous word spacing` value or 0.\n     * @default 0.0\n     * @private\n     */\n\n    this.internalWordSpacing = 0.0;\n    /**\n     * The previously used `text scaling value`.\n     * @default 100.0\n     * @private\n     */\n\n    this.internalTextScaling = 100.0;\n    /**\n     * `Current color space`.\n     * @default PdfColorSpace.Rgb\n     * @private\n     */\n\n    this.pdfColorSpace = PdfColorSpace.Rgb;\n\n    if (typeof graphics !== 'undefined') {\n      this.pdfGraphics = graphics;\n      this.transformationMatrix = matrix;\n    }\n  }\n\n  Object.defineProperty(PdfGraphicsState.prototype, \"graphics\", {\n    // Properties\n\n    /**\n     * Gets the parent `graphics object`.\n     * @private\n     */\n    get: function get() {\n      return this.pdfGraphics;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphicsState.prototype, \"matrix\", {\n    /**\n     * Gets the `current matrix`.\n     * @private\n     */\n    get: function get() {\n      return this.transformationMatrix;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphicsState.prototype, \"characterSpacing\", {\n    /**\n     * Gets or sets the `current character spacing`.\n     * @private\n     */\n    get: function get() {\n      return this.internalCharacterSpacing;\n    },\n    set: function set(value) {\n      this.internalCharacterSpacing = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphicsState.prototype, \"wordSpacing\", {\n    /**\n     * Gets or sets the `word spacing` value.\n     * @private\n     */\n    get: function get() {\n      return this.internalWordSpacing;\n    },\n    set: function set(value) {\n      this.internalWordSpacing = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphicsState.prototype, \"textScaling\", {\n    /**\n     * Gets or sets the `text scaling` value.\n     * @private\n     */\n    get: function get() {\n      return this.internalTextScaling;\n    },\n    set: function set(value) {\n      this.internalTextScaling = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphicsState.prototype, \"pen\", {\n    /**\n     * Gets or sets the `current pen` object.\n     * @private\n     */\n    get: function get() {\n      return this.pdfPen;\n    },\n    set: function set(value) {\n      this.pdfPen = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphicsState.prototype, \"brush\", {\n    /**\n     * Gets or sets the `brush`.\n     * @private\n     */\n    get: function get() {\n      return this.pdfBrush;\n    },\n    set: function set(value) {\n      this.pdfBrush = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphicsState.prototype, \"font\", {\n    /**\n     * Gets or sets the `current font` object.\n     * @private\n     */\n    get: function get() {\n      return this.pdfFont;\n    },\n    set: function set(value) {\n      this.pdfFont = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphicsState.prototype, \"colorSpace\", {\n    /**\n     * Gets or sets the `current color space` value.\n     * @private\n     */\n    get: function get() {\n      return this.pdfColorSpace;\n    },\n    set: function set(value) {\n      this.pdfColorSpace = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphicsState.prototype, \"textRenderingMode\", {\n    /**\n     * Gets or sets the `text rendering mode`.\n     * @private\n     */\n    get: function get() {\n      return this.internalTextRenderingMode;\n    },\n    set: function set(value) {\n      this.internalTextRenderingMode = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return PdfGraphicsState;\n}();\n\nexport { PdfGraphicsState };\n\nvar TransparencyData =\n/** @class */\nfunction () {\n  // Constructors\n\n  /**\n   * Initializes a new instance of the `TransparencyData` class.\n   * @private\n   */\n  function TransparencyData(alphaPen, alphaBrush, blendMode) {\n    this.alphaPen = alphaPen;\n    this.alphaBrush = alphaBrush;\n    this.blendMode = blendMode;\n  }\n\n  return TransparencyData;\n}();","map":{"version":3,"names":["PdfColorSpace","TextRenderingMode","PdfFillMode","PdfTextAlignment","PdfVerticalAlignment","PdfBlendMode","PdfSubSuperScript","PdfStreamWriter","PdfPen","PdfBrush","PdfSolidBrush","PdfFont","PdfTransformationMatrix","PointF","SizeF","RectangleF","ProcedureSets","PdfString","PdfStringFormat","TemporaryDictionary","PdfTransparency","PdfStringLayouter","LineType","DictionaryProperties","StringTokenizer","PdfAutomaticFieldInfoCollection","PdfAutomaticFieldInfo","Operators","UnicodeTrueTypeFont","InternalEnum","RtlRenderer","PdfTextDirection","PathPointType","PdfGradientBrush","PdfTilingBrush","PdfGraphics","arg1","arg2","arg3","currentColorSpace","Rgb","previousTextRenderingMode","Fill","previousCharacterSpacing","previousWordSpacing","previousTextScaling","procedureSets","isNormalRender","isUseFontSize","isItalic","isEmfTextScaled","isEmf","isEmfPlus","isBaselineFormat","emfScalingFactor","colorSpaceChanged","dictionaryProperties","isOverloadWithPosition","isPointOverload","currentColorSpaces","isImageOptimized","graphicsState","istransparencySet","internalAutomaticFields","startCutIndex","getResources","canvasSize","pdfStreamWriter","initialize","Object","defineProperty","prototype","get","pdfStringLayoutResult","enumerable","configurable","internalMediaBoxUpperRightBound","set","value","clipBounds","width","height","transformationMatrix","pageLayer","page","bStateSaved","currentPen","currentBrush","currentFont","bCSInitialized","currentStringFormat","size","requireProcedureSet","pdf","drawPdfTemplate","template","location","Error","scaleX","scaleY","bNeedScale","state","save","matrix","getTranslateTransform","x","y","getScaleTransform","modifyCtm","resources","name_1","getName","executeObject","restore","g","graphics","index","automaticFields","length","fieldInfo","newLocation","scalingX","scalingY","add","field","dictionary","modify","imageB","imageC","imageI","text","drawString","arg4","arg5","arg6","arg7","arg8","arg9","clientSize","temparg3","temparg4","temparg5","temparg6","temparg7","temparg8","temparg9","layouter","result","layout","empty","rect","checkCorrectLayoutRectangle","actualSize","drawStringLayoutResult","drawLine","temparg2","stateControl","sw","streamWriter","beginPath","appendLineSegment","strokePath","drawRectangle","xOffset","offsetX","yOffset","layer","offsetY","colorSpace","color","isEmpty","temparg1","appendRectangle","drawPathHelper","Winding","isPen","isBrush","isEvenOdd","Alternate","fillStrokePath","endPath","fillPath","drawImage","physicalDimension","write","document","name_2","setResources","restoreState","newLine","resource","getLineBounds","lineIndex","font","layoutRectangle","format","bounds","lineCount","line","lines","vShift","getTextVerticalAlignShift","lineHeight","lineWidth","hShift","getHorizontalAlignShift","lineIndent","getLineIndent","rightToLeft","shouldJustify","textSize","layoutedRectangle","alignment","Center","Right","lineAlignment","Middle","Bottom","setLayer","beginSave","pageSave","i","performDraw","pen","brush","applyStringSettings","textScaling","horizontalScalingFactor","setTextScaling","lineSpacing","subScript","subSuperScript","SubScript","shift","metrics","getDescent","getAscent","startNextLine","setLeading","resultHeight","remainingString","j","drawLayoutResult","underlineStrikeoutText","getNextPage","section","currentPage","nextPage","indexOf","count","getPages","setClip","rectangle","mode","clipPath","setLineWidth","tm","getTextRenderingMode","beginText","setTextRenderingMode","cs","characterSpacing","setCharacterSpacing","ws","wordSpacing","setWordSpacing","textHeight","boundsHeight","Top","vAlignShift","ttfFont","unicode","isUnicode","embed","isEmbedFont","len","lineInfo","hAlignShift","drawUnicodeLine","drawAsciiLine","endText","justifyLine","showNextLineText","rtl","useWordSpace","Justify","rtlRender","textDirection","None","blocks","rightAlign","RightToLeft","words","splitLayout","drawUnicodeBlocks","breakUnicodeLine","tokens","token","convertToUnicode","getUnicodeString","xShift","firstLineIndent","paragraphIndent","spaceWidth","getCharWidth","whiteSpace","wordSpace","word","tokenWidth","measureString","val","showText","split","converted","encode","ForceEncoding","Ascii","fontInternal","ttfReader","setSymbols","convertString","bytes","toUnicodeArray","byteToString","boundsWidth","hasWordSpacing","symbols","spaces","whitespacesCount","getCharsCount","difference","reset","clear","initializeCoordinates","justifyStyle","goodWidth","hasSpaces","goodLineBreakStyle","lineType","LayoutBreak","underline","strikeout","linePen","createUnderlineStikeoutPen","underlineYOffset","strikeoutYOffset","getHeight","x1","x2","getSize","FillStroke","Stroke","ClipFlag","layoutBounds","firstLine","firstParagraphLine","FirstParagraphLine","Math","min","Left","saveState","solidBrush","lastDocumentCS","lastGraphicsCS","initCurrentColorSpace","pdfPen","penControl","brushControl","fontControl","colorspace","re","GrayScale","setColorSpace","monitorChanges","clone","b","lgb","m","multiply","br","curSubSuper","prevSubSuper","fontName","setFont","setTransparency","Normal","trasparencies","transp","td","TransparencyData","containsKey","getValue","setValue","name_3","setGraphicsState","clipTranslateMargins","left","top","right","bottom","writeComment","closePath","translateTransform","clipArea","updateY","input","translate","scaleTransform","scale","rotateTransform","angle","getRotateTransform","mediaBoxUpperRightBound","cropBox","rotate","PdfGraphicsState","textRenderingMode","push","saveGraphicsState","doRestoreState","popState","pop","restoreGraphicsState","drawPath","path","buildUpPath","pathPoints","pathTypes","fillMode","drawArc","constructArcPath","cnt","typeValue","point","pathTypesValuesMask","Start","Bezier3","p2","p3","result1","getBezierPoints","appendBezierSegment","Line","checkFlags","points","types","errorMsg","type","CloseSubpath","y1","y2","startAng","sweepAngle","getBezierArc","pt","numX1","numY1","numX2","numY2","s1","e1","tmp","fragAngle1","numFragments","abs","ceil","xcen","ycen","rx","ry","halfAng","PI","kappa","cos","sin","pointsList","thetaValue0","thetaValue1","cos0","cos1","sin0","sin1","transparencyObject","GetResourceEventHandler","sender","internalTextRenderingMode","internalCharacterSpacing","internalWordSpacing","internalTextScaling","pdfColorSpace","pdfGraphics","pdfBrush","pdfFont","alphaPen","alphaBrush","blendMode"],"sources":["D:/Theme/package/node_modules/@syncfusion/ej2-pdf-export/src/implementation/graphics/pdf-graphics.js"],"sourcesContent":["/**\n * PdfGraphics.ts class for EJ2-PDF\n */\nimport { PdfColorSpace, TextRenderingMode, PdfFillMode, PdfTextAlignment } from './enum';\nimport { PdfVerticalAlignment, PdfBlendMode } from './enum';\nimport { PdfSubSuperScript } from './fonts/enum';\nimport { PdfStreamWriter } from './../input-output/pdf-stream-writer';\nimport { PdfPen } from './pdf-pen';\nimport { PdfBrush } from './brushes/pdf-brush';\nimport { PdfSolidBrush } from './brushes/pdf-solid-brush';\nimport { PdfFont } from './fonts/pdf-font';\nimport { PdfTransformationMatrix } from './pdf-transformation-matrix';\nimport { PointF, SizeF, RectangleF } from './../drawing/pdf-drawing';\nimport { ProcedureSets } from './constants';\nimport { PdfString } from './../primitives/pdf-string';\nimport { PdfStringFormat } from './fonts/pdf-string-format';\nimport { TemporaryDictionary } from './../collections/object-object-pair/dictionary';\nimport { PdfTransparency } from './pdf-transparency';\nimport { PdfStringLayouter, LineType } from './fonts/string-layouter';\nimport { DictionaryProperties } from './../input-output/pdf-dictionary-properties';\nimport { StringTokenizer } from './fonts/string-tokenizer';\nimport { PdfAutomaticFieldInfoCollection } from './../document/automatic-fields/automatic-field-info-collection';\nimport { PdfAutomaticFieldInfo } from './../document/automatic-fields/automatic-field-info';\nimport { Operators } from './../input-output/pdf-operators';\nimport { UnicodeTrueTypeFont } from './fonts/unicode-true-type-font';\nimport { InternalEnum } from './../primitives/pdf-string';\nimport { RtlRenderer } from './fonts/rtl-renderer';\nimport { PdfTextDirection } from './enum';\nimport { PathPointType } from './figures/enum';\nimport { PdfGradientBrush } from './../../implementation/graphics/brushes/pdf-gradient-brush';\nimport { PdfTilingBrush } from './brushes/pdf-tiling-brush';\n/**\n * `PdfGraphics` class represents a graphics context of the objects.\n * It's used for performing all the graphics operations.\n * ```typescript\n * // create a new PDF document\n * let document : PdfDocument = new PdfDocument();\n * // add a new page to the document\n * let page1 : PdfPage = document.pages.add();\n * // set the font\n * let font : PdfStandardFont = new PdfStandardFont(PdfFontFamily.Helvetica, 20);\n * // create black brush\n * let blackBrush : PdfSolidBrush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n * //\n * //graphics of the page\n * let page1Graphics : PdfGraphics = page1.graphics;\n * // draw the text on the page1 graphics\n * page1Graphics.drawString('Hello World', font, blackBrush, new PointF(0, 0));\n * //\n * // save the document\n * document.save('output.pdf');\n * // destroy the document\n * document.destroy();\n * ```\n */\nvar PdfGraphics = /** @class */ (function () {\n    function PdfGraphics(arg1, arg2, arg3) {\n        /**\n         * Represents the `Current color space`.\n         * @private\n         */\n        this.currentColorSpace = PdfColorSpace.Rgb;\n        /**\n         * Stores `previous rendering mode`.\n         * @private\n         */\n        this.previousTextRenderingMode = TextRenderingMode.Fill;\n        /**\n         * Previous `character spacing` value or 0.\n         * @private\n         */\n        this.previousCharacterSpacing = 0.0;\n        /**\n         * Previous `word spacing` value or 0.\n         * @private\n         */\n        this.previousWordSpacing = 0.0;\n        /**\n         * The `previously used text scaling` value.\n         * @private\n         */\n        this.previousTextScaling = 100.0;\n        /**\n         * Instance of `ProcedureSets` class.\n         * @private\n         */\n        this.procedureSets = new ProcedureSets();\n        /**\n         * To check wihether it is a `direct text rendering`.\n         * @default true\n         * @private\n         */\n        this.isNormalRender = true;\n        /**\n         * check whether to `use font size` to calculate the shift.\n         * @default false\n         * @private\n         */\n        this.isUseFontSize = false;\n        /**\n         * check whether the font is in `italic type`.\n         * @default false\n         * @private\n         */\n        this.isItalic = false;\n        /**\n         * Check whether it is an `emf Text Matrix`.\n         * @default false\n         * @private\n         */\n        this.isEmfTextScaled = false;\n        /**\n         * Check whether it is an `emf` call.\n         * @default false\n         * @private\n         */\n        this.isEmf = false;\n        /**\n         * Check whether it is an `emf plus` call.\n         * @default false\n         * @private\n         */\n        this.isEmfPlus = false;\n        /**\n         * Check whether it is in `base line format`.\n         * @default true\n         * @private\n         */\n        this.isBaselineFormat = true;\n        /**\n         * Emf Text `Scaling Factor`.\n         * @private\n         */\n        this.emfScalingFactor = new SizeF(0, 0);\n        /**\n         * To check whether the `last color space` of document and garphics is saved.\n         * @private\n         */\n        this.colorSpaceChanged = false;\n        /**\n         * Stores an instance of `DictionaryProperties`.\n         * @private\n         */\n        this.dictionaryProperties = new DictionaryProperties();\n        /**\n         * Checks whether the x co-ordinate is need to set as client size or not.\n         * @hidden\n         * @private\n         */\n        this.isOverloadWithPosition = false;\n        /**\n         * Checks whether the x co-ordinate is need to set as client size or not.\n         * @hidden\n         * @private\n         */\n        this.isPointOverload = false;\n        /**\n         * Current colorspaces.\n         * @hidden\n         * @private\n         */\n        this.currentColorSpaces = ['RGB', 'CMYK', 'GrayScale', 'Indexed'];\n        /**\n         * Checks the current image `is optimized` or not.\n         * @default false.\n         * @private\n         */\n        this.isImageOptimized = false;\n        /**\n         * Stores the `graphics states`.\n         * @private\n         */\n        this.graphicsState = [];\n        /**\n         * Indicates whether the object `had trasparency`.\n         * @default false\n         * @private\n         */\n        this.istransparencySet = false;\n        /**\n         * Stores the instance of `PdfAutomaticFieldInfoCollection` class .\n         * @default null\n         * @private\n         */\n        this.internalAutomaticFields = null;\n        /**\n         * Stores the index of the start line that should draw with in the next page.\n         * @private\n         */\n        this.startCutIndex = -1;\n        this.getResources = arg2;\n        this.canvasSize = arg1;\n        if (arg3 instanceof PdfStreamWriter) {\n            this.pdfStreamWriter = arg3;\n        }\n        else {\n            this.pdfStreamWriter = new PdfStreamWriter(arg3);\n        }\n        this.initialize();\n    }\n    Object.defineProperty(PdfGraphics.prototype, \"stringLayoutResult\", {\n        //  Properties\n        /**\n         * Returns the `result` after drawing string.\n         * @private\n         */\n        get: function () {\n            return this.pdfStringLayoutResult;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphics.prototype, \"size\", {\n        /**\n         * Gets the `size` of the canvas.\n         * @private\n         */\n        get: function () {\n            return this.canvasSize;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphics.prototype, \"mediaBoxUpperRightBound\", {\n        /**\n         * Gets and Sets the value of `MediaBox upper right bound`.\n         * @private\n         */\n        get: function () {\n            if (typeof this.internalMediaBoxUpperRightBound === 'undefined') {\n                this.internalMediaBoxUpperRightBound = 0;\n            }\n            return this.internalMediaBoxUpperRightBound;\n        },\n        set: function (value) {\n            this.internalMediaBoxUpperRightBound = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphics.prototype, \"clientSize\", {\n        /**\n         * Gets the `size` of the canvas reduced by margins and page templates.\n         * @private\n         */\n        get: function () {\n            return new SizeF(this.clipBounds.width, this.clipBounds.height);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphics.prototype, \"colorSpace\", {\n        /**\n         * Gets or sets the current `color space` of the document\n         * @private\n         */\n        get: function () {\n            return this.currentColorSpace;\n        },\n        set: function (value) {\n            this.currentColorSpace = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphics.prototype, \"streamWriter\", {\n        /**\n         * Gets the `stream writer`.\n         * @private\n         */\n        get: function () {\n            return this.pdfStreamWriter;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphics.prototype, \"matrix\", {\n        /**\n         * Gets the `transformation matrix` reflecting current transformation.\n         * @private\n         */\n        get: function () {\n            if (this.transformationMatrix == null) {\n                this.transformationMatrix = new PdfTransformationMatrix();\n            }\n            return this.transformationMatrix;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphics.prototype, \"layer\", {\n        /**\n         * Gets the `layer` for the graphics, if exists.\n         * @private\n         */\n        get: function () {\n            return this.pageLayer;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphics.prototype, \"page\", {\n        /**\n         * Gets the `page` for this graphics, if exists.\n         * @private\n         */\n        get: function () {\n            return this.pageLayer.page;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphics.prototype, \"automaticFields\", {\n        get: function () {\n            if (this.internalAutomaticFields == null || typeof this.internalAutomaticFields === 'undefined') {\n                this.internalAutomaticFields = new PdfAutomaticFieldInfoCollection();\n            }\n            return this.internalAutomaticFields;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    //Implementation\n    /**\n     * `Initializes` this instance.\n     * @private\n     */\n    PdfGraphics.prototype.initialize = function () {\n        this.bStateSaved = false;\n        this.currentPen = null;\n        this.currentBrush = null;\n        this.currentFont = null;\n        this.currentColorSpace = PdfColorSpace.Rgb;\n        this.bCSInitialized = false;\n        this.transformationMatrix = null;\n        this.previousTextRenderingMode = (-1); //.Fill;\n        this.previousCharacterSpacing = -1.0;\n        this.previousWordSpacing = -1.0;\n        this.previousTextScaling = -100.0;\n        // this.m_trasparencies = null;\n        this.currentStringFormat = null;\n        this.clipBounds = new RectangleF(new PointF(0, 0), this.size);\n        this.getResources.getResources().requireProcedureSet(this.procedureSets.pdf);\n    };\n    PdfGraphics.prototype.drawPdfTemplate = function (template, location, size) {\n        if (typeof size === 'undefined') {\n            if (template == null) {\n                throw Error('ArgumentNullException-template');\n            }\n            this.drawPdfTemplate(template, location, template.size);\n        }\n        else {\n            // let crossTable : PdfCrossTable = null;\n            // if (this.pageLayer != null) {\n            //     crossTable = (this.page as PdfPage).section.parentDocument.crossTable;\n            // }\n            if (template == null) {\n                throw Error('ArgumentNullException-template');\n            }\n            var scaleX = (template.width > 0) ? size.width / template.width : 1;\n            var scaleY = (template.height > 0) ? size.height / template.height : 1;\n            var bNeedScale = !(scaleX === 1 && scaleY === 1);\n            // Save state.\n            var state = this.save();\n            // Take into consideration that rect location is bottom/left.\n            var matrix = new PdfTransformationMatrix();\n            if (this.pageLayer != null) {\n                this.getTranslateTransform(location.x, location.y + size.height, matrix);\n            }\n            if (bNeedScale) {\n                this.getScaleTransform(scaleX, scaleY, matrix);\n            }\n            this.pdfStreamWriter.modifyCtm(matrix);\n            // Output template.\n            var resources = this.getResources.getResources();\n            var name_1 = resources.getName(template);\n            this.pdfStreamWriter.executeObject(name_1);\n            // Restore state.\n            this.restore(state);\n            //Transfer automatic fields from template.\n            var g = template.graphics;\n            if (g != null) {\n                for (var index = 0; index < g.automaticFields.automaticFields.length; index++) {\n                    var fieldInfo = g.automaticFields.automaticFields[index];\n                    var newLocation = new PointF(fieldInfo.location.x + location.x, fieldInfo.location.y + location.y);\n                    var scalingX = template.size.width == 0 ? 0 : size.width / template.size.width;\n                    var scalingY = template.size.height == 0 ? 0 : size.height / template.size.height;\n                    this.automaticFields.add(new PdfAutomaticFieldInfo(fieldInfo.field, newLocation, scalingX, scalingY));\n                    this.page.dictionary.modify();\n                }\n            }\n            this.getResources.getResources().requireProcedureSet(this.procedureSets.imageB);\n            this.getResources.getResources().requireProcedureSet(this.procedureSets.imageC);\n            this.getResources.getResources().requireProcedureSet(this.procedureSets.imageI);\n            this.getResources.getResources().requireProcedureSet(this.procedureSets.text);\n        }\n    };\n    /* tslint:disable */\n    /**\n     * @public\n     */\n    PdfGraphics.prototype.drawString = function (arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9) {\n        if (typeof arg1 === 'string' && arg2 instanceof PdfFont && (arg3 instanceof PdfPen || arg3 === null) && (arg4 instanceof PdfBrush || arg4 === null) && typeof arg5 === 'number' && typeof arg6 === 'number' && (arg7 instanceof PdfStringFormat || arg7 === null) && typeof arg8 === 'undefined') {\n            this.isOverloadWithPosition = true;\n            this.drawString(arg1, arg2, arg3, arg4, arg5, arg6, (this.clientSize.width - arg5), 0, arg7);\n        }\n        else {\n            var temparg3 = arg3;\n            var temparg4 = arg4;\n            var temparg5 = arg5;\n            var temparg6 = arg6;\n            var temparg7 = arg7;\n            var temparg8 = arg8;\n            var temparg9 = arg9;\n            var layouter = new PdfStringLayouter();\n            var result = layouter.layout(arg1, arg2, temparg9, new SizeF(temparg7, temparg8), this.isOverloadWithPosition, this.clientSize);\n            if (!result.empty) {\n                var rect = this.checkCorrectLayoutRectangle(result.actualSize, temparg5, temparg6, temparg9);\n                if (temparg7 <= 0) {\n                    temparg5 = rect.x;\n                    temparg7 = rect.width;\n                }\n                if (temparg8 <= 0) {\n                    temparg6 = rect.y;\n                    temparg8 = rect.height;\n                }\n                this.drawStringLayoutResult(result, arg2, temparg3, temparg4, new RectangleF(temparg5, temparg6, temparg7, temparg8), temparg9);\n                this.isEmfTextScaled = false;\n                this.emfScalingFactor = new SizeF(0, 0);\n            }\n            this.getResources.getResources().requireProcedureSet(this.procedureSets.text);\n            this.isNormalRender = true;\n            this.pdfStringLayoutResult = result;\n            this.isUseFontSize = false;\n        }\n    }; /* tslint:enable */\n    PdfGraphics.prototype.drawLine = function (arg1, arg2, arg3, arg4, arg5) {\n        if (arg2 instanceof PointF) {\n            var temparg2 = arg2;\n            var temparg3 = arg3;\n            this.drawLine(arg1, temparg2.x, temparg2.y, temparg3.x, temparg3.y);\n        }\n        else {\n            var temparg2 = arg2;\n            var temparg3 = arg3;\n            var temparg4 = arg4;\n            var temparg5 = arg5;\n            this.stateControl(arg1, null, null);\n            var sw = this.streamWriter;\n            sw.beginPath(temparg2, temparg3);\n            sw.appendLineSegment(temparg4, temparg5);\n            sw.strokePath();\n            this.getResources.getResources().requireProcedureSet(this.procedureSets.pdf);\n        }\n    };\n    /* tslint:disable */\n    PdfGraphics.prototype.drawRectangle = function (arg1, arg2, arg3, arg4, arg5, arg6) {\n        if (arg1 instanceof PdfPen && typeof arg2 === 'number') {\n            var temparg3 = arg3;\n            this.drawRectangle(arg1, null, arg2, temparg3, arg4, arg5);\n        }\n        else if (arg1 instanceof PdfBrush && typeof arg2 === 'number') {\n            var temparg3 = arg3;\n            this.drawRectangle(null, arg1, arg2, temparg3, arg4, arg5);\n        }\n        else {\n            var temparg3 = arg3;\n            var temparg4 = arg4;\n            var temparg5 = arg5;\n            var temparg6 = arg6;\n            if ((arg2 instanceof PdfTilingBrush)) {\n                this.bCSInitialized = false;\n                var xOffset = (this.matrix.matrix.offsetX + temparg3);\n                var yOffset = void 0;\n                if (((this.layer != null) && (this.layer.page != null))) {\n                    yOffset = ((this.layer.page.size.height - this.matrix.matrix.offsetY) + temparg4);\n                }\n                else {\n                    yOffset = ((this.clientSize.height - this.matrix.matrix.offsetY) + temparg4);\n                }\n                (arg2).location = new PointF(xOffset, yOffset);\n                (arg2).graphics.colorSpace = this.colorSpace;\n            }\n            else if ((arg2 instanceof PdfGradientBrush)) {\n                arg2.colorSpace = this.colorSpace;\n            }\n            if (arg2 instanceof PdfSolidBrush && arg2.color.isEmpty) {\n                arg2 = null;\n            }\n            var temparg1 = arg1;\n            var temparg2 = arg2;\n            this.stateControl(temparg1, temparg2, null);\n            this.streamWriter.appendRectangle(temparg3, temparg4, temparg5, temparg6);\n            this.drawPathHelper(temparg1, temparg2, false);\n        }\n    };\n    PdfGraphics.prototype.drawPathHelper = function (arg1, arg2, arg3, arg4) {\n        if (typeof arg3 === 'boolean') {\n            var temparg3 = arg3;\n            this.drawPathHelper(arg1, arg2, PdfFillMode.Winding, temparg3);\n        }\n        else {\n            var temparg3 = arg3;\n            var temparg4 = arg4;\n            var isPen = arg1 != null;\n            var isBrush = arg2 != null;\n            var isEvenOdd = (temparg3 === PdfFillMode.Alternate);\n            if (isPen && isBrush) {\n                this.streamWriter.fillStrokePath(isEvenOdd);\n            }\n            else if (!isPen && !isBrush) {\n                this.streamWriter.endPath();\n            }\n            else if (isPen) {\n                this.streamWriter.strokePath();\n            }\n            else {\n                this.streamWriter.fillPath(isEvenOdd);\n            }\n        }\n    };\n    /* tslint:disable */\n    PdfGraphics.prototype.drawImage = function (arg1, arg2, arg3, arg4, arg5) {\n        if (typeof arg2 === 'number' && typeof arg3 === 'number' && typeof arg4 === 'undefined') {\n            var size = arg1.physicalDimension;\n            this.drawImage(arg1, arg2, arg3, size.width, size.height);\n        }\n        else {\n            var temparg2 = arg2;\n            var temparg3 = arg3;\n            var temparg4 = arg4;\n            var temparg5 = arg5;\n            arg1.save();\n            var matrix = new PdfTransformationMatrix();\n            this.getTranslateTransform(temparg2, (temparg3 + temparg5), matrix);\n            this.getScaleTransform(arg4, arg5, matrix);\n            this.pdfStreamWriter.write('q');\n            this.pdfStreamWriter.modifyCtm(matrix);\n            // Output template.\n            var resources = this.getResources.getResources();\n            if (typeof this.pageLayer !== 'undefined' && this.page != null) {\n                resources.document = this.page.document;\n            }\n            var name_2 = resources.getName(arg1);\n            if (typeof this.pageLayer !== 'undefined') {\n                this.page.setResources(resources);\n            }\n            this.pdfStreamWriter.executeObject(name_2);\n            this.pdfStreamWriter.write(Operators.restoreState);\n            this.pdfStreamWriter.write(Operators.newLine);\n            var resource = this.getResources.getResources();\n            resource.requireProcedureSet(this.procedureSets.imageB);\n            resource.requireProcedureSet(this.procedureSets.imageC);\n            resource.requireProcedureSet(this.procedureSets.imageI);\n            resource.requireProcedureSet(this.procedureSets.text);\n        }\n    };\n    //Implementation\n    /* tslint:disable */\n    /**\n     * Returns `bounds` of the line info.\n     * @private\n     */\n    PdfGraphics.prototype.getLineBounds = function (lineIndex, result, font, layoutRectangle, format) {\n        var bounds;\n        if (!result.empty && lineIndex < result.lineCount && lineIndex >= 0) {\n            var line = result.lines[lineIndex];\n            var vShift = this.getTextVerticalAlignShift(result.actualSize.height, layoutRectangle.height, format);\n            var y = vShift + layoutRectangle.y + (result.lineHeight * lineIndex);\n            var lineWidth = line.width;\n            var hShift = this.getHorizontalAlignShift(lineWidth, layoutRectangle.width, format);\n            var lineIndent = this.getLineIndent(line, format, layoutRectangle, (lineIndex === 0));\n            hShift += (!this.rightToLeft(format)) ? lineIndent : 0;\n            var x = layoutRectangle.x + hShift;\n            /* tslint:disable */\n            var width = (!this.shouldJustify(line, layoutRectangle.width, format)) ? lineWidth - lineIndent : layoutRectangle.width - lineIndent; /* tslint:enable */\n            var height = result.lineHeight;\n            bounds = new RectangleF(x, y, width, height);\n        }\n        else {\n            bounds = new RectangleF(0, 0, 0, 0);\n        }\n        return bounds;\n    };\n    /**\n     * Creates `lay outed rectangle` depending on the text settings.\n     * @private\n     */\n    PdfGraphics.prototype.checkCorrectLayoutRectangle = function (textSize, x, y, format) {\n        var layoutedRectangle = new RectangleF(x, y, textSize.width, textSize.width);\n        if (format != null) {\n            switch (format.alignment) {\n                case PdfTextAlignment.Center:\n                    layoutedRectangle.x -= layoutedRectangle.width / 2;\n                    break;\n                case PdfTextAlignment.Right:\n                    layoutedRectangle.x -= layoutedRectangle.width;\n                    break;\n            }\n            switch (format.lineAlignment) {\n                case PdfVerticalAlignment.Middle:\n                    layoutedRectangle.y -= layoutedRectangle.height / 2;\n                    break;\n                case PdfVerticalAlignment.Bottom:\n                    layoutedRectangle.y -= layoutedRectangle.height;\n                    break;\n            }\n        }\n        return layoutedRectangle;\n    };\n    /**\n     * Sets the `layer` for the graphics.\n     * @private\n     */\n    PdfGraphics.prototype.setLayer = function (layer) {\n        this.pageLayer = layer;\n        var page = layer.page;\n        if (page != null && typeof page !== 'undefined') {\n            page.beginSave = this.pageSave;\n        }\n    };\n    /**\n     * Adding page number field before page saving.\n     * @private\n     */\n    /* tslint:disable */\n    PdfGraphics.prototype.pageSave = function (page) {\n        if (page.graphics.automaticFields != null) {\n            for (var i = 0; i < page.graphics.automaticFields.automaticFields.length; i++) {\n                var fieldInfo = page.graphics.automaticFields.automaticFields[i];\n                fieldInfo.field.performDraw(page.graphics, fieldInfo.location, fieldInfo.scalingX, fieldInfo.scalingY);\n            }\n        }\n    };\n    /**\n     * `Draws a layout result`.\n     * @private\n     */\n    PdfGraphics.prototype.drawStringLayoutResult = function (result, font, pen, brush, layoutRectangle, format) {\n        if (!result.empty) {\n            this.applyStringSettings(font, pen, brush, format, layoutRectangle);\n            // Set text scaling\n            var textScaling = (format != null) ? format.horizontalScalingFactor : 100.0;\n            if (textScaling !== this.previousTextScaling && !this.isEmfTextScaled) {\n                this.pdfStreamWriter.setTextScaling(textScaling);\n                this.previousTextScaling = textScaling;\n            }\n            var height = (format == null || format.lineSpacing === 0) ? font.height : format.lineSpacing + font.height;\n            var subScript = (format != null && format.subSuperScript === PdfSubSuperScript.SubScript);\n            var shift = 0;\n            shift = (subScript) ? height - (font.height + font.metrics.getDescent(format)) : (height - font.metrics.getAscent(format));\n            this.shift = shift;\n            this.pdfStreamWriter.startNextLine(layoutRectangle.x, layoutRectangle.y - shift);\n            this.pdfStreamWriter.setLeading(+height);\n            var resultHeight = 0;\n            var remainingString = '';\n            for (var i = 0; i < result.lines.length; i++) {\n                resultHeight += result.lineHeight;\n                if ((layoutRectangle.y + resultHeight) > this.clientSize.height) {\n                    this.startCutIndex = i;\n                    break;\n                }\n            }\n            for (var j = this.startCutIndex; (j < result.lines.length && j >= 0); j++) {\n                remainingString += result.lines[j].text;\n            }\n            var bounds = new RectangleF(layoutRectangle.x, layoutRectangle.y, layoutRectangle.width, layoutRectangle.height);\n            this.drawLayoutResult(result, font, format, layoutRectangle);\n            this.underlineStrikeoutText(pen, brush, result, font, bounds, format);\n            this.isEmfPlus = false;\n            this.isUseFontSize = false;\n            if (this.startCutIndex !== -1) {\n                var page = this.getNextPage();\n                page.graphics.drawString(remainingString, font, pen, brush, layoutRectangle.x, 0, layoutRectangle.width, 0, format);\n            }\n        }\n        else {\n            throw new Error('ArgumentNullException:result');\n        }\n    };\n    /**\n     * Gets the `next page`.\n     * @private\n     */\n    PdfGraphics.prototype.getNextPage = function () {\n        var section = this.currentPage.section;\n        var nextPage = null;\n        var index = section.indexOf(this.currentPage);\n        if (index === section.count - 1) {\n            nextPage = section.add();\n        }\n        else {\n            nextPage = section.getPages()[index + 1];\n        }\n        return nextPage;\n    };\n    PdfGraphics.prototype.setClip = function (rectangle, mode) {\n        if (typeof mode === 'undefined') {\n            this.setClip(rectangle, PdfFillMode.Winding);\n        }\n        else {\n            this.pdfStreamWriter.appendRectangle(rectangle);\n            this.pdfStreamWriter.clipPath((mode === PdfFillMode.Alternate));\n        }\n    };\n    /**\n     * Applies all the `text settings`.\n     * @private\n     */\n    PdfGraphics.prototype.applyStringSettings = function (font, pen, brush, format, bounds) {\n        if (brush instanceof PdfTilingBrush) {\n            this.bCSInitialized = false;\n            brush.graphics.colorSpace = this.colorSpace;\n        }\n        else if ((brush instanceof PdfGradientBrush)) {\n            this.bCSInitialized = false;\n            brush.colorSpace = this.colorSpace;\n        }\n        var setLineWidth = false;\n        var tm = this.getTextRenderingMode(pen, brush, format);\n        this.stateControl(pen, brush, font, format);\n        this.pdfStreamWriter.beginText();\n        if ((tm) !== this.previousTextRenderingMode) {\n            this.pdfStreamWriter.setTextRenderingMode(tm);\n            this.previousTextRenderingMode = tm;\n        }\n        // Set character spacing.\n        var cs = (format != null) ? format.characterSpacing : 0;\n        if (cs !== this.previousCharacterSpacing && !this.isEmfTextScaled) {\n            this.pdfStreamWriter.setCharacterSpacing(cs);\n            this.previousCharacterSpacing = cs;\n        }\n        // Set word spacing.\n        // NOTE: it works only if the space code is equal to 32 (0x20).\n        var ws = (format != null) ? format.wordSpacing : 0;\n        if (ws !== this.previousWordSpacing) {\n            this.pdfStreamWriter.setWordSpacing(ws);\n            this.previousWordSpacing = ws;\n        }\n    };\n    /**\n     * Calculates `shift value` if the text is vertically aligned.\n     * @private\n     */\n    PdfGraphics.prototype.getTextVerticalAlignShift = function (textHeight, boundsHeight, format) {\n        var shift = 0;\n        if (boundsHeight >= 0 && format != null && format.lineAlignment !== PdfVerticalAlignment.Top) {\n            switch (format.lineAlignment) {\n                case PdfVerticalAlignment.Middle:\n                    shift = (boundsHeight - textHeight) / 2;\n                    break;\n                case PdfVerticalAlignment.Bottom:\n                    shift = boundsHeight - textHeight;\n                    break;\n            }\n        }\n        return shift;\n    };\n    /* tslint:disable */\n    /**\n     * `Draws layout result`.\n     * @private\n     */\n    PdfGraphics.prototype.drawLayoutResult = function (result, font, format, layoutRectangle) {\n        var vAlignShift = this.getTextVerticalAlignShift(result.actualSize.height, layoutRectangle.height, format);\n        if (vAlignShift !== 0) {\n            this.pdfStreamWriter.startNextLine(0, vAlignShift);\n        }\n        var ttfFont = font;\n        var unicode = (ttfFont != null && ttfFont.isUnicode);\n        var embed = (ttfFont != null && ttfFont.isEmbedFont);\n        var lines = result.lines;\n        for (var i = 0, len = lines.length; (i < len && i !== this.startCutIndex); i++) {\n            var lineInfo = lines[i];\n            var line = lineInfo.text;\n            var lineWidth = lineInfo.width;\n            var hAlignShift = this.getHorizontalAlignShift(lineWidth, layoutRectangle.width, format);\n            var lineIndent = this.getLineIndent(lineInfo, format, layoutRectangle, (i === 0));\n            hAlignShift += (!this.rightToLeft(format)) ? lineIndent : 0;\n            if (hAlignShift !== 0 && !this.isEmfTextScaled) {\n                this.pdfStreamWriter.startNextLine(hAlignShift, 0);\n            }\n            if (unicode) {\n                this.drawUnicodeLine(lineInfo, layoutRectangle, font, format);\n            }\n            else {\n                this.drawAsciiLine(lineInfo, layoutRectangle, font, format);\n            }\n            if (hAlignShift !== 0 && !this.isEmfTextScaled) {\n                this.pdfStreamWriter.startNextLine(-hAlignShift, 0);\n            }\n            if (this.isOverloadWithPosition && lines.length > 1) {\n                this.pdfStreamWriter.startNextLine(-(layoutRectangle.x), 0);\n                layoutRectangle.x = 0;\n                layoutRectangle.width = this.clientSize.width;\n                this.isOverloadWithPosition = false;\n                this.isPointOverload = true;\n            }\n        }\n        this.getResources.getResources().requireProcedureSet(this.procedureSets.text);\n        if (vAlignShift !== 0) {\n            this.pdfStreamWriter.startNextLine(0, -(vAlignShift - result.lineHeight));\n        }\n        this.pdfStreamWriter.endText();\n    };\n    /**\n     * `Draws Ascii line`.\n     * @private\n     */\n    PdfGraphics.prototype.drawAsciiLine = function (lineInfo, layoutRectangle, font, format) {\n        this.justifyLine(lineInfo, layoutRectangle.width, format);\n        var value = '';\n        if (lineInfo.text.indexOf('(') !== -1 || lineInfo.text.indexOf(')') !== -1) {\n            for (var i = 0; i < lineInfo.text.length; i++) {\n                if (lineInfo.text[i] === '(') {\n                    value += '\\\\\\(';\n                }\n                else if (lineInfo.text[i] === ')') {\n                    value += '\\\\\\)';\n                }\n                else {\n                    value += lineInfo.text[i];\n                }\n            }\n        }\n        if (value === '') {\n            value = lineInfo.text;\n        }\n        var line = '(' + value + ')';\n        this.pdfStreamWriter.showNextLineText(new PdfString(line));\n    };\n    /**\n     * Draws unicode line.\n     * @private\n     */\n    PdfGraphics.prototype.drawUnicodeLine = function (lineInfo, layoutRectangle, font, format) {\n        var line = lineInfo.text;\n        var lineWidth = lineInfo.width;\n        var rtl = (format !== null && typeof format !== 'undefined' && format.rightToLeft);\n        /* tslint:disable-next-line:max-line-length */\n        var useWordSpace = (format !== null && typeof format !== 'undefined' && (format.wordSpacing !== 0 || format.alignment === PdfTextAlignment.Justify));\n        var ttfFont = font;\n        var wordSpacing = this.justifyLine(lineInfo, layoutRectangle.width, format);\n        var rtlRender = new RtlRenderer();\n        if (rtl || (format !== null && typeof format !== 'undefined' && format.textDirection !== PdfTextDirection.None)) {\n            var blocks = null;\n            /* tslint:disable-next-line:max-line-length */\n            var rightAlign = (format !== null && typeof format !== 'undefined' && format.alignment === PdfTextAlignment.Right);\n            if (format !== null && typeof format !== 'undefined' && format.textDirection !== PdfTextDirection.None) {\n                /* tslint:disable-next-line:max-line-length */\n                blocks = rtlRender.layout(line, ttfFont, (format.textDirection === PdfTextDirection.RightToLeft) ? true : false, useWordSpace, format);\n            }\n            else {\n                blocks = rtlRender.layout(line, ttfFont, rightAlign, useWordSpace, format);\n            }\n            var words = null;\n            if (blocks.length > 1) {\n                if (format !== null && typeof format !== 'undefined' && format.textDirection !== PdfTextDirection.None) {\n                    /* tslint:disable-next-line:max-line-length */\n                    words = rtlRender.splitLayout(line, ttfFont, (format.textDirection === PdfTextDirection.RightToLeft) ? true : false, useWordSpace, format);\n                }\n                else {\n                    words = rtlRender.splitLayout(line, ttfFont, rightAlign, useWordSpace, format);\n                }\n            }\n            else {\n                words = [line];\n            }\n            this.drawUnicodeBlocks(blocks, words, ttfFont, format, wordSpacing);\n        }\n        else {\n            if (useWordSpace) {\n                var result = this.breakUnicodeLine(line, ttfFont, null);\n                var blocks = result.tokens;\n                var words = result.words;\n                this.drawUnicodeBlocks(blocks, words, ttfFont, format, wordSpacing);\n            }\n            else {\n                var token = this.convertToUnicode(line, ttfFont);\n                var value = this.getUnicodeString(token);\n                this.streamWriter.showNextLineText(value);\n            }\n        }\n    };\n    /**\n     * Draws array of unicode tokens.\n     */\n    /* tslint:disable */\n    PdfGraphics.prototype.drawUnicodeBlocks = function (blocks, words, font, format, wordSpacing) {\n        /* tslint:enable */\n        if (blocks == null) {\n            throw new Error('Argument Null Exception : blocks');\n        }\n        if (words == null) {\n            throw new Error('Argument Null Exception : words');\n        }\n        if (font == null) {\n            throw new Error('Argument Null Exception : font');\n        }\n        this.streamWriter.startNextLine();\n        var x = 0;\n        var xShift = 0;\n        var firstLineIndent = 0;\n        var paragraphIndent = 0;\n        try {\n            if (format !== null && typeof format !== 'undefined') {\n                firstLineIndent = format.firstLineIndent;\n                paragraphIndent = format.paragraphIndent;\n                format.firstLineIndent = 0;\n                format.paragraphIndent = 0;\n            }\n            var spaceWidth = font.getCharWidth(StringTokenizer.whiteSpace, format) + wordSpacing;\n            var characterSpacing = (format != null) ? format.characterSpacing : 0;\n            var wordSpace = (format !== null && typeof format !== 'undefined' && wordSpacing === 0) ? format.wordSpacing : 0;\n            spaceWidth += characterSpacing + wordSpace;\n            for (var i = 0; i < blocks.length; i++) {\n                var token = blocks[i];\n                var word = words[i];\n                var tokenWidth = 0;\n                if (x !== 0) {\n                    this.streamWriter.startNextLine(x, 0);\n                }\n                if (word.length > 0) {\n                    tokenWidth += /*Utils.Round(*/ font.measureString(word, format).width /*)*/;\n                    tokenWidth += characterSpacing;\n                    var val = this.getUnicodeString(token);\n                    this.streamWriter.showText(val);\n                }\n                if (i !== blocks.length - 1) {\n                    x = tokenWidth + spaceWidth;\n                    xShift += x;\n                }\n            }\n            // Rolback current line position.\n            if (xShift > 0) {\n                this.streamWriter.startNextLine(-xShift, 0);\n            }\n        }\n        finally {\n            if (format !== null && typeof format !== 'undefined') {\n                format.firstLineIndent = firstLineIndent;\n                format.paragraphIndent = paragraphIndent;\n            }\n        }\n    };\n    /**\n     * Breakes the unicode line to the words and converts symbols to glyphs.\n     */\n    PdfGraphics.prototype.breakUnicodeLine = function (line, ttfFont, words) {\n        if (line === null) {\n            throw new Error('Argument Null Exception : line');\n        }\n        words = line.split(null);\n        var tokens = [];\n        for (var i = 0; i < words.length; i++) {\n            // Reconvert string according to unicode standard.\n            var word = words[i];\n            var token = this.convertToUnicode(word, ttfFont);\n            tokens[i] = token;\n        }\n        return { tokens: tokens, words: words };\n    };\n    /**\n     * Creates PdfString from the unicode text.\n     */\n    PdfGraphics.prototype.getUnicodeString = function (token) {\n        if (token === null) {\n            throw new Error('Argument Null Exception : token');\n        }\n        var val = new PdfString(token);\n        val.converted = true;\n        val.encode = InternalEnum.ForceEncoding.Ascii;\n        return val;\n    };\n    /**\n     * Converts to unicode format.\n     */\n    PdfGraphics.prototype.convertToUnicode = function (text, ttfFont) {\n        var token = null;\n        if (text == null) {\n            throw new Error('Argument Null Exception : text');\n        }\n        if (ttfFont == null) {\n            throw new Error('Argument Null Exception : ttfFont');\n        }\n        if (ttfFont.fontInternal instanceof UnicodeTrueTypeFont) {\n            var ttfReader = ttfFont.fontInternal.ttfReader;\n            ttfFont.setSymbols(text);\n            token = ttfReader.convertString(text);\n            var bytes = PdfString.toUnicodeArray(token, false);\n            token = PdfString.byteToString(bytes);\n        }\n        return token;\n    };\n    /**\n     * `Justifies` the line if needed.\n     * @private\n     */\n    PdfGraphics.prototype.justifyLine = function (lineInfo, boundsWidth, format) {\n        var line = lineInfo.text;\n        var lineWidth = lineInfo.width;\n        var shouldJustify = this.shouldJustify(lineInfo, boundsWidth, format);\n        var hasWordSpacing = (format != null && format.wordSpacing !== 0);\n        var symbols = StringTokenizer.spaces;\n        var whitespacesCount = StringTokenizer.getCharsCount(line, symbols);\n        var wordSpace = 0;\n        if (shouldJustify) {\n            // Correct line width.\n            if (hasWordSpacing) {\n                lineWidth -= (whitespacesCount * format.wordSpacing);\n            }\n            var difference = boundsWidth - lineWidth;\n            wordSpace = difference / whitespacesCount;\n            this.pdfStreamWriter.setWordSpacing(wordSpace);\n        }\n        else {\n            // If there is justifying, but the line shouldn't be justified, restore default word spacing.\n            if (hasWordSpacing) {\n                this.pdfStreamWriter.setWordSpacing(format.wordSpacing);\n            }\n            else {\n                this.pdfStreamWriter.setWordSpacing(0);\n            }\n        }\n        return wordSpace;\n    };\n    /**\n     * `Reset` or reinitialize the current graphic value.\n     * @private\n     */\n    PdfGraphics.prototype.reset = function (size) {\n        this.canvasSize = size;\n        this.streamWriter.clear();\n        this.initialize();\n        this.initializeCoordinates();\n    };\n    /**\n     * Checks whether the line should be `justified`.\n     * @private\n     */\n    PdfGraphics.prototype.shouldJustify = function (lineInfo, boundsWidth, format) {\n        var line = lineInfo.text;\n        var lineWidth = lineInfo.width;\n        var justifyStyle = (format != null && format.alignment === PdfTextAlignment.Justify);\n        var goodWidth = (boundsWidth >= 0 && lineWidth < boundsWidth);\n        var symbols = StringTokenizer.spaces;\n        var whitespacesCount = StringTokenizer.getCharsCount(line, symbols);\n        var hasSpaces = (whitespacesCount > 0 && line[0] !== StringTokenizer.whiteSpace);\n        var goodLineBreakStyle = ((lineInfo.lineType & LineType.LayoutBreak) > 0);\n        /* tslint:disable */\n        var shouldJustify = (justifyStyle && goodWidth && hasSpaces && (goodLineBreakStyle || format.alignment === PdfTextAlignment.Justify)); /* tslint:enable */\n        return shouldJustify;\n    };\n    /* tslint:disable */\n    /**\n     * Emulates `Underline, Strikeout` of the text if needed.\n     * @private\n     */\n    PdfGraphics.prototype.underlineStrikeoutText = function (pen, brush, result, font, layoutRectangle, format) {\n        if (font.underline || font.strikeout) {\n            // Calculate line width.\n            var linePen = this.createUnderlineStikeoutPen(pen, brush, font, format);\n            if (linePen != null) {\n                // Approximate line positions.\n                var vShift = this.getTextVerticalAlignShift(result.actualSize.height, layoutRectangle.height, format);\n                var underlineYOffset = 0;\n                underlineYOffset = layoutRectangle.y + vShift + font.metrics.getAscent(format) + 1.5 * linePen.width;\n                var strikeoutYOffset = layoutRectangle.y + vShift + font.metrics.getHeight(format) / 2 + 1.5 * linePen.width;\n                var lines = result.lines;\n                // Run through the text and draw lines.\n                for (var i = 0, len = result.lineCount; i < len; i++) {\n                    var lineInfo = lines[i];\n                    var line = lineInfo.text;\n                    var lineWidth = lineInfo.width;\n                    var hShift = this.getHorizontalAlignShift(lineWidth, layoutRectangle.width, format);\n                    var lineIndent = this.getLineIndent(lineInfo, format, layoutRectangle, (i === 0));\n                    hShift += (!this.rightToLeft(format)) ? lineIndent : 0;\n                    var x1 = layoutRectangle.x + hShift;\n                    /* tslint:disable */\n                    var x2 = (!this.shouldJustify(lineInfo, layoutRectangle.width, format)) ? x1 + lineWidth - lineIndent : x1 + layoutRectangle.width - lineIndent;\n                    /* tslint:enable */\n                    if (font.underline) {\n                        var y = underlineYOffset;\n                        this.drawLine(linePen, x1, y, x2, y);\n                        underlineYOffset += result.lineHeight;\n                    }\n                    if (font.strikeout) {\n                        var y = strikeoutYOffset;\n                        this.drawLine(linePen, x1, y, x2, y);\n                        strikeoutYOffset += result.lineHeight;\n                    }\n                    if (this.isPointOverload && lines.length > 1) {\n                        layoutRectangle.x = 0;\n                        layoutRectangle.width = this.clientSize.width;\n                    }\n                }\n                this.isPointOverload = false;\n            }\n        }\n    };\n    /**\n     * `Creates a pen` for drawing lines in the text.\n     * @private\n     */\n    PdfGraphics.prototype.createUnderlineStikeoutPen = function (pen, brush, font, format) {\n        // Calculate line width.\n        var lineWidth = font.metrics.getSize(format) / 20;\n        var linePen = null;\n        // Create a pen fo the lines.\n        if (pen != null) {\n            linePen = new PdfPen(pen.color, lineWidth);\n        }\n        else if (brush != null) {\n            linePen = new PdfPen(brush, lineWidth);\n        }\n        return linePen;\n    };\n    /**\n     * Return `text rendering mode`.\n     * @private\n     */\n    PdfGraphics.prototype.getTextRenderingMode = function (pen, brush, format) {\n        var tm = TextRenderingMode.None;\n        if (pen != null && brush != null) {\n            tm = TextRenderingMode.FillStroke;\n        }\n        else if (pen != null) {\n            tm = TextRenderingMode.Stroke;\n        }\n        else {\n            tm = TextRenderingMode.Fill;\n        }\n        if (format != null && format.clipPath) {\n            tm |= TextRenderingMode.ClipFlag;\n        }\n        return tm;\n    };\n    /**\n     * Returns `line indent` for the line.\n     * @private\n     */\n    PdfGraphics.prototype.getLineIndent = function (lineInfo, format, layoutBounds, firstLine) {\n        var lineIndent = 0;\n        var firstParagraphLine = ((lineInfo.lineType & LineType.FirstParagraphLine) > 0);\n        if (format != null && firstParagraphLine) {\n            lineIndent = (firstLine) ? format.firstLineIndent : format.paragraphIndent;\n            lineIndent = (layoutBounds.width > 0) ? Math.min(layoutBounds.width, lineIndent) : lineIndent;\n        }\n        return lineIndent;\n    };\n    /**\n     * Calculates shift value if the line is `horizontaly aligned`.\n     * @private\n     */\n    PdfGraphics.prototype.getHorizontalAlignShift = function (lineWidth, boundsWidth, format) {\n        var shift = 0;\n        if (boundsWidth >= 0 && format != null && format.alignment !== PdfTextAlignment.Left) {\n            switch (format.alignment) {\n                case PdfTextAlignment.Center:\n                    shift = (boundsWidth - lineWidth) / 2;\n                    break;\n                case PdfTextAlignment.Right:\n                    shift = boundsWidth - lineWidth;\n                    break;\n            }\n        }\n        return shift;\n    };\n    /**\n     * Gets or sets the value that indicates `text direction` mode.\n     * @private\n     */\n    PdfGraphics.prototype.rightToLeft = function (format) {\n        var rtl = (format !== null && typeof format !== 'undefined' && format.rightToLeft);\n        if (format !== null && typeof format !== 'undefined') {\n            if (format.textDirection !== PdfTextDirection.None && typeof format.textDirection !== 'undefined') {\n                rtl = true;\n            }\n        }\n        return rtl;\n    };\n    PdfGraphics.prototype.stateControl = function (pen, brush, font, format) {\n        if (typeof format === 'undefined') {\n            this.stateControl(pen, brush, font, null);\n        }\n        else {\n            if (brush instanceof PdfGradientBrush) {\n                this.bCSInitialized = false;\n                brush.colorSpace = this.colorSpace;\n            }\n            if (brush instanceof PdfTilingBrush) {\n                this.bCSInitialized = false;\n                brush.graphics.colorSpace = this.colorSpace;\n            }\n            var saveState = false;\n            if (brush !== null) {\n                var solidBrush = brush;\n                if (typeof this.pageLayer !== 'undefined' && this.pageLayer != null) {\n                    if (this.colorSpaceChanged === false) {\n                        this.lastDocumentCS = this.pageLayer.page.document.colorSpace;\n                        this.lastGraphicsCS = this.pageLayer.page.graphics.colorSpace;\n                        this.colorSpace = this.pageLayer.page.document.colorSpace;\n                        this.currentColorSpace = this.pageLayer.page.document.colorSpace;\n                        this.colorSpaceChanged = true;\n                    }\n                }\n                this.initCurrentColorSpace(this.currentColorSpace);\n            }\n            else if (pen != null) {\n                var pdfPen = pen;\n                if (typeof this.pageLayer !== 'undefined' && this.pageLayer != null) {\n                    /* tslint:disable */\n                    this.colorSpace = this.pageLayer.page.document.colorSpace;\n                    this.currentColorSpace = this.pageLayer.page.document.colorSpace;\n                }\n                this.initCurrentColorSpace(this.currentColorSpace);\n            }\n            this.penControl(pen, saveState);\n            this.brushControl(brush, saveState);\n            this.fontControl(font, format, saveState);\n        }\n    };\n    /**\n     * Initializes the `current color space`.\n     * @private\n     */\n    PdfGraphics.prototype.initCurrentColorSpace = function (colorspace) {\n        var re = this.getResources.getResources();\n        if (!this.bCSInitialized) {\n            if (this.currentColorSpace != PdfColorSpace.GrayScale) {\n                this.pdfStreamWriter.setColorSpace('Device' + this.currentColorSpaces[this.currentColorSpace], true);\n                this.pdfStreamWriter.setColorSpace('Device' + this.currentColorSpaces[this.currentColorSpace], false);\n                this.bCSInitialized = true;\n            }\n            else {\n                this.pdfStreamWriter.setColorSpace('DeviceGray', true);\n                this.pdfStreamWriter.setColorSpace('DeviceGray', false);\n                this.bCSInitialized = true;\n            }\n        }\n    };\n    /**\n     * Controls the `pen state`.\n     * @private\n     */\n    PdfGraphics.prototype.penControl = function (pen, saveState) {\n        if (pen != null) {\n            this.currentPen = pen;\n            /* tslint:disable */\n            pen.monitorChanges(this.currentPen, this.pdfStreamWriter, this.getResources, saveState, this.colorSpace, this.matrix.clone());\n            /* tslint:enable */\n            this.currentPen = pen.clone();\n        }\n    };\n    /**\n     * Controls the `brush state`.\n     * @private\n     */\n    PdfGraphics.prototype.brushControl = function (brush, saveState) {\n        if (brush != null && typeof brush !== 'undefined') {\n            var b = brush.clone();\n            var lgb = b;\n            if (lgb !== null && typeof lgb !== 'undefined' && !(brush instanceof PdfSolidBrush) && !(brush instanceof PdfTilingBrush)) {\n                var m = lgb.matrix;\n                var matrix = this.matrix.clone();\n                if ((m != null)) {\n                    m.multiply(matrix);\n                    matrix = m;\n                }\n                lgb.matrix = matrix;\n            }\n            this.currentBrush = lgb;\n            var br = (brush);\n            /* tslint:disable */\n            b.monitorChanges(this.currentBrush, this.pdfStreamWriter, this.getResources, saveState, this.colorSpace);\n            /* tslint:enable */\n            this.currentBrush = brush;\n            brush = null;\n        }\n    };\n    /**\n     * Saves the font and other `font settings`.\n     * @private\n     */\n    PdfGraphics.prototype.fontControl = function (font, format, saveState) {\n        if (font != null) {\n            var curSubSuper = (format != null) ? format.subSuperScript : PdfSubSuperScript.None;\n            /* tslint:disable */\n            var prevSubSuper = (this.currentStringFormat != null) ? this.currentStringFormat.subSuperScript : PdfSubSuperScript.None; /* tslint:enable */\n            if (saveState || font !== this.currentFont || curSubSuper !== prevSubSuper) {\n                var resources = this.getResources.getResources();\n                this.currentFont = font;\n                this.currentStringFormat = format;\n                var size = font.metrics.getSize(format);\n                /* tslint:disable */\n                this.isEmfTextScaled = false;\n                var fontName = resources.getName(font);\n                this.pdfStreamWriter.setFont(font, fontName, size);\n            }\n        }\n    };\n    PdfGraphics.prototype.setTransparency = function (arg1, arg2, arg3) {\n        if (typeof arg2 === 'undefined') {\n            this.istransparencySet = true;\n            this.setTransparency(arg1, arg1, PdfBlendMode.Normal);\n        }\n        else if (typeof arg2 === 'number' && typeof arg3 === 'undefined') {\n            this.setTransparency(arg1, arg2, PdfBlendMode.Normal);\n        }\n        else {\n            if (this.trasparencies == null) {\n                this.trasparencies = new TemporaryDictionary();\n            }\n            var transp = null;\n            var td = new TransparencyData(arg1, arg2, arg3);\n            if (this.trasparencies.containsKey(td)) {\n                transp = this.trasparencies.getValue(td);\n            }\n            if (transp == null) {\n                transp = new PdfTransparency(arg1, arg2, arg3);\n                this.trasparencies.setValue(td, transp);\n            }\n            var resources = this.getResources.getResources();\n            var name_3 = resources.getName(transp);\n            var sw = this.streamWriter;\n            sw.setGraphicsState(name_3);\n        }\n    };\n    PdfGraphics.prototype.clipTranslateMargins = function (x, y, left, top, right, bottom) {\n        if (x instanceof RectangleF && typeof y === 'undefined') {\n            this.clipBounds = x;\n            this.pdfStreamWriter.writeComment('Clip margins.');\n            this.pdfStreamWriter.appendRectangle(x);\n            this.pdfStreamWriter.closePath();\n            this.pdfStreamWriter.clipPath(false);\n            this.pdfStreamWriter.writeComment('Translate co-ordinate system.');\n            this.translateTransform(x.x, x.y);\n        }\n        else if (typeof x === 'number') {\n            var clipArea = new RectangleF(left, top, this.size.width - left - right, this.size.height - top - bottom);\n            this.clipBounds = clipArea;\n            this.pdfStreamWriter.writeComment(\"Clip margins.\");\n            this.pdfStreamWriter.appendRectangle(clipArea);\n            this.pdfStreamWriter.closePath();\n            this.pdfStreamWriter.clipPath(false);\n            this.pdfStreamWriter.writeComment(\"Translate co-ordinate system.\");\n            this.translateTransform(x, y);\n        }\n    };\n    /**\n     * `Updates y` co-ordinate.\n     * @private\n     */\n    PdfGraphics.prototype.updateY = function (y) {\n        return -y;\n    };\n    /**\n     * Used to `translate the transformation`.\n     * ```typescript\n     * // create a new PDF document\n     * let document : PdfDocument = new PdfDocument();\n     * // create a new page\n     * let page1 : PdfPage = document.pages.add();\n     * // set pen\n     * let pen : PdfPen = new PdfPen(new PdfColor(0, 0, 0));\n     * //\n     * // set translate transform\n     * page1.graphics.translateTransform(100, 100);\n     * //\n     * // draw the rectangle after applying translate transform\n     * page1.graphics.drawRectangle(pen, new RectangleF({x : 0, y : 0}, {width : 100, height : 50}));\n     * // save the document.\n     * document.save('output.pdf');\n     * // destroy the document\n     * document.destroy();\n     * ```\n     * @param offsetX The x-coordinate of the translation.\n     * @param offsetY The y-coordinate of the translation.\n     */\n    PdfGraphics.prototype.translateTransform = function (offsetX, offsetY) {\n        var matrix = new PdfTransformationMatrix();\n        this.getTranslateTransform(offsetX, offsetY, matrix);\n        this.pdfStreamWriter.modifyCtm(matrix);\n        this.matrix.multiply(matrix);\n    };\n    /**\n     * `Translates` coordinates of the input matrix.\n     * @private\n     */\n    PdfGraphics.prototype.getTranslateTransform = function (x, y, input) {\n        input.translate(x, this.updateY(y));\n        return input;\n    };\n    /* tslint:disable */\n    /**\n     * Applies the specified `scaling operation` to the transformation matrix of this Graphics by prepending it to the object's transformation matrix.\n     * ```typescript\n     * // create a new PDF document\n     * let document : PdfDocument = new PdfDocument();\n     * // create a new page\n     * let page1 : PdfPage = document.pages.add();\n     * // create pen\n     * let pen : PdfPen = new PdfPen(new PdfColor(0, 0, 0));\n     * //\n     * // apply scaling trasformation\n     * page1.graphics.scaleTransform(1.5, 2);\n     * //\n     * // draw the rectangle after applying scaling transform\n     * page1.graphics.drawRectangle(pen, new RectangleF({x : 100, y : 100}, {width : 100, height : 50}));\n     * // save the document.\n     * document.save('output.pdf');\n     * // destroy the document\n     * document.destroy();\n     * ```\n     * @param scaleX Scale factor in the x direction.\n     * @param scaleY Scale factor in the y direction.\n     */\n    /* tslint:enable */\n    PdfGraphics.prototype.scaleTransform = function (scaleX, scaleY) {\n        var matrix = new PdfTransformationMatrix();\n        this.getScaleTransform(scaleX, scaleY, matrix);\n        this.pdfStreamWriter.modifyCtm(matrix);\n        this.matrix.multiply(matrix);\n    };\n    /**\n     * `Scales` coordinates of the input matrix.\n     * @private\n     */\n    PdfGraphics.prototype.getScaleTransform = function (x, y, input) {\n        if (input == null) {\n            input = new PdfTransformationMatrix();\n        }\n        input.scale(x, y);\n        return input;\n    };\n    /**\n     * Applies the specified `rotation` to the transformation matrix of this Graphics.\n     * ```typescript\n     * // create a new PDF document\n     * let document : PdfDocument = new PdfDocument();\n     * // create a new page\n     * let page1 : PdfPage = document.pages.add();\n     * // create pen\n     * let pen : PdfPen = new PdfPen(new PdfColor(0, 0, 0));\n     * //\n     * // set RotateTransform with 25 degree of angle\n     * page1.graphics.rotateTransform(25);\n     * //\n     * // draw the rectangle after RotateTransformation\n     * page1.graphics.drawRectangle(pen, new RectangleF({x : 100, y : 100}, {width : 100, height : 50}));\n     * // save the document.\n     * document.save('output.pdf');\n     * // destroy the document\n     * document.destroy();\n     * ```\n     * @param angle Angle of rotation in degrees.\n     */\n    PdfGraphics.prototype.rotateTransform = function (angle) {\n        var matrix = new PdfTransformationMatrix();\n        this.getRotateTransform(angle, matrix);\n        this.pdfStreamWriter.modifyCtm(matrix);\n        this.matrix.multiply(matrix);\n    };\n    /**\n     * `Initializes coordinate system`.\n     * @private\n     */\n    PdfGraphics.prototype.initializeCoordinates = function () {\n        // Matrix equation: TM(T-1)=M', where T=[1 0 0 -1 0 h]\n        this.pdfStreamWriter.writeComment('Change co-ordinate system to left/top.');\n        // Translate co-ordinates only, don't flip.\n        if (this.mediaBoxUpperRightBound !== -(this.size.height)) {\n            if (this.cropBox == null) {\n                if (this.mediaBoxUpperRightBound === this.size.height || this.mediaBoxUpperRightBound === 0) {\n                    this.translateTransform(0, this.updateY(this.size.height));\n                }\n                else {\n                    this.translateTransform(0, this.updateY(this.mediaBoxUpperRightBound));\n                }\n            }\n        }\n    };\n    /**\n     * `Rotates` coordinates of the input matrix.\n     * @private\n     */\n    PdfGraphics.prototype.getRotateTransform = function (angle, input) {\n        if (input == null || typeof input === 'undefined') {\n            input = new PdfTransformationMatrix();\n        }\n        input.rotate(this.updateY(angle));\n        return input;\n    };\n    /**\n     * `Saves` the current state of this Graphics and identifies the saved state with a GraphicsState.\n     * ```typescript\n     * // create a new PDF document\n     * let document : PdfDocument = new PdfDocument();\n     * // create a new page\n     * let page1 : PdfPage = document.pages.add();\n     * // create pen\n     * let pen : PdfPen = new PdfPen(new PdfColor(0, 0, 0));\n     * //\n     * // save the graphics state\n     * let state1 : PdfGraphicsState = page1.graphics.save();\n     * //\n     * page1.graphics.scaleTransform(1.5, 2);\n     * // draw the rectangle\n     * page1.graphics.drawRectangle(pen, new RectangleF({x : 100, y : 100}, {width : 100, height : 50}));\n     * // restore the graphics state\n     * page1.graphics.restore(state1);\n     * // save the document.\n     * document.save('output.pdf');\n     * // destroy the document\n     * document.destroy();\n     * ```\n     */\n    PdfGraphics.prototype.save = function () {\n        var state = new PdfGraphicsState(this, this.matrix.clone());\n        state.brush = this.currentBrush;\n        state.pen = this.currentPen;\n        state.font = this.currentFont;\n        state.colorSpace = this.currentColorSpace;\n        state.characterSpacing = this.previousCharacterSpacing;\n        state.wordSpacing = this.previousWordSpacing;\n        state.textScaling = this.previousTextScaling;\n        state.textRenderingMode = this.previousTextRenderingMode;\n        this.graphicsState.push(state);\n        this.pdfStreamWriter.saveGraphicsState();\n        return state;\n    };\n    PdfGraphics.prototype.restore = function (state) {\n        if (typeof state === 'undefined') {\n            if (this.graphicsState.length > 0) {\n                this.doRestoreState();\n            }\n        }\n        else {\n            if (this.graphicsState.indexOf(state) !== -1) {\n                for (;;) {\n                    if (this.graphicsState.length === 0) {\n                        break;\n                    }\n                    var popState = this.doRestoreState();\n                    if (popState === state) {\n                        break;\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * `Restores graphics state`.\n     * @private\n     */\n    PdfGraphics.prototype.doRestoreState = function () {\n        var state = this.graphicsState.pop();\n        this.transformationMatrix = state.matrix;\n        this.currentBrush = state.brush;\n        this.currentPen = state.pen;\n        this.currentFont = state.font;\n        this.currentColorSpace = state.colorSpace;\n        this.previousCharacterSpacing = state.characterSpacing;\n        this.previousWordSpacing = state.wordSpacing;\n        this.previousTextScaling = state.textScaling;\n        this.previousTextRenderingMode = state.textRenderingMode;\n        this.pdfStreamWriter.restoreGraphicsState();\n        return state;\n    };\n    /* tslint:enable */\n    /**\n     * `Draws the specified path`, using its original physical size, at the location specified by a coordinate pair.\n     * ```typescript\n     * // create a new PDF document.\n     * let document : PdfDocument = new PdfDocument();\n     * // add a page to the document.\n     * let page1 : PdfPage = document.pages.add();\n     * //Create new PDF path.\n     * let path : PdfPath = new PdfPath();\n     * //Add line path points.\n     * path.addLine(new PointF(10, 100), new PointF(10, 200));\n     * path.addLine(new PointF(100, 100), new PointF(100, 200));\n     * path.addLine(new PointF(100, 200), new PointF(55, 150));\n     * // set pen\n     * let pen : PdfPen = new PdfPen(new PdfColor(255, 0, 0));\n     * // set brush\n     * let brush : PdfSolidBrush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n     * // draw the path\n     * page1.graphics.drawPath(pen, brush, path);\n     * //\n     * // save the document.\n     * document.save('output.pdf');\n     * // destroy the document\n     * document.destroy();\n     * ```\n     * @param pen Color of the text.\n     * @param brush Color of the text.\n     * @param path Draw path.\n     */\n    PdfGraphics.prototype.drawPath = function (pen, brush, path) {\n        if (brush instanceof PdfTilingBrush) {\n            this.bCSInitialized = false;\n            brush.graphics.colorSpace = this.colorSpace;\n        }\n        else if (brush instanceof PdfGradientBrush) {\n            this.bCSInitialized = false;\n            brush.colorSpace = this.colorSpace;\n        }\n        this.stateControl(pen, brush, null);\n        this.buildUpPath(path.pathPoints, path.pathTypes);\n        this.drawPathHelper(pen, brush, path.fillMode, false);\n    };\n    /* tslint:disable-next-line:max-line-length */\n    PdfGraphics.prototype.drawArc = function (arg1, arg2, arg3, arg4, arg5, arg6, arg7) {\n        if (arg2 instanceof RectangleF) {\n            this.drawArc(arg1, arg2.x, arg2.y, arg2.width, arg2.height, arg3, arg4);\n        }\n        else {\n            if ((arg7 !== 0)) {\n                this.stateControl(arg1, null, null);\n                this.constructArcPath(arg2, arg3, (arg2 + arg4), (arg3 + arg5), arg6, arg7);\n                this.drawPathHelper(arg1, null, false);\n            }\n        }\n    };\n    /**\n     * Builds up the path.\n     * @private\n     */\n    PdfGraphics.prototype.buildUpPath = function (arg1, arg2) {\n        var cnt = arg1.length;\n        for (var i = 0; i < cnt; ++i) {\n            var typeValue = 0;\n            var point = arg1[i];\n            switch (((arg2[i] & (PdfGraphics.pathTypesValuesMask)))) {\n                case PathPointType.Start:\n                    this.pdfStreamWriter.beginPath(point.x, point.y);\n                    break;\n                case PathPointType.Bezier3:\n                    var p2 = new PointF(0, 0);\n                    var p3 = new PointF(0, 0);\n                    var result1 = this.getBezierPoints(arg1, arg2, i, p2, p3);\n                    this.pdfStreamWriter.appendBezierSegment(point, result1.p2, result1.p3);\n                    i = result1.i;\n                    break;\n                case PathPointType.Line:\n                    this.pdfStreamWriter.appendLineSegment(point);\n                    break;\n                default:\n                    throw new Error('ArithmeticException - Incorrect path formation.');\n            }\n            typeValue = arg2[i];\n            this.checkFlags(typeValue);\n        }\n    };\n    /**\n     * Gets the bezier points from respective arrays.\n     * @private\n     */\n    /* tslint:disable-next-line:max-line-length */\n    PdfGraphics.prototype.getBezierPoints = function (points, types, i, p2, p3) {\n        var errorMsg = 'Malforming path.';\n        ++i;\n        if ((((types[i] & PdfGraphics.pathTypesValuesMask)) === PathPointType.Bezier3)) {\n            p2 = points[i];\n            ++i;\n            if ((((types[i] & PdfGraphics.pathTypesValuesMask)) === PathPointType.Bezier3)) {\n                p3 = points[i];\n            }\n            else {\n                throw new Error('ArgumentException : errorMsg');\n            }\n        }\n        else {\n            throw new Error('ArgumentException : errorMsg');\n        }\n        return { i: i, p2: p2, p3: p3 };\n    };\n    /**\n     * Checks path point type flags.\n     * @private\n     */\n    PdfGraphics.prototype.checkFlags = function (type) {\n        if ((((type & (PathPointType.CloseSubpath))) === PathPointType.CloseSubpath)) {\n            this.pdfStreamWriter.closePath();\n        }\n    };\n    /**\n     * Constructs the arc path using Bezier curves.\n     * @private\n     */\n    PdfGraphics.prototype.constructArcPath = function (x1, y1, x2, y2, startAng, sweepAngle) {\n        var points = this.getBezierArc(x1, y1, x2, y2, startAng, sweepAngle);\n        if ((points.length === 0)) {\n            return;\n        }\n        var pt = [points[0], points[1], points[2], points[3], points[4], points[5], points[6], points[7]];\n        this.pdfStreamWriter.beginPath(pt[0], pt[1]);\n        var i = 0;\n        for (i = 0; i < points.length; i = i + 8) {\n            pt = [points[i], points[i + 1], points[i + 2], points[i + 3], points[i + 4], points[i + 5], points[i + 6], points[i + 7]];\n            this.pdfStreamWriter.appendBezierSegment(pt[2], pt[3], pt[4], pt[5], pt[6], pt[7]);\n        }\n    };\n    /**\n     * Gets the bezier points for arc constructing.\n     * @private\n     */\n    PdfGraphics.prototype.getBezierArc = function (numX1, numY1, numX2, numY2, s1, e1) {\n        if ((numX1 > numX2)) {\n            var tmp = void 0;\n            tmp = numX1;\n            numX1 = numX2;\n            numX2 = tmp;\n        }\n        if ((numY2 > numY1)) {\n            var tmp = void 0;\n            tmp = numY1;\n            numY1 = numY2;\n            numY2 = tmp;\n        }\n        var fragAngle1;\n        var numFragments;\n        if ((Math.abs(e1) <= 90)) {\n            fragAngle1 = e1;\n            numFragments = 1;\n        }\n        else {\n            numFragments = (Math.ceil((Math.abs(e1) / 90)));\n            fragAngle1 = (e1 / numFragments);\n        }\n        var xcen = ((numX1 + numX2) / 2);\n        var ycen = ((numY1 + numY2) / 2);\n        var rx = ((numX2 - numX1) / 2);\n        var ry = ((numY2 - numY1) / 2);\n        var halfAng = ((fragAngle1 * (Math.PI / 360)));\n        var kappa = (Math.abs(4.0 / 3.0 * (1.0 - Math.cos(halfAng)) / Math.sin(halfAng)));\n        var pointsList = [];\n        for (var i = 0; (i < numFragments); i++) {\n            var thetaValue0 = (((s1 + (i * fragAngle1)) * (Math.PI / 180)));\n            var thetaValue1 = (((s1 + ((i + 1) * fragAngle1)) * (Math.PI / 180)));\n            var cos0 = (Math.cos(thetaValue0));\n            var cos1 = (Math.cos(thetaValue1));\n            var sin0 = (Math.sin(thetaValue0));\n            var sin1 = (Math.sin(thetaValue1));\n            if ((fragAngle1 > 0)) {\n                /* tslint:disable-next-line:max-line-length */\n                pointsList.push((xcen + (rx * cos0)), (ycen - (ry * sin0)), (xcen + (rx * (cos0 - (kappa * sin0)))), (ycen - (ry * (sin0 + (kappa * cos0)))), (xcen + (rx * (cos1 + (kappa * sin1)))), (ycen - (ry * (sin1 - (kappa * cos1)))), (xcen + (rx * cos1)), (ycen - (ry * sin1)));\n            }\n            else {\n                /* tslint:disable-next-line:max-line-length */\n                pointsList.push((xcen + (rx * cos0)), (ycen - (ry * sin0)), (xcen + (rx * (cos0 + (kappa * sin0)))), (ycen - (ry * (sin0 - (kappa * cos0)))), (xcen + (rx * (cos1 - (kappa * sin1)))), (ycen - (ry * (sin1 + (kappa * cos1)))), (xcen + (rx * cos1)), (ycen - (ry * sin1)));\n            }\n        }\n        return pointsList;\n    };\n    // Constants\n    /**\n     * Specifies the mask of `path type values`.\n     * @private\n     */\n    PdfGraphics.pathTypesValuesMask = 0xf;\n    /**\n     * Checks whether the object is `transparencyObject`.\n     * @hidden\n     * @private\n     */\n    PdfGraphics.transparencyObject = false;\n    return PdfGraphics;\n}());\nexport { PdfGraphics };\n/**\n * `GetResourceEventHandler` class is alternate for event handlers and delegates.\n * @private\n * @hidden\n */\nvar GetResourceEventHandler = /** @class */ (function () {\n    /**\n     * Initialize instance of `GetResourceEventHandler` class.\n     * Alternate for event handlers and delegates.\n     * @private\n     */\n    function GetResourceEventHandler(sender) {\n        this.sender = sender;\n    }\n    /**\n     * Return the instance of `PdfResources` class.\n     * @private\n     */\n    GetResourceEventHandler.prototype.getResources = function () {\n        return this.sender.getResources();\n    };\n    return GetResourceEventHandler;\n}());\nexport { GetResourceEventHandler };\nvar PdfGraphicsState = /** @class */ (function () {\n    function PdfGraphicsState(graphics, matrix) {\n        /**\n         * Stores `previous rendering mode`.\n         * @default TextRenderingMode.Fill\n         * @private\n         */\n        this.internalTextRenderingMode = TextRenderingMode.Fill;\n        /**\n         * `Previous character spacing` value or 0.\n         * @default 0.0\n         * @private\n         */\n        this.internalCharacterSpacing = 0.0;\n        /**\n         * `Previous word spacing` value or 0.\n         * @default 0.0\n         * @private\n         */\n        this.internalWordSpacing = 0.0;\n        /**\n         * The previously used `text scaling value`.\n         * @default 100.0\n         * @private\n         */\n        this.internalTextScaling = 100.0;\n        /**\n         * `Current color space`.\n         * @default PdfColorSpace.Rgb\n         * @private\n         */\n        this.pdfColorSpace = PdfColorSpace.Rgb;\n        if (typeof graphics !== 'undefined') {\n            this.pdfGraphics = graphics;\n            this.transformationMatrix = matrix;\n        }\n    }\n    Object.defineProperty(PdfGraphicsState.prototype, \"graphics\", {\n        // Properties\n        /**\n         * Gets the parent `graphics object`.\n         * @private\n         */\n        get: function () {\n            return this.pdfGraphics;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphicsState.prototype, \"matrix\", {\n        /**\n         * Gets the `current matrix`.\n         * @private\n         */\n        get: function () {\n            return this.transformationMatrix;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphicsState.prototype, \"characterSpacing\", {\n        /**\n         * Gets or sets the `current character spacing`.\n         * @private\n         */\n        get: function () {\n            return this.internalCharacterSpacing;\n        },\n        set: function (value) {\n            this.internalCharacterSpacing = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphicsState.prototype, \"wordSpacing\", {\n        /**\n         * Gets or sets the `word spacing` value.\n         * @private\n         */\n        get: function () {\n            return this.internalWordSpacing;\n        },\n        set: function (value) {\n            this.internalWordSpacing = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphicsState.prototype, \"textScaling\", {\n        /**\n         * Gets or sets the `text scaling` value.\n         * @private\n         */\n        get: function () {\n            return this.internalTextScaling;\n        },\n        set: function (value) {\n            this.internalTextScaling = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphicsState.prototype, \"pen\", {\n        /**\n         * Gets or sets the `current pen` object.\n         * @private\n         */\n        get: function () {\n            return this.pdfPen;\n        },\n        set: function (value) {\n            this.pdfPen = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphicsState.prototype, \"brush\", {\n        /**\n         * Gets or sets the `brush`.\n         * @private\n         */\n        get: function () {\n            return this.pdfBrush;\n        },\n        set: function (value) {\n            this.pdfBrush = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphicsState.prototype, \"font\", {\n        /**\n         * Gets or sets the `current font` object.\n         * @private\n         */\n        get: function () {\n            return this.pdfFont;\n        },\n        set: function (value) {\n            this.pdfFont = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphicsState.prototype, \"colorSpace\", {\n        /**\n         * Gets or sets the `current color space` value.\n         * @private\n         */\n        get: function () {\n            return this.pdfColorSpace;\n        },\n        set: function (value) {\n            this.pdfColorSpace = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphicsState.prototype, \"textRenderingMode\", {\n        /**\n         * Gets or sets the `text rendering mode`.\n         * @private\n         */\n        get: function () {\n            return this.internalTextRenderingMode;\n        },\n        set: function (value) {\n            this.internalTextRenderingMode = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return PdfGraphicsState;\n}());\nexport { PdfGraphicsState };\nvar TransparencyData = /** @class */ (function () {\n    // Constructors\n    /**\n     * Initializes a new instance of the `TransparencyData` class.\n     * @private\n     */\n    function TransparencyData(alphaPen, alphaBrush, blendMode) {\n        this.alphaPen = alphaPen;\n        this.alphaBrush = alphaBrush;\n        this.blendMode = blendMode;\n    }\n    return TransparencyData;\n}());\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}