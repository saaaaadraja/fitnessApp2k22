{"ast":null,"code":"import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Rect, measureText, textElement, PathOption } from '@syncfusion/ej2-svg-base';\nimport { RectOption, CircleOption } from '../../common/utils/helper';\nimport { Animation } from '@syncfusion/ej2-base';\nimport { getAnimationFunction } from '../../common/utils/helper';\n/**\n * class for Bullet chart Scale Group\n */\n\nvar ScaleGroup =\n/** @class */\nfunction () {\n  function ScaleGroup(bulletChart) {\n    this.comparative = []; //super();\n\n    this.dataSource = bulletChart.dataSource;\n    this.isVertical = bulletChart.orientation === 'Vertical';\n    this.isTicksInside = bulletChart.tickPosition === 'Inside';\n    this.isLabelsInside = bulletChart.labelPosition === 'Inside';\n    this.isHorizontal = bulletChart.orientation === 'Horizontal';\n    this.isLeft = bulletChart.titlePosition === 'Left';\n    this.isRight = bulletChart.titlePosition === 'Right';\n    this.isTop = bulletChart.titlePosition === 'Top';\n    this.location = 10;\n    this.featureBarBounds = [];\n    this.majorTickSize = bulletChart.majorTickLines.height;\n    this.labelOffset = 15;\n    this.labelSize = 12;\n    this.bulletChart = bulletChart;\n    this.isLabelBelow = !this.bulletChart.opposedPosition;\n    this.scaleOrientation = this.bulletChart.orientation;\n    this.rangeColor = [];\n  }\n  /**\n   * To render range scale of the bulletChart graph\n   * @param scaleGroup\n   */\n\n\n  ScaleGroup.prototype.drawScaleGroup = function (scaleGroup) {\n    var rangeGroup = this.bulletChart.renderer.createGroup({\n      'id': this.bulletChart.svgObject.id + '_rangeGroup'\n    });\n    var max = this.bulletChart.maximum;\n    var ranges = this.bulletChart.ranges;\n    this.scaleSettingsGroup = scaleGroup;\n    var rect;\n    var bullet = this.bulletChart;\n    var enableRtl = bullet.enableRtl;\n    var initialRect = bullet.initialClipRect;\n    var locX = initialRect.x + (enableRtl && bullet.orientation === 'Horizontal' ? initialRect.width : 0);\n    var locY = initialRect.y + (!enableRtl && bullet.orientation === 'Vertical' ? initialRect.height : 0);\n    var area = 0;\n    bullet.rangeCollection = [];\n    var start = 0;\n    var range = bullet.orientation === 'Horizontal' ? initialRect.width : initialRect.height;\n    var fillRange = bullet.orientation === 'Horizontal' ? initialRect.height : initialRect.width;\n\n    for (var i = 0; i < ranges.length; i++) {\n      area = range * ((ranges[i].end - start) / max);\n\n      if (bullet.orientation === 'Horizontal') {\n        locX -= enableRtl ? area : 0;\n      } else {\n        locY -= !enableRtl ? area : 0;\n      }\n\n      rect = new RectOption(bullet.svgObject.id + '_range_' + i, // tslint:disable-next-line:no-string-literal\n      ranges[i].color || this.bulletChart.themeStyle.rangeStrokes[i]['color'], {\n        width: 1\n      }, ranges[i].opacity, new Rect(locX, locY, bullet.orientation === 'Horizontal' ? area : fillRange, bullet.orientation === 'Horizontal' ? fillRange : area));\n      var svgRect = bullet.renderer.drawRectangle(rect);\n      rangeGroup.appendChild(svgRect);\n      scaleGroup.appendChild(rangeGroup);\n\n      if (bullet.orientation === 'Horizontal') {\n        locX += enableRtl ? 0 : area;\n      } else {\n        locY += !enableRtl ? 0 : area;\n      }\n\n      bullet.rangeCollection.push(area);\n      start = ranges[i].end;\n    }\n\n    return this.bulletChart.rangeCollection;\n  };\n\n  ScaleGroup.prototype.sortRangeCollection = function (a, b) {\n    return a - b;\n  };\n  /**\n   * To render the feature bar of the bulletChart chart\n   * @param dataCount\n   */\n\n\n  ScaleGroup.prototype.renderFeatureBar = function (dataCount) {\n    if (dataCount === 0) {\n      return;\n    }\n\n    this.renderCommonFeatureBar(dataCount, this.isHorizontal);\n  };\n  /**\n   * To render the horizontal feature bar of the bulletChart chart\n   * @param dataCount\n   */\n\n\n  ScaleGroup.prototype.renderCommonFeatureBar = function (dataCount, isHorizontal) {\n    var categoryValue;\n    var dotWidth = 6;\n    var padding = 5;\n    var bulletChart = this.bulletChart;\n    var initialBoundsStart = isHorizontal ? bulletChart.initialClipRect.y + bulletChart.initialClipRect.height : bulletChart.initialClipRect.x;\n    var lPoint;\n    var featueGroup = bulletChart.renderer.createGroup({\n      'id': bulletChart.svgObject.id + '_featureGroup'\n    });\n    var data;\n    var featureBarSize = (isHorizontal ? bulletChart.initialClipRect.height : bulletChart.initialClipRect.width) / dataCount;\n    var bounds;\n\n    for (var i = 0; i < dataCount; i++) {\n      data = bulletChart.dataSource[i];\n      categoryValue = data[bulletChart.categoryField];\n\n      if (isHorizontal) {\n        lPoint = initialBoundsStart - featureBarSize * i - (featureBarSize + bulletChart.valueHeight) / 2;\n      } else {\n        lPoint = initialBoundsStart + featureBarSize * i + featureBarSize / 2 - bulletChart.valueHeight / 2;\n      }\n\n      bounds = this.calculateFeatureMeasureBounds(data[bulletChart.valueField], categoryValue, isHorizontal);\n\n      if (data && bulletChart.type === 'Dot') {\n        var value = data[bulletChart.valueField];\n\n        if (isHorizontal) {\n          bounds.pointX = bounds.pointX + (value > 0 && !bulletChart.enableRtl || value < 0 && bulletChart.enableRtl ? bounds.width : 0) - dotWidth / 2;\n        } else {\n          bounds.pointX = bounds.pointX + (value > 0 && bulletChart.enableRtl || value < 0 && !bulletChart.enableRtl ? bounds.width : 0) - dotWidth / 2;\n        }\n\n        bounds.width = dotWidth;\n      } // Drawing feature bar rect element\n\n\n      if (bounds) {\n        var svgRect = isHorizontal ? this.featureBar(bounds.pointX, lPoint, bounds.width, i) : this.verticalFeatureBar(lPoint, bounds.pointX, bounds.width, i);\n        featueGroup.appendChild(svgRect);\n        this.feature = svgRect;\n        this.scaleSettingsGroup.appendChild(featueGroup);\n        this.featureBarBounds[i] = {\n          x: bounds.pointX,\n          y: lPoint,\n          width: bounds.width,\n          height: bulletChart.valueHeight\n        }; // Drawing category text element\n\n        if (!isNullOrUndefined(categoryValue)) {\n          var categoryTextSize = measureText(categoryValue, bulletChart.categoryLabelStyle);\n          var categorySize = isHorizontal ? categoryTextSize.width : categoryTextSize.height;\n          var initialRect = bulletChart.initialClipRect;\n          var x = void 0;\n          var categoryOptions = void 0;\n\n          if (isHorizontal) {\n            x = bulletChart.enableRtl ? initialRect.x + initialRect.width + padding + categorySize / 2 : initialRect.x - padding - categorySize / 2;\n            categoryOptions = this.drawcategory(x, lPoint, categoryValue);\n          } else {\n            x = bulletChart.enableRtl ? initialRect.y - padding - categorySize / 2 : initialRect.y + initialRect.height + padding + categorySize / 2;\n            categoryOptions = this.drawcategory(lPoint + bulletChart.valueHeight / 2, x, categoryValue);\n          }\n\n          textElement(categoryOptions, bulletChart.categoryLabelStyle, bulletChart.categoryLabelStyle.color || bulletChart.themeStyle.categoryFontColor, this.scaleSettingsGroup);\n        }\n      }\n\n      if (bulletChart.animation.enable) {\n        this.doValueBarAnimation(this.scaleSettingsGroup);\n      }\n    }\n  };\n\n  ScaleGroup.prototype.featureBar = function (pointX, pointY, width, i) {\n    var featureBarOptions = new RectOption(this.bulletChart.svgObject.id + '_FeatureMeasure_' + i, this.bulletChart.valueFill, this.bulletChart.valueBorder, 1, new Rect(pointX, pointY, width, this.bulletChart.valueHeight));\n    var svgRect = this.bulletChart.renderer.drawRectangle(featureBarOptions);\n    svgRect.setAttribute('class', this.bulletChart.svgObject.id + '_FeatureMeasure');\n    svgRect.id = this.bulletChart.svgObject.id + '_FeatureMeasure_' + i;\n    return svgRect;\n  };\n\n  ScaleGroup.prototype.verticalFeatureBar = function (pointX, pointY, width, i) {\n    var featureBarOptions = new RectOption(this.bulletChart.svgObject.id + '_FeatureMeasure_' + i, this.bulletChart.valueFill, this.bulletChart.valueBorder, 1, new Rect(pointX, pointY, this.bulletChart.valueHeight, width));\n    var svgRect = this.bulletChart.renderer.drawRectangle(featureBarOptions);\n    svgRect.setAttribute('class', this.bulletChart.svgObject.id + '_FeatureMeasure');\n    svgRect.id = this.bulletChart.svgObject.id + '_FeatureMeasure_' + i;\n    return svgRect;\n  };\n\n  ScaleGroup.prototype.drawcategory = function (lPointX, lPointY, categoryValue) {\n    var categoryOptions = {\n      'id': '',\n      'anchor': 'middle',\n      'x': lPointX,\n      'y': lPointY + this.bulletChart.valueHeight,\n      'transform': '',\n      'text': categoryValue,\n      'baseLine': '',\n      'labelRotation': 0\n    };\n    return categoryOptions;\n  };\n  /**\n   * To render comparative symbol of the bulletChart chart\n   * @param dataCount\n   */\n\n\n  ScaleGroup.prototype.renderComparativeSymbol = function (dataCount) {\n    if (dataCount === 0) {\n      return;\n    }\n\n    this.renderCommonComparativeSymbol(dataCount, this.isHorizontal);\n  };\n\n  ScaleGroup.prototype.renderCommonComparativeSymbol = function (dataCount, isHorizontal) {\n    var bulletChart = this.bulletChart;\n    var value;\n    var rect = bulletChart.initialClipRect;\n    var scaleLength = isHorizontal ? rect.width : rect.height;\n    var y1;\n    var y2;\n    var x1;\n    var pointY = isHorizontal ? rect.y + rect.height : rect.x;\n    var comparativeGroup = bulletChart.renderer.createGroup({\n      'id': bulletChart.svgObject.id + '_comparativeGroup'\n    });\n    var minimum = bulletChart.minimum;\n    var maximum = bulletChart.maximum;\n    var delta = maximum - minimum;\n    var targetWidth = bulletChart.targetWidth;\n    var pointX = isHorizontal ? rect.x - targetWidth / 2 : rect.y + rect.height;\n    var temp;\n    var values = [];\n    var targetTypes = bulletChart.targetTypes;\n    var targetType = 'Rect';\n    var targetTypeLength = targetTypes.length;\n    var featureBarSize = (isHorizontal ? rect.height : rect.width) / dataCount;\n    var compareMeasureOptions;\n    var svgElement;\n\n    for (var k = 0; k < dataCount; k++) {\n      value = bulletChart.dataSource[k][bulletChart.targetField];\n      values = values.concat(value);\n\n      for (var i = 0; i < values.length; i++) {\n        targetType = targetTypes[i % targetTypeLength];\n\n        if (values[i] >= minimum && values[i] <= maximum) {\n          if (isHorizontal) {\n            temp = pointY - featureBarSize * k - featureBarSize / 2;\n          } else {\n            temp = pointY + featureBarSize * k + featureBarSize / 2;\n          }\n\n          y1 = temp - targetWidth * 1.5;\n          y2 = temp + targetWidth * 1.5;\n          temp = scaleLength / (delta / (delta - (maximum - values[i])));\n\n          if (isHorizontal) {\n            x1 = pointX + (bulletChart.enableRtl ? scaleLength - temp : temp);\n          } else {\n            x1 = pointX - (bulletChart.enableRtl ? scaleLength - temp : temp);\n          }\n\n          svgElement = this.getTargetElement(targetType, isHorizontal, x1, y1, y2, values[i], k);\n          this.comparative.push(svgElement);\n          comparativeGroup.appendChild(svgElement);\n          y1 = 0;\n          y2 = 0;\n        }\n\n        this.scaleSettingsGroup.appendChild(comparativeGroup);\n      }\n\n      values = [];\n\n      if (bulletChart.animation.enable) {\n        this.doTargetBarAnimation(0);\n      }\n    }\n  };\n\n  ScaleGroup.prototype.getTargetElement = function (targetType, isHorizontal, x1, y1, y2, value, k) {\n    var shapeObject;\n    var shapeElement;\n    var bulletChart = this.bulletChart;\n    var strokeWidth = targetType === 'Cross' ? bulletChart.targetWidth - 1 : 1;\n    var size = targetType === 'Circle' ? bulletChart.targetWidth - 1 : bulletChart.targetWidth;\n    var lx = isHorizontal ? x1 + size / 2 : y1 + (y2 - y1) / 2;\n    var ly = isHorizontal ? y1 + (y2 - y1) / 2 : x1;\n    var id = bulletChart.svgObject.id + '_ComparativeMeasure_' + k;\n    var className = bulletChart.svgObject.id + '_ComparativeMeasure';\n\n    if (targetType === 'Rect') {\n      shapeObject = isHorizontal ? this.compareMeasure(x1, y1, y2, k, value) : this.compareVMeasure(y1, y2, x1, k, value);\n      shapeElement = bulletChart.renderer.drawLine(shapeObject);\n    } else if (targetType === 'Circle') {\n      shapeObject = new CircleOption(id, bulletChart.targetColor, {\n        width: 1,\n        color: bulletChart.targetColor || 'black'\n      }, 1, lx, ly, size);\n      shapeElement = bulletChart.renderer.drawCircle(shapeObject);\n    } else {\n      var crossDirection = 'M ' + (lx - size) + ' ' + (ly - size) + ' L ' + (lx + size) + ' ' + (ly + size) + ' M ' + (lx - size) + ' ' + (ly + size) + ' L ' + (lx + size) + ' ' + (ly - size);\n      shapeObject = new PathOption(id, 'transparent', strokeWidth, bulletChart.targetColor, 1, '', crossDirection);\n      shapeElement = bulletChart.renderer.drawPath(shapeObject);\n    }\n\n    shapeElement.setAttribute('class', className);\n    return shapeElement;\n  };\n\n  ScaleGroup.prototype.compareMeasure = function (x1, y1, y2, i, value) {\n    var bulletChart = this.bulletChart;\n    var compareMeasureOptions = {\n      'class': bulletChart.svgObject.id + '_ComparativeMeasure',\n      'id': bulletChart.svgObject.id + '_ComparativeMeasure_' + i,\n      'x1': value === bulletChart.maximum ? x1 - bulletChart.targetWidth / 2 : value === bulletChart.minimum ? x1 + bulletChart.targetWidth / 2 : x1,\n      'y1': y1,\n      'x2': value === bulletChart.maximum ? x1 - bulletChart.targetWidth / 2 : value === bulletChart.minimum ? x1 + bulletChart.targetWidth / 2 : x1,\n      'y2': y2,\n      'stroke-width': bulletChart.targetWidth,\n      'stroke': bulletChart.targetColor || 'black'\n    };\n    return compareMeasureOptions;\n  };\n\n  ScaleGroup.prototype.compareVMeasure = function (x1, x2, y1, i, value) {\n    var bulletChart = this.bulletChart;\n    var compareMeasureOptions = {\n      'class': bulletChart.svgObject.id + '_ComparativeMeasure',\n      'id': bulletChart.svgObject.id + '_ComparativeMeasure_' + i,\n      'x1': x1,\n      'y1': y1,\n      'x2': x2,\n      'y2': y1,\n      'stroke-width': bulletChart.targetWidth,\n      'stroke': bulletChart.targetColor || 'black'\n    };\n    return compareMeasureOptions;\n  };\n  /**\n   * To calculate the bounds on vertical and horizontal orientation changes\n   * @param value\n   * @param categoryValue\n   */\n\n\n  ScaleGroup.prototype.calculateFeatureMeasureBounds = function (value, categoryValue, isHorizontal) {\n    var bulletChart = this.bulletChart;\n    var min = bulletChart.minimum;\n    value = value < min && min < 0 ? min : value;\n\n    if (value >= min) {\n      var pointX = void 0;\n      var lastPointX = void 0;\n      var width = void 0;\n      var loc = isHorizontal ? bulletChart.initialClipRect.x : bulletChart.initialClipRect.y;\n      var scaleLength = isHorizontal ? bulletChart.initialClipRect.width : bulletChart.initialClipRect.height;\n      var delta = bulletChart.maximum - bulletChart.minimum;\n      var valueDiff = bulletChart.maximum - value;\n      var orientation_1 = (!bulletChart.enableRtl ? 'forward' : 'backward') + this.scaleOrientation.toLowerCase();\n      categoryValue = isNullOrUndefined(categoryValue) ? '' : categoryValue;\n      var stringLength = measureText(categoryValue.toString(), bulletChart.labelStyle).width;\n\n      switch (orientation_1) {\n        case 'forwardhorizontal':\n        case 'backwardvertical':\n          pointX = loc + (min > 0 ? 0 : scaleLength / delta * Math.abs(min));\n          width = scaleLength / (delta / (min > 0 ? delta - valueDiff : value));\n\n          if (value < 0) {\n            width = Math.abs(width);\n            pointX -= width;\n          }\n\n          width = pointX + width < loc + scaleLength ? width : loc + scaleLength - pointX;\n          lastPointX = loc - (orientation_1 === 'forwardhorizontal' ? stringLength / 2 + 5 : this.labelOffset);\n          break;\n\n        default:\n          pointX = loc + (scaleLength - scaleLength / (delta / (delta - valueDiff)));\n          width = min > 0 ? scaleLength / (delta / (delta - valueDiff)) : scaleLength / (delta / value);\n\n          if (value < 0) {\n            width = Math.abs(width);\n            pointX -= width;\n          }\n\n          if (pointX < loc) {\n            width = pointX + width - loc;\n            pointX = loc;\n          }\n\n          lastPointX = loc + scaleLength + (orientation_1 === 'backwardhorizontal' ? stringLength / 2 + 5 : 5);\n          break;\n      }\n\n      return {\n        pointX: pointX,\n        width: width,\n        lastPointX: lastPointX\n      };\n    }\n\n    return null;\n  };\n  /**\n   * Animates the feature bar.\n   * @param  {FeatureBar} scale - Defines the feature bar to animate.\n   * @return {void}\n   */\n\n\n  ScaleGroup.prototype.doValueBarAnimation = function (scale) {\n    var valueBarElement = this.feature;\n\n    if (!valueBarElement) {\n      return null;\n    }\n\n    var animateOption = this.bulletChart.animation;\n    var animateDuration = this.bulletChart.animateSeries ? this.bulletChart.animation.duration : animateOption.duration;\n    var effectType = getAnimationFunction('Linear');\n    var isValuePlot = this.bulletChart.dataSource < 0;\n    var valueX;\n    var valueY;\n    var elementBarHeight = valueBarElement.getBoundingClientRect().height;\n    var elementBarWidth = valueBarElement.getBoundingClientRect().width;\n    var centerX;\n    var centerY;\n    var valueActual;\n\n    if (this.bulletChart.orientation === 'Horizontal' && valueBarElement) {\n      valueY = parseInt(valueBarElement.getAttribute('height'), 10);\n      valueX = parseInt(valueBarElement.getAttribute('x'), 10);\n      centerY = isValuePlot ? valueY : valueY + elementBarHeight;\n      centerX = valueX;\n    }\n\n    valueBarElement.style.visibility = 'hidden';\n    new Animation({}).animate(valueBarElement, {\n      duration: animateDuration,\n      delay: animateOption.delay,\n      progress: function (args) {\n        if (args.timeStamp >= args.delay) {\n          valueBarElement.style.visibility = 'visible';\n          elementBarWidth = elementBarWidth ? elementBarWidth : 1;\n          valueActual = effectType(args.timeStamp - args.delay, 0, elementBarWidth, args.duration);\n          valueBarElement.setAttribute('transform', 'translate(' + centerX + ' ' + centerY + ') scale(' + valueActual / elementBarWidth + ', 1) translate(' + -centerX + ' ' + -centerY + ')');\n        }\n      },\n      end: function (model) {\n        valueBarElement.setAttribute('transform', 'translate(0,0)');\n        valueBarElement.style.visibility = 'visible';\n      }\n    });\n  };\n  /**\n   * Animates the comparative bar.\n   * @param  {FeatureBar} scale - Defines the feature bar to animate.\n   * @return {void}\n   */\n\n\n  ScaleGroup.prototype.doTargetBarAnimation = function (index) {\n    var targetBarelement;\n    var option = this.bulletChart.animation;\n    var x;\n    var y;\n    var centerX;\n    var centerY;\n    targetBarelement = this.comparative[index];\n\n    if (!targetBarelement) {\n      return null;\n    }\n\n    if (this.bulletChart.orientation === 'Horizontal' && targetBarelement) {\n      y = parseFloat(targetBarelement.getAttribute('y1')) + parseFloat(targetBarelement.getAttribute('y2'));\n      x = parseFloat(targetBarelement.getAttribute('x1'));\n      centerY = y;\n      centerX = x;\n    }\n\n    targetBarelement.style.visibility = 'hidden';\n    this.animateRect(targetBarelement, centerX, centerY, index + 1);\n  };\n\n  ScaleGroup.prototype.animateRect = function (targetBarelement, centerX, centerY, index) {\n    var _this = this;\n\n    var effect = getAnimationFunction('Linear');\n    var value;\n    var option = this.bulletChart.animation;\n    var threshold = this.comparative.length;\n    var duration = this.bulletChart.animateSeries ? this.bulletChart.animation.duration : option.duration;\n    new Animation({}).animate(targetBarelement, {\n      duration: duration,\n      delay: option.delay,\n      progress: function (args) {\n        if (args.timeStamp >= args.delay) {\n          targetBarelement.style.visibility = 'visible';\n          value = effect(args.timeStamp - args.delay, 0, 1, args.duration);\n          targetBarelement.setAttribute('transform', 'translate(' + centerX + ' ' + centerY / 2 + ') scale(1,' + value + ') translate(' + -centerX + ' ' + -centerY / 2 + ')');\n        }\n      },\n      end: function (model) {\n        targetBarelement.setAttribute('transform', 'translate(0,0)');\n\n        if (index < threshold) {\n          _this.doTargetBarAnimation(index + 1);\n        }\n      }\n    });\n  };\n\n  return ScaleGroup;\n}();\n\nexport { ScaleGroup };","map":{"version":3,"names":["isNullOrUndefined","Rect","measureText","textElement","PathOption","RectOption","CircleOption","Animation","getAnimationFunction","ScaleGroup","bulletChart","comparative","dataSource","isVertical","orientation","isTicksInside","tickPosition","isLabelsInside","labelPosition","isHorizontal","isLeft","titlePosition","isRight","isTop","location","featureBarBounds","majorTickSize","majorTickLines","height","labelOffset","labelSize","isLabelBelow","opposedPosition","scaleOrientation","rangeColor","prototype","drawScaleGroup","scaleGroup","rangeGroup","renderer","createGroup","svgObject","id","max","maximum","ranges","scaleSettingsGroup","rect","bullet","enableRtl","initialRect","initialClipRect","locX","x","width","locY","y","area","rangeCollection","start","range","fillRange","i","length","end","color","themeStyle","rangeStrokes","opacity","svgRect","drawRectangle","appendChild","push","sortRangeCollection","a","b","renderFeatureBar","dataCount","renderCommonFeatureBar","categoryValue","dotWidth","padding","initialBoundsStart","lPoint","featueGroup","data","featureBarSize","bounds","categoryField","valueHeight","calculateFeatureMeasureBounds","valueField","type","value","pointX","featureBar","verticalFeatureBar","feature","categoryTextSize","categoryLabelStyle","categorySize","categoryOptions","drawcategory","categoryFontColor","animation","enable","doValueBarAnimation","pointY","featureBarOptions","valueFill","valueBorder","setAttribute","lPointX","lPointY","renderComparativeSymbol","renderCommonComparativeSymbol","scaleLength","y1","y2","x1","comparativeGroup","minimum","delta","targetWidth","temp","values","targetTypes","targetType","targetTypeLength","compareMeasureOptions","svgElement","k","targetField","concat","getTargetElement","doTargetBarAnimation","shapeObject","shapeElement","strokeWidth","size","lx","ly","className","compareMeasure","compareVMeasure","drawLine","targetColor","drawCircle","crossDirection","drawPath","x2","min","lastPointX","loc","valueDiff","orientation_1","toLowerCase","stringLength","toString","labelStyle","Math","abs","scale","valueBarElement","animateOption","animateDuration","animateSeries","duration","effectType","isValuePlot","valueX","valueY","elementBarHeight","getBoundingClientRect","elementBarWidth","centerX","centerY","valueActual","parseInt","getAttribute","style","visibility","animate","delay","progress","args","timeStamp","model","index","targetBarelement","option","parseFloat","animateRect","_this","effect","threshold"],"sources":["D:/Theme/package/node_modules/@syncfusion/ej2-charts/src/bullet-chart/renderer/scale-render.js"],"sourcesContent":["import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Rect, measureText, textElement, PathOption } from '@syncfusion/ej2-svg-base';\nimport { RectOption, CircleOption } from '../../common/utils/helper';\nimport { Animation } from '@syncfusion/ej2-base';\nimport { getAnimationFunction, } from '../../common/utils/helper';\n/**\n * class for Bullet chart Scale Group\n */\nvar ScaleGroup = /** @class */ (function () {\n    function ScaleGroup(bulletChart) {\n        this.comparative = [];\n        //super();\n        this.dataSource = bulletChart.dataSource;\n        this.isVertical = (bulletChart.orientation === 'Vertical');\n        this.isTicksInside = (bulletChart.tickPosition === 'Inside');\n        this.isLabelsInside = (bulletChart.labelPosition === 'Inside');\n        this.isHorizontal = (bulletChart.orientation === 'Horizontal');\n        this.isLeft = bulletChart.titlePosition === 'Left';\n        this.isRight = bulletChart.titlePosition === 'Right';\n        this.isTop = bulletChart.titlePosition === 'Top';\n        this.location = 10;\n        this.featureBarBounds = [];\n        this.majorTickSize = bulletChart.majorTickLines.height;\n        this.labelOffset = 15;\n        this.labelSize = 12;\n        this.bulletChart = bulletChart;\n        this.isLabelBelow = !this.bulletChart.opposedPosition;\n        this.scaleOrientation = this.bulletChart.orientation;\n        this.rangeColor = [];\n    }\n    /**\n     * To render range scale of the bulletChart graph\n     * @param scaleGroup\n     */\n    ScaleGroup.prototype.drawScaleGroup = function (scaleGroup) {\n        var rangeGroup = this.bulletChart.renderer.createGroup({ 'id': this.bulletChart.svgObject.id + '_rangeGroup' });\n        var max = this.bulletChart.maximum;\n        var ranges = this.bulletChart.ranges;\n        this.scaleSettingsGroup = scaleGroup;\n        var rect;\n        var bullet = this.bulletChart;\n        var enableRtl = bullet.enableRtl;\n        var initialRect = bullet.initialClipRect;\n        var locX = initialRect.x + ((enableRtl && bullet.orientation === 'Horizontal') ? initialRect.width : 0);\n        var locY = initialRect.y + ((!enableRtl && bullet.orientation === 'Vertical') ? initialRect.height : 0);\n        var area = 0;\n        bullet.rangeCollection = [];\n        var start = 0;\n        var range = (bullet.orientation === 'Horizontal') ? initialRect.width : initialRect.height;\n        var fillRange = (bullet.orientation === 'Horizontal') ? initialRect.height : initialRect.width;\n        for (var i = 0; i < ranges.length; i++) {\n            area = (range) * ((ranges[i].end - start) / max);\n            if (bullet.orientation === 'Horizontal') {\n                locX -= (enableRtl) ? area : 0;\n            }\n            else {\n                locY -= (!enableRtl) ? area : 0;\n            }\n            rect = new RectOption(bullet.svgObject.id + '_range_' + i, \n            // tslint:disable-next-line:no-string-literal\n            ranges[i].color || this.bulletChart.themeStyle.rangeStrokes[i]['color'], { width: 1 }, ranges[i].opacity, new Rect(locX, locY, ((bullet.orientation === 'Horizontal') ? area : fillRange), ((bullet.orientation === 'Horizontal') ? fillRange : area)));\n            var svgRect = bullet.renderer.drawRectangle(rect);\n            rangeGroup.appendChild(svgRect);\n            scaleGroup.appendChild(rangeGroup);\n            if (bullet.orientation === 'Horizontal') {\n                locX += (enableRtl) ? 0 : area;\n            }\n            else {\n                locY += (!enableRtl) ? 0 : area;\n            }\n            bullet.rangeCollection.push(area);\n            start = ranges[i].end;\n        }\n        return this.bulletChart.rangeCollection;\n    };\n    ScaleGroup.prototype.sortRangeCollection = function (a, b) {\n        return (a - b);\n    };\n    /**\n     * To render the feature bar of the bulletChart chart\n     * @param dataCount\n     */\n    ScaleGroup.prototype.renderFeatureBar = function (dataCount) {\n        if (dataCount === 0) {\n            return;\n        }\n        this.renderCommonFeatureBar(dataCount, this.isHorizontal);\n    };\n    /**\n     * To render the horizontal feature bar of the bulletChart chart\n     * @param dataCount\n     */\n    ScaleGroup.prototype.renderCommonFeatureBar = function (dataCount, isHorizontal) {\n        var categoryValue;\n        var dotWidth = 6;\n        var padding = 5;\n        var bulletChart = this.bulletChart;\n        var initialBoundsStart = isHorizontal ? (bulletChart.initialClipRect.y + bulletChart.initialClipRect.height) :\n            bulletChart.initialClipRect.x;\n        var lPoint;\n        var featueGroup = bulletChart.renderer.createGroup({ 'id': bulletChart.svgObject.id + '_featureGroup' });\n        var data;\n        var featureBarSize = (isHorizontal ? bulletChart.initialClipRect.height : bulletChart.initialClipRect.width) / dataCount;\n        var bounds;\n        for (var i = 0; i < dataCount; i++) {\n            data = bulletChart.dataSource[i];\n            categoryValue = data[bulletChart.categoryField];\n            if (isHorizontal) {\n                lPoint = initialBoundsStart - (featureBarSize * i) - (featureBarSize + bulletChart.valueHeight) / 2;\n            }\n            else {\n                lPoint = initialBoundsStart + (featureBarSize * i) + (featureBarSize / 2) - bulletChart.valueHeight / 2;\n            }\n            bounds = this.calculateFeatureMeasureBounds(data[bulletChart.valueField], categoryValue, isHorizontal);\n            if (data && bulletChart.type === 'Dot') {\n                var value = data[bulletChart.valueField];\n                if (isHorizontal) {\n                    bounds.pointX = bounds.pointX + (((value > 0) && !bulletChart.enableRtl) ||\n                        ((value < 0) && bulletChart.enableRtl) ? (bounds.width) : 0) - dotWidth / 2;\n                }\n                else {\n                    bounds.pointX = bounds.pointX + (((value > 0) && bulletChart.enableRtl) ||\n                        ((value < 0) && !bulletChart.enableRtl) ? (bounds.width) : 0) - dotWidth / 2;\n                }\n                bounds.width = dotWidth;\n            }\n            // Drawing feature bar rect element\n            if (bounds) {\n                var svgRect = isHorizontal ? this.featureBar(bounds.pointX, lPoint, bounds.width, i) :\n                    this.verticalFeatureBar(lPoint, bounds.pointX, bounds.width, i);\n                featueGroup.appendChild(svgRect);\n                this.feature = svgRect;\n                this.scaleSettingsGroup.appendChild(featueGroup);\n                this.featureBarBounds[i] = { x: bounds.pointX, y: lPoint, width: bounds.width, height: bulletChart.valueHeight };\n                // Drawing category text element\n                if (!isNullOrUndefined(categoryValue)) {\n                    var categoryTextSize = measureText(categoryValue, bulletChart.categoryLabelStyle);\n                    var categorySize = isHorizontal ? categoryTextSize.width : categoryTextSize.height;\n                    var initialRect = bulletChart.initialClipRect;\n                    var x = void 0;\n                    var categoryOptions = void 0;\n                    if (isHorizontal) {\n                        x = (bulletChart.enableRtl) ? (initialRect.x + initialRect.width + padding + categorySize / 2) :\n                            initialRect.x - padding - categorySize / 2;\n                        categoryOptions = this.drawcategory(x, lPoint, categoryValue);\n                    }\n                    else {\n                        x = (bulletChart.enableRtl) ? (initialRect.y - padding - categorySize / 2) :\n                            initialRect.y + initialRect.height + padding + categorySize / 2;\n                        categoryOptions = this.drawcategory(lPoint + bulletChart.valueHeight / 2, x, categoryValue);\n                    }\n                    textElement(categoryOptions, bulletChart.categoryLabelStyle, bulletChart.categoryLabelStyle.color || bulletChart.themeStyle.categoryFontColor, this.scaleSettingsGroup);\n                }\n            }\n            if (bulletChart.animation.enable) {\n                this.doValueBarAnimation(this.scaleSettingsGroup);\n            }\n        }\n    };\n    ScaleGroup.prototype.featureBar = function (pointX, pointY, width, i) {\n        var featureBarOptions = new RectOption(this.bulletChart.svgObject.id + '_FeatureMeasure_' + i, this.bulletChart.valueFill, this.bulletChart.valueBorder, 1, new Rect(pointX, pointY, width, this.bulletChart.valueHeight));\n        var svgRect = this.bulletChart.renderer.drawRectangle(featureBarOptions);\n        svgRect.setAttribute('class', this.bulletChart.svgObject.id + '_FeatureMeasure');\n        svgRect.id = this.bulletChart.svgObject.id + '_FeatureMeasure_' + i;\n        return svgRect;\n    };\n    ScaleGroup.prototype.verticalFeatureBar = function (pointX, pointY, width, i) {\n        var featureBarOptions = new RectOption(this.bulletChart.svgObject.id + '_FeatureMeasure_' + i, this.bulletChart.valueFill, this.bulletChart.valueBorder, 1, new Rect(pointX, pointY, this.bulletChart.valueHeight, width));\n        var svgRect = this.bulletChart.renderer.drawRectangle(featureBarOptions);\n        svgRect.setAttribute('class', this.bulletChart.svgObject.id + '_FeatureMeasure');\n        svgRect.id = this.bulletChart.svgObject.id + '_FeatureMeasure_' + i;\n        return svgRect;\n    };\n    ScaleGroup.prototype.drawcategory = function (lPointX, lPointY, categoryValue) {\n        var categoryOptions = {\n            'id': '',\n            'anchor': 'middle',\n            'x': lPointX,\n            'y': lPointY + (this.bulletChart.valueHeight),\n            'transform': '',\n            'text': categoryValue,\n            'baseLine': '',\n            'labelRotation': 0\n        };\n        return categoryOptions;\n    };\n    /**\n     * To render comparative symbol of the bulletChart chart\n     * @param dataCount\n     */\n    ScaleGroup.prototype.renderComparativeSymbol = function (dataCount) {\n        if (dataCount === 0) {\n            return;\n        }\n        this.renderCommonComparativeSymbol(dataCount, this.isHorizontal);\n    };\n    ScaleGroup.prototype.renderCommonComparativeSymbol = function (dataCount, isHorizontal) {\n        var bulletChart = this.bulletChart;\n        var value;\n        var rect = bulletChart.initialClipRect;\n        var scaleLength = isHorizontal ? rect.width : rect.height;\n        var y1;\n        var y2;\n        var x1;\n        var pointY = isHorizontal ? (rect.y + rect.height) : rect.x;\n        var comparativeGroup = bulletChart.renderer.createGroup({ 'id': bulletChart.svgObject.id + '_comparativeGroup' });\n        var minimum = bulletChart.minimum;\n        var maximum = bulletChart.maximum;\n        var delta = maximum - minimum;\n        var targetWidth = bulletChart.targetWidth;\n        var pointX = isHorizontal ? (rect.x - (targetWidth / 2)) : (rect.y + rect.height);\n        var temp;\n        var values = [];\n        var targetTypes = bulletChart.targetTypes;\n        var targetType = 'Rect';\n        var targetTypeLength = targetTypes.length;\n        var featureBarSize = (isHorizontal ? rect.height : rect.width) / dataCount;\n        var compareMeasureOptions;\n        var svgElement;\n        for (var k = 0; k < dataCount; k++) {\n            value = bulletChart.dataSource[k][bulletChart.targetField];\n            values = values.concat(value);\n            for (var i = 0; i < values.length; i++) {\n                targetType = targetTypes[i % targetTypeLength];\n                if (values[i] >= minimum && values[i] <= maximum) {\n                    if (isHorizontal) {\n                        temp = pointY - (featureBarSize * k) - (featureBarSize / 2);\n                    }\n                    else {\n                        temp = pointY + (featureBarSize * k) + (featureBarSize / 2);\n                    }\n                    y1 = temp - targetWidth * 1.5;\n                    y2 = temp + targetWidth * 1.5;\n                    temp = (scaleLength / (delta / (delta - (maximum - values[i]))));\n                    if (isHorizontal) {\n                        x1 = pointX + (bulletChart.enableRtl ? (scaleLength - temp) : temp);\n                    }\n                    else {\n                        x1 = pointX - (bulletChart.enableRtl ? (scaleLength - temp) : temp);\n                    }\n                    svgElement = this.getTargetElement(targetType, isHorizontal, x1, y1, y2, values[i], k);\n                    this.comparative.push(svgElement);\n                    comparativeGroup.appendChild(svgElement);\n                    y1 = 0;\n                    y2 = 0;\n                }\n                this.scaleSettingsGroup.appendChild(comparativeGroup);\n            }\n            values = [];\n            if (bulletChart.animation.enable) {\n                this.doTargetBarAnimation(0);\n            }\n        }\n    };\n    ScaleGroup.prototype.getTargetElement = function (targetType, isHorizontal, x1, y1, y2, value, k) {\n        var shapeObject;\n        var shapeElement;\n        var bulletChart = this.bulletChart;\n        var strokeWidth = (targetType === 'Cross') ? bulletChart.targetWidth - 1 : 1;\n        var size = (targetType === 'Circle') ? bulletChart.targetWidth - 1 : bulletChart.targetWidth;\n        var lx = isHorizontal ? x1 + (size / 2) : y1 + ((y2 - y1) / 2);\n        var ly = isHorizontal ? y1 + ((y2 - y1) / 2) : x1;\n        var id = bulletChart.svgObject.id + '_ComparativeMeasure_' + k;\n        var className = bulletChart.svgObject.id + '_ComparativeMeasure';\n        if (targetType === 'Rect') {\n            shapeObject = isHorizontal ? this.compareMeasure(x1, y1, y2, k, value) : this.compareVMeasure(y1, y2, x1, k, value);\n            shapeElement = bulletChart.renderer.drawLine(shapeObject);\n        }\n        else if (targetType === 'Circle') {\n            shapeObject = new CircleOption(id, bulletChart.targetColor, { width: 1, color: bulletChart.targetColor || 'black' }, 1, lx, ly, size);\n            shapeElement = bulletChart.renderer.drawCircle(shapeObject);\n        }\n        else {\n            var crossDirection = 'M ' + (lx - size) + ' ' + (ly - size) + ' L ' + (lx + size) + ' ' + (ly + size) + ' M ' +\n                (lx - size) + ' ' + (ly + size) + ' L ' + (lx + size) + ' ' + (ly - size);\n            shapeObject = new PathOption(id, 'transparent', strokeWidth, bulletChart.targetColor, 1, '', crossDirection);\n            shapeElement = bulletChart.renderer.drawPath(shapeObject);\n        }\n        shapeElement.setAttribute('class', className);\n        return shapeElement;\n    };\n    ScaleGroup.prototype.compareMeasure = function (x1, y1, y2, i, value) {\n        var bulletChart = this.bulletChart;\n        var compareMeasureOptions = {\n            'class': bulletChart.svgObject.id + '_ComparativeMeasure',\n            'id': bulletChart.svgObject.id + '_ComparativeMeasure_' + i,\n            'x1': (value === bulletChart.maximum) ? x1 - (bulletChart.targetWidth / 2) :\n                (value === bulletChart.minimum) ? x1 + (bulletChart.targetWidth / 2) : x1,\n            'y1': y1,\n            'x2': (value === bulletChart.maximum) ? x1 - (bulletChart.targetWidth / 2) :\n                (value === bulletChart.minimum) ? x1 + (bulletChart.targetWidth / 2) : x1,\n            'y2': y2,\n            'stroke-width': bulletChart.targetWidth,\n            'stroke': bulletChart.targetColor || 'black'\n        };\n        return compareMeasureOptions;\n    };\n    ScaleGroup.prototype.compareVMeasure = function (x1, x2, y1, i, value) {\n        var bulletChart = this.bulletChart;\n        var compareMeasureOptions = {\n            'class': bulletChart.svgObject.id + '_ComparativeMeasure',\n            'id': bulletChart.svgObject.id + '_ComparativeMeasure_' + i,\n            'x1': x1,\n            'y1': y1,\n            'x2': x2,\n            'y2': y1,\n            'stroke-width': bulletChart.targetWidth,\n            'stroke': bulletChart.targetColor || 'black'\n        };\n        return compareMeasureOptions;\n    };\n    /**\n     * To calculate the bounds on vertical and horizontal orientation changes\n     * @param value\n     * @param categoryValue\n     */\n    ScaleGroup.prototype.calculateFeatureMeasureBounds = function (value, categoryValue, isHorizontal) {\n        var bulletChart = this.bulletChart;\n        var min = bulletChart.minimum;\n        value = (value < min && min < 0) ? min : value;\n        if (value >= min) {\n            var pointX = void 0;\n            var lastPointX = void 0;\n            var width = void 0;\n            var loc = isHorizontal ? bulletChart.initialClipRect.x : bulletChart.initialClipRect.y;\n            var scaleLength = isHorizontal ? bulletChart.initialClipRect.width : bulletChart.initialClipRect.height;\n            var delta = bulletChart.maximum - bulletChart.minimum;\n            var valueDiff = bulletChart.maximum - value;\n            var orientation_1 = ((!bulletChart.enableRtl) ? 'forward' : 'backward') + this.scaleOrientation.toLowerCase();\n            categoryValue = isNullOrUndefined(categoryValue) ? '' : categoryValue;\n            var stringLength = measureText(categoryValue.toString(), bulletChart.labelStyle).width;\n            switch (orientation_1) {\n                case 'forwardhorizontal':\n                case 'backwardvertical':\n                    pointX = loc + ((min > 0) ? 0 : scaleLength / delta * Math.abs(min));\n                    width = scaleLength / (delta / ((min > 0) ? delta - valueDiff : value));\n                    if (value < 0) {\n                        width = Math.abs(width);\n                        pointX -= width;\n                    }\n                    width = (pointX + width < loc + scaleLength) ? width : loc + scaleLength - pointX;\n                    lastPointX = loc - ((orientation_1 === 'forwardhorizontal') ? (stringLength / 2 + 5) :\n                        this.labelOffset);\n                    break;\n                default:\n                    pointX = loc + (scaleLength - scaleLength / (delta / (delta - valueDiff)));\n                    width = (min > 0) ? scaleLength / (delta / (delta - valueDiff)) : scaleLength / (delta / (value));\n                    if (value < 0) {\n                        width = Math.abs(width);\n                        pointX -= width;\n                    }\n                    if (pointX < loc) {\n                        width = pointX + width - loc;\n                        pointX = loc;\n                    }\n                    lastPointX = loc + scaleLength + ((orientation_1 === 'backwardhorizontal') ? (stringLength / 2 +\n                        5) : 5);\n                    break;\n            }\n            return { pointX: pointX, width: width, lastPointX: lastPointX };\n        }\n        return null;\n    };\n    /**\n     * Animates the feature bar.\n     * @param  {FeatureBar} scale - Defines the feature bar to animate.\n     * @return {void}\n     */\n    ScaleGroup.prototype.doValueBarAnimation = function (scale) {\n        var valueBarElement = this.feature;\n        if (!valueBarElement) {\n            return null;\n        }\n        var animateOption = this.bulletChart.animation;\n        var animateDuration = this.bulletChart.animateSeries ? this.bulletChart.animation.duration : animateOption.duration;\n        var effectType = getAnimationFunction('Linear');\n        var isValuePlot = this.bulletChart.dataSource < 0;\n        var valueX;\n        var valueY;\n        var elementBarHeight = valueBarElement.getBoundingClientRect().height;\n        var elementBarWidth = valueBarElement.getBoundingClientRect().width;\n        var centerX;\n        var centerY;\n        var valueActual;\n        if (this.bulletChart.orientation === 'Horizontal' && valueBarElement) {\n            valueY = parseInt(valueBarElement.getAttribute('height'), 10);\n            valueX = parseInt(valueBarElement.getAttribute('x'), 10);\n            centerY = isValuePlot ? valueY : valueY + elementBarHeight;\n            centerX = valueX;\n        }\n        valueBarElement.style.visibility = 'hidden';\n        new Animation({}).animate(valueBarElement, {\n            duration: animateDuration,\n            delay: animateOption.delay,\n            progress: function (args) {\n                if (args.timeStamp >= args.delay) {\n                    valueBarElement.style.visibility = 'visible';\n                    elementBarWidth = elementBarWidth ? elementBarWidth : 1;\n                    valueActual = effectType(args.timeStamp - args.delay, 0, elementBarWidth, args.duration);\n                    valueBarElement.setAttribute('transform', 'translate(' + centerX + ' ' + centerY +\n                        ') scale(' + (valueActual / elementBarWidth) + ', 1) translate(' + (-centerX) + ' ' + (-centerY) + ')');\n                }\n            },\n            end: function (model) {\n                valueBarElement.setAttribute('transform', 'translate(0,0)');\n                valueBarElement.style.visibility = 'visible';\n            }\n        });\n    };\n    /**\n     * Animates the comparative bar.\n     * @param  {FeatureBar} scale - Defines the feature bar to animate.\n     * @return {void}\n     */\n    ScaleGroup.prototype.doTargetBarAnimation = function (index) {\n        var targetBarelement;\n        var option = this.bulletChart.animation;\n        var x;\n        var y;\n        var centerX;\n        var centerY;\n        targetBarelement = this.comparative[index];\n        if (!targetBarelement) {\n            return null;\n        }\n        if (this.bulletChart.orientation === 'Horizontal' && targetBarelement) {\n            y = parseFloat(targetBarelement.getAttribute('y1')) + parseFloat(targetBarelement.getAttribute('y2'));\n            x = parseFloat(targetBarelement.getAttribute('x1'));\n            centerY = y;\n            centerX = x;\n        }\n        targetBarelement.style.visibility = 'hidden';\n        this.animateRect(targetBarelement, centerX, centerY, index + 1);\n    };\n    ScaleGroup.prototype.animateRect = function (targetBarelement, centerX, centerY, index) {\n        var _this = this;\n        var effect = getAnimationFunction('Linear');\n        var value;\n        var option = this.bulletChart.animation;\n        var threshold = this.comparative.length;\n        var duration = this.bulletChart.animateSeries ? this.bulletChart.animation.duration : option.duration;\n        new Animation({}).animate(targetBarelement, {\n            duration: duration,\n            delay: option.delay,\n            progress: function (args) {\n                if (args.timeStamp >= args.delay) {\n                    targetBarelement.style.visibility = 'visible';\n                    value = effect(args.timeStamp - args.delay, 0, 1, args.duration);\n                    targetBarelement.setAttribute('transform', 'translate(' + centerX + ' ' + centerY / 2 +\n                        ') scale(1,' + (value) + ') translate(' + (-centerX) + ' ' + (-centerY / 2) + ')');\n                }\n            },\n            end: function (model) {\n                targetBarelement.setAttribute('transform', 'translate(0,0)');\n                if (index < threshold) {\n                    _this.doTargetBarAnimation(index + 1);\n                }\n            }\n        });\n    };\n    return ScaleGroup;\n}());\nexport { ScaleGroup };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}