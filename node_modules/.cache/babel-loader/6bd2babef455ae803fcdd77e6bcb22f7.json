{"ast":null,"code":"import axios from'axios';import swal from\"sweetalert\";import{loginConfirmedAction,logout}from'../store/actions/AuthActions';export function signUp(email,password){//axios call\nvar postData={email:email,password:password,returnSecureToken:true};return axios.post(\"https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyD3RPAp3nuETDn9OQimqn_YF6zdzqWITII\",postData);}export function login(email,password){var postData={email:email,password:password,returnSecureToken:true};return axios.post(\"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyD3RPAp3nuETDn9OQimqn_YF6zdzqWITII\",postData);}export function formatError(errorResponse){switch(errorResponse.error.message){case'EMAIL_EXISTS'://return 'Email already exists';\nswal(\"Oops\",\"Email already exists\",\"error\");break;case'EMAIL_NOT_FOUND'://return 'Email not found';\nswal(\"Oops\",\"Email not found\",\"error\",{button:\"Try Again!\"});break;case'INVALID_PASSWORD'://return 'Invalid Password';\nswal(\"Oops\",\"Invalid Password\",\"error\",{button:\"Try Again!\"});break;case'USER_DISABLED':return'User Disabled';default:return'';}}export function saveTokenInLocalStorage(tokenDetails){tokenDetails.expireDate=new Date(new Date().getTime()+tokenDetails.expiresIn*1000);localStorage.setItem('userDetails',JSON.stringify(tokenDetails));}export function runLogoutTimer(dispatch,timer,history){setTimeout(function(){dispatch(logout(history));},timer);}export function checkAutoLogin(dispatch,history){var tokenDetailsString=localStorage.getItem('userDetails');var tokenDetails='';if(!tokenDetailsString){dispatch(logout(history));return;}tokenDetails=JSON.parse(tokenDetailsString);var expireDate=new Date(tokenDetails.expireDate);var todaysDate=new Date();if(todaysDate>expireDate){dispatch(logout(history));return;}dispatch(loginConfirmedAction(tokenDetails));var timer=expireDate.getTime()-todaysDate.getTime();runLogoutTimer(dispatch,timer,history);}","map":{"version":3,"names":["axios","swal","loginConfirmedAction","logout","signUp","email","password","postData","returnSecureToken","post","login","formatError","errorResponse","error","message","button","saveTokenInLocalStorage","tokenDetails","expireDate","Date","getTime","expiresIn","localStorage","setItem","JSON","stringify","runLogoutTimer","dispatch","timer","history","setTimeout","checkAutoLogin","tokenDetailsString","getItem","parse","todaysDate"],"sources":["D:/Theme/package/src/services/AuthService.js"],"sourcesContent":["import axios from 'axios';\nimport swal from \"sweetalert\";\nimport {\n    loginConfirmedAction,\n    logout,\n} from '../store/actions/AuthActions';\n\nexport function signUp(email, password) {\n    //axios call\n\n    const postData = {\n        email,\n        password,\n        returnSecureToken: true,\n    };\n\n    return axios.post(\n        `https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyD3RPAp3nuETDn9OQimqn_YF6zdzqWITII`,\n        postData,\n    );\n}\n\nexport function login(email, password) {\n    const postData = {\n        email,\n        password,\n        returnSecureToken: true,\n    };\n\n    return axios.post(\n        `https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyD3RPAp3nuETDn9OQimqn_YF6zdzqWITII`,\n        postData,\n    );\n}\n\nexport function formatError(errorResponse) {\n    switch (errorResponse.error.message) {\n        case 'EMAIL_EXISTS':\n            //return 'Email already exists';\n            swal(\"Oops\", \"Email already exists\", \"error\");\n            break;\n        case 'EMAIL_NOT_FOUND':\n            //return 'Email not found';\n           swal(\"Oops\", \"Email not found\", \"error\",{ button: \"Try Again!\",});\n           break;\n        case 'INVALID_PASSWORD':\n            //return 'Invalid Password';\n            swal(\"Oops\", \"Invalid Password\", \"error\",{ button: \"Try Again!\",});\n            break;\n        case 'USER_DISABLED':\n            return 'User Disabled';\n\n        default:\n            return '';\n    }\n}\n\nexport function saveTokenInLocalStorage(tokenDetails) {\n    tokenDetails.expireDate = new Date(\n        new Date().getTime() + tokenDetails.expiresIn * 1000,\n    );\n    localStorage.setItem('userDetails', JSON.stringify(tokenDetails));\n}\n\nexport function runLogoutTimer(dispatch, timer, history) {\n    setTimeout(() => {\n        dispatch(logout(history));\n    }, timer);\n}\n\nexport function checkAutoLogin(dispatch, history) {\n    const tokenDetailsString = localStorage.getItem('userDetails');\n    let tokenDetails = '';\n    if (!tokenDetailsString) {\n        dispatch(logout(history));\n        return;\n    }\n\n    tokenDetails = JSON.parse(tokenDetailsString);\n    let expireDate = new Date(tokenDetails.expireDate);\n    let todaysDate = new Date();\n\n    if (todaysDate > expireDate) {\n        dispatch(logout(history));\n        return;\n    }\n    dispatch(loginConfirmedAction(tokenDetails));\n\n    const timer = expireDate.getTime() - todaysDate.getTime();\n    runLogoutTimer(dispatch, timer, history);\n}\n"],"mappings":"AAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,MAAOC,KAAP,KAAiB,YAAjB,CACA,OACIC,oBADJ,CAEIC,MAFJ,KAGO,8BAHP,CAKA,MAAO,SAASC,OAAT,CAAgBC,KAAhB,CAAuBC,QAAvB,CAAiC,CACpC;AAEA,GAAMC,SAAQ,CAAG,CACbF,KAAK,CAALA,KADa,CAEbC,QAAQ,CAARA,QAFa,CAGbE,iBAAiB,CAAE,IAHN,CAAjB,CAMA,MAAOR,MAAK,CAACS,IAAN,yGAEHF,QAFG,CAAP,CAIH,CAED,MAAO,SAASG,MAAT,CAAeL,KAAf,CAAsBC,QAAtB,CAAgC,CACnC,GAAMC,SAAQ,CAAG,CACbF,KAAK,CAALA,KADa,CAEbC,QAAQ,CAARA,QAFa,CAGbE,iBAAiB,CAAE,IAHN,CAAjB,CAMA,MAAOR,MAAK,CAACS,IAAN,qHAEHF,QAFG,CAAP,CAIH,CAED,MAAO,SAASI,YAAT,CAAqBC,aAArB,CAAoC,CACvC,OAAQA,aAAa,CAACC,KAAd,CAAoBC,OAA5B,EACI,IAAK,cAAL,CACI;AACAb,IAAI,CAAC,MAAD,CAAS,sBAAT,CAAiC,OAAjC,CAAJ,CACA,MACJ,IAAK,iBAAL,CACI;AACDA,IAAI,CAAC,MAAD,CAAS,iBAAT,CAA4B,OAA5B,CAAoC,CAAEc,MAAM,CAAE,YAAV,CAApC,CAAJ,CACA,MACH,IAAK,kBAAL,CACI;AACAd,IAAI,CAAC,MAAD,CAAS,kBAAT,CAA6B,OAA7B,CAAqC,CAAEc,MAAM,CAAE,YAAV,CAArC,CAAJ,CACA,MACJ,IAAK,eAAL,CACI,MAAO,eAAP,CAEJ,QACI,MAAO,EAAP,CAjBR,CAmBH,CAED,MAAO,SAASC,wBAAT,CAAiCC,YAAjC,CAA+C,CAClDA,YAAY,CAACC,UAAb,CAA0B,GAAIC,KAAJ,CACtB,GAAIA,KAAJ,GAAWC,OAAX,GAAuBH,YAAY,CAACI,SAAb,CAAyB,IAD1B,CAA1B,CAGAC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAoCC,IAAI,CAACC,SAAL,CAAeR,YAAf,CAApC,EACH,CAED,MAAO,SAASS,eAAT,CAAwBC,QAAxB,CAAkCC,KAAlC,CAAyCC,OAAzC,CAAkD,CACrDC,UAAU,CAAC,UAAM,CACbH,QAAQ,CAACxB,MAAM,CAAC0B,OAAD,CAAP,CAAR,CACH,CAFS,CAEPD,KAFO,CAAV,CAGH,CAED,MAAO,SAASG,eAAT,CAAwBJ,QAAxB,CAAkCE,OAAlC,CAA2C,CAC9C,GAAMG,mBAAkB,CAAGV,YAAY,CAACW,OAAb,CAAqB,aAArB,CAA3B,CACA,GAAIhB,aAAY,CAAG,EAAnB,CACA,GAAI,CAACe,kBAAL,CAAyB,CACrBL,QAAQ,CAACxB,MAAM,CAAC0B,OAAD,CAAP,CAAR,CACA,OACH,CAEDZ,YAAY,CAAGO,IAAI,CAACU,KAAL,CAAWF,kBAAX,CAAf,CACA,GAAId,WAAU,CAAG,GAAIC,KAAJ,CAASF,YAAY,CAACC,UAAtB,CAAjB,CACA,GAAIiB,WAAU,CAAG,GAAIhB,KAAJ,EAAjB,CAEA,GAAIgB,UAAU,CAAGjB,UAAjB,CAA6B,CACzBS,QAAQ,CAACxB,MAAM,CAAC0B,OAAD,CAAP,CAAR,CACA,OACH,CACDF,QAAQ,CAACzB,oBAAoB,CAACe,YAAD,CAArB,CAAR,CAEA,GAAMW,MAAK,CAAGV,UAAU,CAACE,OAAX,GAAuBe,UAAU,CAACf,OAAX,EAArC,CACAM,cAAc,CAACC,QAAD,CAAWC,KAAX,CAAkBC,OAAlB,CAAd,CACH"},"metadata":{},"sourceType":"module"}