{"ast":null,"code":"/*!\n * chartjs-plugin-streaming v1.8.0\n * https://nagix.github.io/chartjs-plugin-streaming\n * (c) 2019 Akihiko Kusanagi\n * Released under the MIT license\n */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('chart.js'), require('moment')) : typeof define === 'function' && define.amd ? define(['chart.js', 'moment'], factory) : (global = global || self, global.ChartStreaming = factory(global.Chart, global.moment));\n})(this, function (Chart, moment) {\n  'use strict';\n\n  Chart = Chart && Chart.hasOwnProperty('default') ? Chart['default'] : Chart;\n  moment = moment && moment.hasOwnProperty('default') ? moment['default'] : moment;\n  var helpers = Chart.helpers;\n\n  var cancelAnimFrame = function () {\n    if (typeof window !== 'undefined') {\n      return window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.oCancelAnimationFrame || window.msCancelAnimationFrame || function (id) {\n        return window.clearTimeout(id);\n      };\n    }\n  }();\n\n  var StreamingHelper = {\n    startFrameRefreshTimer: function (context, func) {\n      if (!context.frameRequestID) {\n        var frameRefresh = function () {\n          func();\n          context.frameRequestID = helpers.requestAnimFrame.call(window, frameRefresh);\n        };\n\n        context.frameRequestID = helpers.requestAnimFrame.call(window, frameRefresh);\n      }\n    },\n    stopFrameRefreshTimer: function (context) {\n      var frameRequestID = context.frameRequestID;\n\n      if (frameRequestID) {\n        cancelAnimFrame.call(window, frameRequestID);\n        delete context.frameRequestID;\n      }\n    }\n  };\n  var helpers$1 = Chart.helpers;\n  var canvasHelpers = helpers$1.canvas;\n  var scaleService = Chart.scaleService;\n  var TimeScale = scaleService.getScaleConstructor('time');\n\n  scaleService.getScaleConstructor = function (type) {\n    // For backwards compatibility\n    if (type === 'time') {\n      type = 'realtime';\n    }\n\n    return this.constructors.hasOwnProperty(type) ? this.constructors[type] : undefined;\n  }; // For Chart.js 2.7.x backward compatibility\n\n\n  var defaultAdapter = {\n    // Ported from Chart.js 2.8.0-rc.1 35273ee\n    parse: function (value, format) {\n      if (typeof value === 'string' && typeof format === 'string') {\n        value = moment(value, format);\n      } else if (!(value instanceof moment)) {\n        value = moment(value);\n      }\n\n      return value.isValid() ? value.valueOf() : null;\n    }\n  }; // Ported from Chart.js 2.8.0-rc.1 35273ee. Modified for Chart.js 2.7.x backward compatibility.\n\n  function toTimestamp(scale, input) {\n    var adapter = scale._adapter || defaultAdapter;\n    var options = scale.options.time;\n    var parser = options.parser;\n    var format = parser || options.format;\n    var value = input;\n\n    if (typeof parser === 'function') {\n      value = parser(value);\n    } // Only parse if its not a timestamp already\n\n\n    if (typeof value !== 'number' && !(value instanceof Number) || !isFinite(value)) {\n      value = typeof format === 'string' ? adapter.parse(value, format) : adapter.parse(value);\n    }\n\n    if (value !== null) {\n      return +value;\n    } // Labels are in an incompatible format and no `parser` has been provided.\n    // The user might still use the deprecated `format` option for parsing.\n\n\n    if (!parser && typeof format === 'function') {\n      value = format(input); // `format` could return something else than a timestamp, if so, parse it\n\n      if (typeof value !== 'number' && !(value instanceof Number) || !isFinite(value)) {\n        value = adapter.parse(value);\n      }\n    }\n\n    return value;\n  } // Ported from Chart.js 2.8.0-rc.1 35273ee\n\n\n  function parse(scale, input) {\n    if (helpers$1.isNullOrUndef(input)) {\n      return null;\n    }\n\n    var options = scale.options.time;\n    var value = toTimestamp(scale, scale.getRightValue(input));\n\n    if (value === null) {\n      return value;\n    }\n\n    if (options.round) {\n      value = +scale._adapter.startOf(value, options.round);\n    }\n\n    return value;\n  }\n\n  function resolveOption(scale, key) {\n    var realtimeOpts = scale.options.realtime;\n    var streamingOpts = scale.chart.options.plugins.streaming;\n    return helpers$1.valueOrDefault(realtimeOpts[key], streamingOpts[key]);\n  }\n\n  var datasetPropertyKeys = ['pointBackgroundColor', 'pointBorderColor', 'pointBorderWidth', 'pointRadius', 'pointRotation', 'pointStyle', 'pointHitRadius', 'pointHoverBackgroundColor', 'pointHoverBorderColor', 'pointHoverBorderWidth', 'pointHoverRadius', 'backgroundColor', 'borderColor', 'borderSkipped', 'borderWidth', 'hoverBackgroundColor', 'hoverBorderColor', 'hoverBorderWidth', 'hoverRadius', 'hitRadius', 'radius', 'rotation'];\n\n  function refreshData(scale) {\n    var chart = scale.chart;\n    var id = scale.id;\n    var duration = resolveOption(scale, 'duration');\n    var delay = resolveOption(scale, 'delay');\n    var ttl = resolveOption(scale, 'ttl');\n    var pause = resolveOption(scale, 'pause');\n    var onRefresh = resolveOption(scale, 'onRefresh');\n    var max = scale.max;\n    var min = Date.now() - (isNaN(ttl) ? duration + delay : ttl);\n    var meta, data, length, i, start, count, removalRange;\n\n    if (onRefresh) {\n      onRefresh(chart);\n    } // Remove old data\n\n\n    chart.data.datasets.forEach(function (dataset, datasetIndex) {\n      meta = chart.getDatasetMeta(datasetIndex);\n\n      if (id === meta.xAxisID || id === meta.yAxisID) {\n        data = dataset.data;\n        length = data.length;\n\n        if (pause) {\n          // If the scale is paused, preserve the visible data points\n          for (i = 0; i < length; ++i) {\n            if (!(scale._getTimeForIndex(i, datasetIndex) < max)) {\n              break;\n            }\n          }\n\n          start = i + 2;\n        } else {\n          start = 0;\n        }\n\n        for (i = start; i < length; ++i) {\n          if (!(scale._getTimeForIndex(i, datasetIndex) <= min)) {\n            break;\n          }\n        }\n\n        count = i - start;\n\n        if (isNaN(ttl)) {\n          // Keep the last two data points outside the range not to affect the existing bezier curve\n          count = Math.max(count - 2, 0);\n        }\n\n        data.splice(start, count);\n        datasetPropertyKeys.forEach(function (key) {\n          if (dataset.hasOwnProperty(key) && helpers$1.isArray(dataset[key])) {\n            dataset[key].splice(start, count);\n          }\n        });\n        helpers$1.each(dataset.datalabels, function (value) {\n          if (helpers$1.isArray(value)) {\n            value.splice(start, count);\n          }\n        });\n\n        if (typeof data[0] !== 'object') {\n          removalRange = {\n            start: start,\n            count: count\n          };\n        }\n      }\n    });\n\n    if (removalRange) {\n      chart.data.labels.splice(removalRange.start, removalRange.count);\n    }\n\n    chart.update({\n      preservation: true\n    });\n  }\n\n  function stopDataRefreshTimer(scale) {\n    var realtime = scale.realtime;\n    var refreshTimerID = realtime.refreshTimerID;\n\n    if (refreshTimerID) {\n      clearInterval(refreshTimerID);\n      delete realtime.refreshTimerID;\n      delete realtime.refreshInterval;\n    }\n  }\n\n  function startDataRefreshTimer(scale) {\n    var realtime = scale.realtime;\n    var interval = resolveOption(scale, 'refresh');\n    realtime.refreshTimerID = setInterval(function () {\n      var newInterval = resolveOption(scale, 'refresh');\n      refreshData(scale);\n\n      if (realtime.refreshInterval !== newInterval && !isNaN(newInterval)) {\n        stopDataRefreshTimer(scale);\n        startDataRefreshTimer(scale);\n      }\n    }, interval);\n    realtime.refreshInterval = interval;\n  }\n\n  var transitionKeys = {\n    x: {\n      data: ['x', 'controlPointPreviousX', 'controlPointNextX'],\n      dataset: ['x'],\n      tooltip: ['x', 'caretX']\n    },\n    y: {\n      data: ['y', 'controlPointPreviousY', 'controlPointNextY'],\n      dataset: ['y'],\n      tooltip: ['y', 'caretY']\n    }\n  };\n\n  function transition(element, keys, translate) {\n    var start = element._start || {};\n    var view = element._view || {};\n    var model = element._model || {};\n    var i, ilen;\n\n    for (i = 0, ilen = keys.length; i < ilen; ++i) {\n      var key = keys[i];\n\n      if (start.hasOwnProperty(key)) {\n        start[key] -= translate;\n      }\n\n      if (view.hasOwnProperty(key) && view !== start) {\n        view[key] -= translate;\n      }\n\n      if (model.hasOwnProperty(key) && model !== view) {\n        model[key] -= translate;\n      }\n    }\n  }\n\n  function scroll(scale) {\n    var chart = scale.chart;\n    var realtime = scale.realtime;\n    var duration = resolveOption(scale, 'duration');\n    var delay = resolveOption(scale, 'delay');\n    var id = scale.id;\n    var tooltip = chart.tooltip;\n    var activeTooltip = tooltip._active;\n    var now = Date.now();\n    var length, keys, offset, meta, elements, i, ilen;\n\n    if (scale.isHorizontal()) {\n      length = scale.width;\n      keys = transitionKeys.x;\n    } else {\n      length = scale.height;\n      keys = transitionKeys.y;\n    }\n\n    offset = length * (now - realtime.head) / duration;\n\n    if (scale.options.ticks.reverse) {\n      offset = -offset;\n    } // Shift all the elements leftward or upward\n\n\n    helpers$1.each(chart.data.datasets, function (dataset, datasetIndex) {\n      meta = chart.getDatasetMeta(datasetIndex);\n\n      if (id === meta.xAxisID || id === meta.yAxisID) {\n        elements = meta.data || [];\n\n        for (i = 0, ilen = elements.length; i < ilen; ++i) {\n          transition(elements[i], keys.data, offset);\n        }\n\n        if (meta.dataset) {\n          transition(meta.dataset, keys.dataset, offset);\n        }\n      }\n    }); // Shift tooltip leftward or upward\n\n    if (activeTooltip && activeTooltip[0]) {\n      meta = chart.getDatasetMeta(activeTooltip[0]._datasetIndex);\n\n      if (id === meta.xAxisID || id === meta.yAxisID) {\n        transition(tooltip, keys.tooltip, offset);\n      }\n    }\n\n    scale.max = scale._table[1].time = now - delay;\n    scale.min = scale._table[0].time = scale.max - duration;\n    realtime.head = now;\n  }\n\n  var defaultConfig = {\n    position: 'bottom',\n    distribution: 'linear',\n    bounds: 'data',\n    adapters: {},\n    time: {\n      parser: false,\n      // false == a pattern string from http://momentjs.com/docs/#/parsing/string-format/ or a custom callback that converts its argument to a moment\n      format: false,\n      // DEPRECATED false == date objects, moment object, callback or a pattern string from http://momentjs.com/docs/#/parsing/string-format/\n      unit: false,\n      // false == automatic or override with week, month, year, etc.\n      round: false,\n      // none, or override with week, month, year, etc.\n      displayFormat: false,\n      // DEPRECATED\n      isoWeekday: false,\n      // override week start day - see http://momentjs.com/docs/#/get-set/iso-weekday/\n      minUnit: 'millisecond',\n      // defaults to unit's corresponding unitFormat below or override using pattern string from http://momentjs.com/docs/#/displaying/format/\n      displayFormats: {\n        millisecond: 'h:mm:ss.SSS a',\n        second: 'h:mm:ss a',\n        minute: 'h:mm a',\n        hour: 'hA',\n        day: 'MMM D',\n        week: 'll',\n        month: 'MMM YYYY',\n        quarter: '[Q]Q - YYYY',\n        year: 'YYYY'\n      }\n    },\n    realtime: {},\n    ticks: {\n      autoSkip: false,\n      source: 'auto',\n      major: {\n        enabled: true\n      }\n    }\n  };\n  var RealTimeScale = TimeScale.extend({\n    initialize: function () {\n      var me = this;\n      TimeScale.prototype.initialize.apply(me, arguments); // For backwards compatibility\n\n      if (me.options.type === 'time' && !me.chart.options.plugins.streaming) {\n        return;\n      }\n\n      me.realtime = me.realtime || {};\n      startDataRefreshTimer(me);\n    },\n    update: function () {\n      var me = this;\n      var realtime = me.realtime; // For backwards compatibility\n\n      if (me.options.type === 'time' && !me.chart.options.plugins.streaming) {\n        return TimeScale.prototype.update.apply(me, arguments);\n      }\n\n      if (resolveOption(me, 'pause')) {\n        StreamingHelper.stopFrameRefreshTimer(realtime);\n      } else {\n        StreamingHelper.startFrameRefreshTimer(realtime, function () {\n          scroll(me);\n        });\n        realtime.head = Date.now();\n      }\n\n      return TimeScale.prototype.update.apply(me, arguments);\n    },\n    buildTicks: function () {\n      var me = this;\n      var options = me.options; // For backwards compatibility\n\n      if (options.type === 'time' && !me.chart.options.plugins.streaming) {\n        return TimeScale.prototype.buildTicks.apply(me, arguments);\n      }\n\n      var timeOpts = options.time;\n      var majorTicksOpts = options.ticks.major;\n      var duration = resolveOption(me, 'duration');\n      var delay = resolveOption(me, 'delay');\n      var refresh = resolveOption(me, 'refresh');\n      var bounds = options.bounds;\n      var distribution = options.distribution;\n      var offset = options.offset;\n      var minTime = timeOpts.min;\n      var maxTime = timeOpts.max;\n      var majorEnabled = majorTicksOpts.enabled;\n      var max = me.realtime.head - delay;\n      var min = max - duration;\n      var maxArray = [max + refresh, max];\n      var ticks;\n      options.bounds = undefined;\n      options.distribution = 'linear';\n      options.offset = false;\n      timeOpts.min = -1e15;\n      timeOpts.max = 1e15;\n      majorTicksOpts.enabled = true;\n      Object.defineProperty(me, 'min', {\n        get: function () {\n          return min;\n        },\n        set: helpers$1.noop\n      });\n      Object.defineProperty(me, 'max', {\n        get: function () {\n          return maxArray.shift();\n        },\n        set: helpers$1.noop\n      });\n      ticks = TimeScale.prototype.buildTicks.apply(me, arguments);\n      delete me.min;\n      delete me.max;\n      me.min = min;\n      me.max = max;\n      options.bounds = bounds;\n      options.distribution = distribution;\n      options.offset = offset;\n      timeOpts.min = minTime;\n      timeOpts.max = maxTime;\n      majorTicksOpts.enabled = majorEnabled;\n      me._table = [{\n        time: min,\n        pos: 0\n      }, {\n        time: max,\n        pos: 1\n      }];\n      return ticks;\n    },\n    fit: function () {\n      var me = this;\n      var options = me.options;\n      TimeScale.prototype.fit.apply(me, arguments); // For backwards compatibility\n\n      if (options.type === 'time' && !me.chart.options.plugins.streaming) {\n        return;\n      }\n\n      if (options.ticks.display && options.display && me.isHorizontal()) {\n        me.paddingLeft = 3;\n        me.paddingRight = 3;\n        me.handleMargins();\n      }\n    },\n    draw: function (chartArea) {\n      var me = this;\n      var chart = me.chart; // For backwards compatibility\n\n      if (me.options.type === 'time' && !chart.options.plugins.streaming) {\n        TimeScale.prototype.draw.apply(me, arguments);\n        return;\n      }\n\n      var context = me.ctx;\n      var clipArea = me.isHorizontal() ? {\n        left: chartArea.left,\n        top: 0,\n        right: chartArea.right,\n        bottom: chart.height\n      } : {\n        left: 0,\n        top: chartArea.top,\n        right: chart.width,\n        bottom: chartArea.bottom\n      }; // Clip and draw the scale\n\n      canvasHelpers.clipArea(context, clipArea);\n      TimeScale.prototype.draw.apply(me, arguments);\n      canvasHelpers.unclipArea(context);\n    },\n    destroy: function () {\n      var me = this; // For backwards compatibility\n\n      if (me.options.type === 'time' && !me.chart.options.plugins.streaming) {\n        return;\n      }\n\n      StreamingHelper.stopFrameRefreshTimer(me.realtime);\n      stopDataRefreshTimer(me);\n    },\n\n    /*\n     * @private\n     */\n    _getTimeForIndex: function (index, datasetIndex) {\n      var me = this;\n      var timestamps = me._timestamps;\n      var time = timestamps.datasets[datasetIndex][index];\n      var value;\n\n      if (helpers$1.isNullOrUndef(time)) {\n        value = me.chart.data.datasets[datasetIndex].data[index];\n\n        if (helpers$1.isObject(value)) {\n          time = parse(me, value);\n        } else {\n          time = parse(me, timestamps.labels[index]);\n        }\n      }\n\n      return time;\n    }\n  });\n  scaleService.registerScaleType('realtime', RealTimeScale, defaultConfig);\n  var helpers$2 = Chart.helpers;\n  var canvasHelpers$1 = helpers$2.canvas;\n  Chart.defaults.global.plugins.streaming = {\n    duration: 10000,\n    delay: 0,\n    frameRate: 30,\n    refresh: 1000,\n    onRefresh: null,\n    pause: false,\n    ttl: undefined\n  };\n  /**\n   * Update the chart keeping the current animation but suppressing a new one\n   * @param {object} config - animation options\n   */\n\n  function update(config) {\n    var me = this;\n    var preservation = config && config.preservation;\n    var tooltip, lastActive, tooltipLastActive, lastMouseEvent;\n\n    if (preservation) {\n      tooltip = me.tooltip;\n      lastActive = me.lastActive;\n      tooltipLastActive = tooltip._lastActive;\n      me._bufferedRender = true;\n    }\n\n    Chart.prototype.update.apply(me, arguments);\n\n    if (preservation) {\n      me._bufferedRender = false;\n      me._bufferedRequest = null;\n      me.lastActive = lastActive;\n      tooltip._lastActive = tooltipLastActive;\n\n      if (me.animating) {\n        // If the chart is animating, keep it until the duration is over\n        Chart.animationService.animations.forEach(function (animation) {\n          if (animation.chart === me) {\n            me.render({\n              duration: (animation.numSteps - animation.currentStep) * 16.66\n            });\n          }\n        });\n      } else {\n        // If the chart is not animating, make sure that all elements are at the final positions\n        me.data.datasets.forEach(function (dataset, datasetIndex) {\n          me.getDatasetMeta(datasetIndex).controller.transition(1);\n        });\n      }\n\n      if (tooltip._active) {\n        tooltip.update(true);\n      }\n\n      lastMouseEvent = me.streaming.lastMouseEvent;\n\n      if (lastMouseEvent) {\n        me.eventHandler(lastMouseEvent);\n      }\n    }\n  } // Draw chart at frameRate\n\n\n  function drawChart(chart) {\n    var streaming = chart.streaming;\n    var frameRate = chart.options.plugins.streaming.frameRate;\n    var frameDuration = 1000 / (Math.max(frameRate, 0) || 30);\n    var next = streaming.lastDrawn + frameDuration || 0;\n    var now = Date.now();\n    var lastMouseEvent = streaming.lastMouseEvent;\n\n    if (next <= now) {\n      // Draw only when animation is inactive\n      if (!chart.animating && !chart.tooltip._start) {\n        chart.draw();\n      }\n\n      if (lastMouseEvent) {\n        chart.eventHandler(lastMouseEvent);\n      }\n\n      streaming.lastDrawn = next + frameDuration > now ? next : now;\n    }\n  }\n\n  var StreamingPlugin = {\n    id: 'streaming',\n    beforeInit: function (chart) {\n      var streaming = chart.streaming = chart.streaming || {};\n      var canvas = streaming.canvas = chart.canvas;\n\n      var mouseEventListener = streaming.mouseEventListener = function (event) {\n        var pos = helpers$2.getRelativePosition(event, chart);\n        streaming.lastMouseEvent = {\n          type: 'mousemove',\n          chart: chart,\n          native: event,\n          x: pos.x,\n          y: pos.y\n        };\n      };\n\n      canvas.addEventListener('mousedown', mouseEventListener);\n      canvas.addEventListener('mouseup', mouseEventListener);\n    },\n    afterInit: function (chart) {\n      chart.update = update;\n\n      if (chart.resetZoom) {\n        Chart.Zoom.updateResetZoom(chart);\n      }\n    },\n    beforeUpdate: function (chart) {\n      var chartOpts = chart.options;\n      var scalesOpts = chartOpts.scales;\n\n      if (scalesOpts) {\n        scalesOpts.xAxes.concat(scalesOpts.yAxes).forEach(function (scaleOpts) {\n          if (scaleOpts.type === 'realtime' || scaleOpts.type === 'time') {\n            // Allow Bézier control to be outside the chart\n            chartOpts.elements.line.capBezierPoints = false;\n          }\n        });\n      }\n\n      return true;\n    },\n    afterUpdate: function (chart, options) {\n      var streaming = chart.streaming;\n      var pause = true; // if all scales are paused, stop refreshing frames\n\n      helpers$2.each(chart.scales, function (scale) {\n        if (scale instanceof RealTimeScale) {\n          pause &= helpers$2.valueOrDefault(scale.options.realtime.pause, options.pause);\n        }\n      });\n\n      if (pause) {\n        StreamingHelper.stopFrameRefreshTimer(streaming);\n      } else {\n        StreamingHelper.startFrameRefreshTimer(streaming, function () {\n          drawChart(chart);\n        });\n      }\n    },\n    beforeDatasetDraw: function (chart, args) {\n      var meta = args.meta;\n      var chartArea = chart.chartArea;\n      var clipArea = {\n        left: 0,\n        top: 0,\n        right: chart.width,\n        bottom: chart.height\n      };\n\n      if (meta.xAxisID && meta.controller.getScaleForId(meta.xAxisID) instanceof RealTimeScale) {\n        clipArea.left = chartArea.left;\n        clipArea.right = chartArea.right;\n      }\n\n      if (meta.yAxisID && meta.controller.getScaleForId(meta.yAxisID) instanceof RealTimeScale) {\n        clipArea.top = chartArea.top;\n        clipArea.bottom = chartArea.bottom;\n      }\n\n      canvasHelpers$1.clipArea(chart.ctx, clipArea);\n      return true;\n    },\n    afterDatasetDraw: function (chart) {\n      canvasHelpers$1.unclipArea(chart.ctx);\n    },\n    beforeEvent: function (chart, event) {\n      var streaming = chart.streaming;\n\n      if (event.type === 'mousemove') {\n        // Save mousemove event for reuse\n        streaming.lastMouseEvent = event;\n      } else if (event.type === 'mouseout') {\n        // Remove mousemove event\n        delete streaming.lastMouseEvent;\n      }\n\n      return true;\n    },\n    destroy: function (chart) {\n      var streaming = chart.streaming;\n      var canvas = streaming.canvas;\n      var mouseEventListener = streaming.mouseEventListener;\n      StreamingHelper.stopFrameRefreshTimer(streaming);\n      canvas.removeEventListener('mousedown', mouseEventListener);\n      canvas.removeEventListener('mouseup', mouseEventListener);\n      helpers$2.each(chart.scales, function (scale) {\n        if (scale instanceof RealTimeScale) {\n          scale.destroy();\n        }\n      });\n    }\n  };\n  var helpers$3 = Chart.helpers; // Ported from chartjs-plugin-zoom 0.7.0 3c187b7\n\n  var zoomNS = Chart.Zoom = Chart.Zoom || {}; // Ported from chartjs-plugin-zoom 0.7.0 3c187b7\n\n  zoomNS.zoomFunctions = zoomNS.zoomFunctions || {};\n  zoomNS.panFunctions = zoomNS.panFunctions || {}; // Ported from chartjs-plugin-zoom 0.7.0 3c187b7\n\n  function rangeMaxLimiter(zoomPanOptions, newMax) {\n    if (zoomPanOptions.scaleAxes && zoomPanOptions.rangeMax && !helpers$3.isNullOrUndef(zoomPanOptions.rangeMax[zoomPanOptions.scaleAxes])) {\n      var rangeMax = zoomPanOptions.rangeMax[zoomPanOptions.scaleAxes];\n\n      if (newMax > rangeMax) {\n        newMax = rangeMax;\n      }\n    }\n\n    return newMax;\n  } // Ported from chartjs-plugin-zoom 0.7.0 3c187b7\n\n\n  function rangeMinLimiter(zoomPanOptions, newMin) {\n    if (zoomPanOptions.scaleAxes && zoomPanOptions.rangeMin && !helpers$3.isNullOrUndef(zoomPanOptions.rangeMin[zoomPanOptions.scaleAxes])) {\n      var rangeMin = zoomPanOptions.rangeMin[zoomPanOptions.scaleAxes];\n\n      if (newMin < rangeMin) {\n        newMin = rangeMin;\n      }\n    }\n\n    return newMin;\n  }\n\n  function zoomRealTimeScale(scale, zoom, center, zoomOptions) {\n    var realtimeOpts = scale.options.realtime;\n    var streamingOpts = scale.chart.options.plugins.streaming;\n    var duration = helpers$3.valueOrDefault(realtimeOpts.duration, streamingOpts.duration);\n    var delay = helpers$3.valueOrDefault(realtimeOpts.delay, streamingOpts.delay);\n    var newDuration = duration * (2 - zoom);\n    var maxPercent, limitedDuration;\n\n    if (scale.isHorizontal()) {\n      maxPercent = (scale.right - center.x) / (scale.right - scale.left);\n    } else {\n      maxPercent = (scale.bottom - center.y) / (scale.bottom - scale.top);\n    }\n\n    if (zoom < 1) {\n      limitedDuration = rangeMaxLimiter(zoomOptions, newDuration);\n    } else {\n      limitedDuration = rangeMinLimiter(zoomOptions, newDuration);\n    }\n\n    realtimeOpts.duration = limitedDuration;\n    realtimeOpts.delay = delay + maxPercent * (duration - limitedDuration);\n  }\n\n  function panRealTimeScale(scale, delta, panOptions) {\n    var realtimeOpts = scale.options.realtime;\n    var streamingOpts = scale.chart.options.plugins.streaming;\n    var delay = helpers$3.valueOrDefault(realtimeOpts.delay, streamingOpts.delay);\n    var newDelay = delay + (scale.getValueForPixel(delta) - scale.getValueForPixel(0));\n\n    if (delta > 0) {\n      realtimeOpts.delay = rangeMaxLimiter(panOptions, newDelay);\n    } else {\n      realtimeOpts.delay = rangeMinLimiter(panOptions, newDelay);\n    }\n  }\n\n  zoomNS.zoomFunctions.realtime = zoomRealTimeScale;\n  zoomNS.panFunctions.realtime = panRealTimeScale;\n\n  function updateResetZoom(chart) {\n    // For chartjs-plugin-zoom 0.6.6 backward compatibility\n    var zoom = chart.$zoom || {\n      _originalOptions: {}\n    };\n    var resetZoom = chart.resetZoom;\n    var update = chart.update;\n\n    var resetZoomAndUpdate = function () {\n      helpers$3.each(chart.scales, function (scale) {\n        var realtimeOptions = scale.options.realtime;\n        var originalOptions = zoom._originalOptions[scale.id] || scale.originalOptions;\n\n        if (realtimeOptions) {\n          if (originalOptions) {\n            realtimeOptions.duration = originalOptions.realtime.duration;\n            realtimeOptions.delay = originalOptions.realtime.delay;\n          } else {\n            delete realtimeOptions.duration;\n            delete realtimeOptions.delay;\n          }\n        }\n      });\n      update.call(chart, {\n        duration: 0\n      });\n    };\n\n    chart.resetZoom = function () {\n      chart.update = resetZoomAndUpdate;\n      resetZoom();\n      chart.update = update;\n    };\n  }\n\n  zoomNS.updateResetZoom = updateResetZoom;\n  Chart.helpers.streaming = StreamingHelper;\n  Chart.plugins.register(StreamingPlugin);\n  return StreamingPlugin;\n});","map":{"version":3,"names":["global","factory","exports","module","require","define","amd","self","ChartStreaming","Chart","moment","hasOwnProperty","helpers","cancelAnimFrame","window","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","msCancelAnimationFrame","id","clearTimeout","StreamingHelper","startFrameRefreshTimer","context","func","frameRequestID","frameRefresh","requestAnimFrame","call","stopFrameRefreshTimer","helpers$1","canvasHelpers","canvas","scaleService","TimeScale","getScaleConstructor","type","constructors","undefined","defaultAdapter","parse","value","format","isValid","valueOf","toTimestamp","scale","input","adapter","_adapter","options","time","parser","Number","isFinite","isNullOrUndef","getRightValue","round","startOf","resolveOption","key","realtimeOpts","realtime","streamingOpts","chart","plugins","streaming","valueOrDefault","datasetPropertyKeys","refreshData","duration","delay","ttl","pause","onRefresh","max","min","Date","now","isNaN","meta","data","length","i","start","count","removalRange","datasets","forEach","dataset","datasetIndex","getDatasetMeta","xAxisID","yAxisID","_getTimeForIndex","Math","splice","isArray","each","datalabels","labels","update","preservation","stopDataRefreshTimer","refreshTimerID","clearInterval","refreshInterval","startDataRefreshTimer","interval","setInterval","newInterval","transitionKeys","x","tooltip","y","transition","element","keys","translate","_start","view","_view","model","_model","ilen","scroll","activeTooltip","_active","offset","elements","isHorizontal","width","height","head","ticks","reverse","_datasetIndex","_table","defaultConfig","position","distribution","bounds","adapters","unit","displayFormat","isoWeekday","minUnit","displayFormats","millisecond","second","minute","hour","day","week","month","quarter","year","autoSkip","source","major","enabled","RealTimeScale","extend","initialize","me","prototype","apply","arguments","buildTicks","timeOpts","majorTicksOpts","refresh","minTime","maxTime","majorEnabled","maxArray","Object","defineProperty","get","set","noop","shift","pos","fit","display","paddingLeft","paddingRight","handleMargins","draw","chartArea","ctx","clipArea","left","top","right","bottom","unclipArea","destroy","index","timestamps","_timestamps","isObject","registerScaleType","helpers$2","canvasHelpers$1","defaults","frameRate","config","lastActive","tooltipLastActive","lastMouseEvent","_lastActive","_bufferedRender","_bufferedRequest","animating","animationService","animations","animation","render","numSteps","currentStep","controller","eventHandler","drawChart","frameDuration","next","lastDrawn","StreamingPlugin","beforeInit","mouseEventListener","event","getRelativePosition","native","addEventListener","afterInit","resetZoom","Zoom","updateResetZoom","beforeUpdate","chartOpts","scalesOpts","scales","xAxes","concat","yAxes","scaleOpts","line","capBezierPoints","afterUpdate","beforeDatasetDraw","args","getScaleForId","afterDatasetDraw","beforeEvent","removeEventListener","helpers$3","zoomNS","zoomFunctions","panFunctions","rangeMaxLimiter","zoomPanOptions","newMax","scaleAxes","rangeMax","rangeMinLimiter","newMin","rangeMin","zoomRealTimeScale","zoom","center","zoomOptions","newDuration","maxPercent","limitedDuration","panRealTimeScale","delta","panOptions","newDelay","getValueForPixel","$zoom","_originalOptions","resetZoomAndUpdate","realtimeOptions","originalOptions","register"],"sources":["D:/Theme/package/node_modules/chartjs-plugin-streaming/dist/chartjs-plugin-streaming.js"],"sourcesContent":["/*!\n * chartjs-plugin-streaming v1.8.0\n * https://nagix.github.io/chartjs-plugin-streaming\n * (c) 2019 Akihiko Kusanagi\n * Released under the MIT license\n */\n(function (global, factory) {\ntypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('chart.js'), require('moment')) :\ntypeof define === 'function' && define.amd ? define(['chart.js', 'moment'], factory) :\n(global = global || self, global.ChartStreaming = factory(global.Chart, global.moment));\n}(this, function (Chart, moment) { 'use strict';\n\nChart = Chart && Chart.hasOwnProperty('default') ? Chart['default'] : Chart;\nmoment = moment && moment.hasOwnProperty('default') ? moment['default'] : moment;\n\nvar helpers = Chart.helpers;\n\nvar cancelAnimFrame = (function() {\n\tif (typeof window !== 'undefined') {\n\t\treturn window.cancelAnimationFrame ||\n\t\t\twindow.webkitCancelAnimationFrame ||\n\t\t\twindow.mozCancelAnimationFrame ||\n\t\t\twindow.oCancelAnimationFrame ||\n\t\t\twindow.msCancelAnimationFrame ||\n\t\t\tfunction(id) {\n\t\t\t\treturn window.clearTimeout(id);\n\t\t\t};\n\t}\n}());\n\nvar StreamingHelper = {\n\n\tstartFrameRefreshTimer: function(context, func) {\n\t\tif (!context.frameRequestID) {\n\t\t\tvar frameRefresh = function() {\n\t\t\t\tfunc();\n\t\t\t\tcontext.frameRequestID = helpers.requestAnimFrame.call(window, frameRefresh);\n\t\t\t};\n\t\t\tcontext.frameRequestID = helpers.requestAnimFrame.call(window, frameRefresh);\n\t\t}\n\t},\n\n\tstopFrameRefreshTimer: function(context) {\n\t\tvar frameRequestID = context.frameRequestID;\n\n\t\tif (frameRequestID) {\n\t\t\tcancelAnimFrame.call(window, frameRequestID);\n\t\t\tdelete context.frameRequestID;\n\t\t}\n\t}\n\n};\n\nvar helpers$1 = Chart.helpers;\nvar canvasHelpers = helpers$1.canvas;\nvar scaleService = Chart.scaleService;\nvar TimeScale = scaleService.getScaleConstructor('time');\n\nscaleService.getScaleConstructor = function(type) {\n\t// For backwards compatibility\n\tif (type === 'time') {\n\t\ttype = 'realtime';\n\t}\n\treturn this.constructors.hasOwnProperty(type) ? this.constructors[type] : undefined;\n};\n\n// For Chart.js 2.7.x backward compatibility\nvar defaultAdapter = {\n\t// Ported from Chart.js 2.8.0-rc.1 35273ee\n\tparse: function(value, format) {\n\t\tif (typeof value === 'string' && typeof format === 'string') {\n\t\t\tvalue = moment(value, format);\n\t\t} else if (!(value instanceof moment)) {\n\t\t\tvalue = moment(value);\n\t\t}\n\t\treturn value.isValid() ? value.valueOf() : null;\n\t}\n};\n\n// Ported from Chart.js 2.8.0-rc.1 35273ee. Modified for Chart.js 2.7.x backward compatibility.\nfunction toTimestamp(scale, input) {\n\tvar adapter = scale._adapter || defaultAdapter;\n\tvar options = scale.options.time;\n\tvar parser = options.parser;\n\tvar format = parser || options.format;\n\tvar value = input;\n\n\tif (typeof parser === 'function') {\n\t\tvalue = parser(value);\n\t}\n\n\t// Only parse if its not a timestamp already\n\tif (typeof value !== 'number' && !(value instanceof Number) || !isFinite(value)) {\n\t\tvalue = typeof format === 'string'\n\t\t\t? adapter.parse(value, format)\n\t\t\t: adapter.parse(value);\n\t}\n\n\tif (value !== null) {\n\t\treturn +value;\n\t}\n\n\t// Labels are in an incompatible format and no `parser` has been provided.\n\t// The user might still use the deprecated `format` option for parsing.\n\tif (!parser && typeof format === 'function') {\n\t\tvalue = format(input);\n\n\t\t// `format` could return something else than a timestamp, if so, parse it\n\t\tif (typeof value !== 'number' && !(value instanceof Number) || !isFinite(value)) {\n\t\t\tvalue = adapter.parse(value);\n\t\t}\n\t}\n\n\treturn value;\n}\n\n// Ported from Chart.js 2.8.0-rc.1 35273ee\nfunction parse(scale, input) {\n\tif (helpers$1.isNullOrUndef(input)) {\n\t\treturn null;\n\t}\n\n\tvar options = scale.options.time;\n\tvar value = toTimestamp(scale, scale.getRightValue(input));\n\tif (value === null) {\n\t\treturn value;\n\t}\n\n\tif (options.round) {\n\t\tvalue = +scale._adapter.startOf(value, options.round);\n\t}\n\n\treturn value;\n}\n\nfunction resolveOption(scale, key) {\n\tvar realtimeOpts = scale.options.realtime;\n\tvar streamingOpts = scale.chart.options.plugins.streaming;\n\treturn helpers$1.valueOrDefault(realtimeOpts[key], streamingOpts[key]);\n}\n\nvar datasetPropertyKeys = [\n\t'pointBackgroundColor',\n\t'pointBorderColor',\n\t'pointBorderWidth',\n\t'pointRadius',\n\t'pointRotation',\n\t'pointStyle',\n\t'pointHitRadius',\n\t'pointHoverBackgroundColor',\n\t'pointHoverBorderColor',\n\t'pointHoverBorderWidth',\n\t'pointHoverRadius',\n\t'backgroundColor',\n\t'borderColor',\n\t'borderSkipped',\n\t'borderWidth',\n\t'hoverBackgroundColor',\n\t'hoverBorderColor',\n\t'hoverBorderWidth',\n\t'hoverRadius',\n\t'hitRadius',\n\t'radius',\n\t'rotation'\n];\n\nfunction refreshData(scale) {\n\tvar chart = scale.chart;\n\tvar id = scale.id;\n\tvar duration = resolveOption(scale, 'duration');\n\tvar delay = resolveOption(scale, 'delay');\n\tvar ttl = resolveOption(scale, 'ttl');\n\tvar pause = resolveOption(scale, 'pause');\n\tvar onRefresh = resolveOption(scale, 'onRefresh');\n\tvar max = scale.max;\n\tvar min = Date.now() - (isNaN(ttl) ? duration + delay : ttl);\n\tvar meta, data, length, i, start, count, removalRange;\n\n\tif (onRefresh) {\n\t\tonRefresh(chart);\n\t}\n\n\t// Remove old data\n\tchart.data.datasets.forEach(function(dataset, datasetIndex) {\n\t\tmeta = chart.getDatasetMeta(datasetIndex);\n\t\tif (id === meta.xAxisID || id === meta.yAxisID) {\n\t\t\tdata = dataset.data;\n\t\t\tlength = data.length;\n\n\t\t\tif (pause) {\n\t\t\t\t// If the scale is paused, preserve the visible data points\n\t\t\t\tfor (i = 0; i < length; ++i) {\n\t\t\t\t\tif (!(scale._getTimeForIndex(i, datasetIndex) < max)) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tstart = i + 2;\n\t\t\t} else {\n\t\t\t\tstart = 0;\n\t\t\t}\n\n\t\t\tfor (i = start; i < length; ++i) {\n\t\t\t\tif (!(scale._getTimeForIndex(i, datasetIndex) <= min)) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tcount = i - start;\n\t\t\tif (isNaN(ttl)) {\n\t\t\t\t// Keep the last two data points outside the range not to affect the existing bezier curve\n\t\t\t\tcount = Math.max(count - 2, 0);\n\t\t\t}\n\n\t\t\tdata.splice(start, count);\n\t\t\tdatasetPropertyKeys.forEach(function(key) {\n\t\t\t\tif (dataset.hasOwnProperty(key) && helpers$1.isArray(dataset[key])) {\n\t\t\t\t\tdataset[key].splice(start, count);\n\t\t\t\t}\n\t\t\t});\n\t\t\thelpers$1.each(dataset.datalabels, function(value) {\n\t\t\t\tif (helpers$1.isArray(value)) {\n\t\t\t\t\tvalue.splice(start, count);\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (typeof data[0] !== 'object') {\n\t\t\t\tremovalRange = {\n\t\t\t\t\tstart: start,\n\t\t\t\t\tcount: count\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t});\n\tif (removalRange) {\n\t\tchart.data.labels.splice(removalRange.start, removalRange.count);\n\t}\n\n\tchart.update({\n\t\tpreservation: true\n\t});\n}\n\nfunction stopDataRefreshTimer(scale) {\n\tvar realtime = scale.realtime;\n\tvar refreshTimerID = realtime.refreshTimerID;\n\n\tif (refreshTimerID) {\n\t\tclearInterval(refreshTimerID);\n\t\tdelete realtime.refreshTimerID;\n\t\tdelete realtime.refreshInterval;\n\t}\n}\n\nfunction startDataRefreshTimer(scale) {\n\tvar realtime = scale.realtime;\n\tvar interval = resolveOption(scale, 'refresh');\n\n\trealtime.refreshTimerID = setInterval(function() {\n\t\tvar newInterval = resolveOption(scale, 'refresh');\n\n\t\trefreshData(scale);\n\t\tif (realtime.refreshInterval !== newInterval && !isNaN(newInterval)) {\n\t\t\tstopDataRefreshTimer(scale);\n\t\t\tstartDataRefreshTimer(scale);\n\t\t}\n\t}, interval);\n\trealtime.refreshInterval = interval;\n}\n\nvar transitionKeys = {\n\tx: {\n\t\tdata: ['x', 'controlPointPreviousX', 'controlPointNextX'],\n\t\tdataset: ['x'],\n\t\ttooltip: ['x', 'caretX']\n\t},\n\ty: {\n\t\tdata: ['y', 'controlPointPreviousY', 'controlPointNextY'],\n\t\tdataset: ['y'],\n\t\ttooltip: ['y', 'caretY']\n\t}\n};\n\nfunction transition(element, keys, translate) {\n\tvar start = element._start || {};\n\tvar view = element._view || {};\n\tvar model = element._model || {};\n\tvar i, ilen;\n\n\tfor (i = 0, ilen = keys.length; i < ilen; ++i) {\n\t\tvar key = keys[i];\n\t\tif (start.hasOwnProperty(key)) {\n\t\t\tstart[key] -= translate;\n\t\t}\n\t\tif (view.hasOwnProperty(key) && view !== start) {\n\t\t\tview[key] -= translate;\n\t\t}\n\t\tif (model.hasOwnProperty(key) && model !== view) {\n\t\t\tmodel[key] -= translate;\n\t\t}\n\t}\n}\n\nfunction scroll(scale) {\n\tvar chart = scale.chart;\n\tvar realtime = scale.realtime;\n\tvar duration = resolveOption(scale, 'duration');\n\tvar delay = resolveOption(scale, 'delay');\n\tvar id = scale.id;\n\tvar tooltip = chart.tooltip;\n\tvar activeTooltip = tooltip._active;\n\tvar now = Date.now();\n\tvar length, keys, offset, meta, elements, i, ilen;\n\n\tif (scale.isHorizontal()) {\n\t\tlength = scale.width;\n\t\tkeys = transitionKeys.x;\n\t} else {\n\t\tlength = scale.height;\n\t\tkeys = transitionKeys.y;\n\t}\n\toffset = length * (now - realtime.head) / duration;\n\n\tif (scale.options.ticks.reverse) {\n\t\toffset = -offset;\n\t}\n\n\t// Shift all the elements leftward or upward\n\thelpers$1.each(chart.data.datasets, function(dataset, datasetIndex) {\n\t\tmeta = chart.getDatasetMeta(datasetIndex);\n\t\tif (id === meta.xAxisID || id === meta.yAxisID) {\n\t\t\telements = meta.data || [];\n\n\t\t\tfor (i = 0, ilen = elements.length; i < ilen; ++i) {\n\t\t\t\ttransition(elements[i], keys.data, offset);\n\t\t\t}\n\n\t\t\tif (meta.dataset) {\n\t\t\t\ttransition(meta.dataset, keys.dataset, offset);\n\t\t\t}\n\t\t}\n\t});\n\n\t// Shift tooltip leftward or upward\n\tif (activeTooltip && activeTooltip[0]) {\n\t\tmeta = chart.getDatasetMeta(activeTooltip[0]._datasetIndex);\n\t\tif (id === meta.xAxisID || id === meta.yAxisID) {\n\t\t\ttransition(tooltip, keys.tooltip, offset);\n\t\t}\n\t}\n\n\tscale.max = scale._table[1].time = now - delay;\n\tscale.min = scale._table[0].time = scale.max - duration;\n\n\trealtime.head = now;\n}\n\nvar defaultConfig = {\n\tposition: 'bottom',\n\tdistribution: 'linear',\n\tbounds: 'data',\n\tadapters: {},\n\ttime: {\n\t\tparser: false, // false == a pattern string from http://momentjs.com/docs/#/parsing/string-format/ or a custom callback that converts its argument to a moment\n\t\tformat: false, // DEPRECATED false == date objects, moment object, callback or a pattern string from http://momentjs.com/docs/#/parsing/string-format/\n\t\tunit: false, // false == automatic or override with week, month, year, etc.\n\t\tround: false, // none, or override with week, month, year, etc.\n\t\tdisplayFormat: false, // DEPRECATED\n\t\tisoWeekday: false, // override week start day - see http://momentjs.com/docs/#/get-set/iso-weekday/\n\t\tminUnit: 'millisecond',\n\n\t\t// defaults to unit's corresponding unitFormat below or override using pattern string from http://momentjs.com/docs/#/displaying/format/\n\t\tdisplayFormats: {\n\t\t\tmillisecond: 'h:mm:ss.SSS a',\n\t\t\tsecond: 'h:mm:ss a',\n\t\t\tminute: 'h:mm a',\n\t\t\thour: 'hA',\n\t\t\tday: 'MMM D',\n\t\t\tweek: 'll',\n\t\t\tmonth: 'MMM YYYY',\n\t\t\tquarter: '[Q]Q - YYYY',\n\t\t\tyear: 'YYYY'\n\t\t},\n\t},\n\trealtime: {},\n\tticks: {\n\t\tautoSkip: false,\n\t\tsource: 'auto',\n\t\tmajor: {\n\t\t\tenabled: true\n\t\t}\n\t}\n};\n\nvar RealTimeScale = TimeScale.extend({\n\tinitialize: function() {\n\t\tvar me = this;\n\n\t\tTimeScale.prototype.initialize.apply(me, arguments);\n\n\t\t// For backwards compatibility\n\t\tif (me.options.type === 'time' && !me.chart.options.plugins.streaming) {\n\t\t\treturn;\n\t\t}\n\n\t\tme.realtime = me.realtime || {};\n\n\t\tstartDataRefreshTimer(me);\n\t},\n\n\tupdate: function() {\n\t\tvar me = this;\n\t\tvar realtime = me.realtime;\n\n\t\t// For backwards compatibility\n\t\tif (me.options.type === 'time' && !me.chart.options.plugins.streaming) {\n\t\t\treturn TimeScale.prototype.update.apply(me, arguments);\n\t\t}\n\n\t\tif (resolveOption(me, 'pause')) {\n\t\t\tStreamingHelper.stopFrameRefreshTimer(realtime);\n\t\t} else {\n\t\t\tStreamingHelper.startFrameRefreshTimer(realtime, function() {\n\t\t\t\tscroll(me);\n\t\t\t});\n\t\t\trealtime.head = Date.now();\n\t\t}\n\n\t\treturn TimeScale.prototype.update.apply(me, arguments);\n\t},\n\n\tbuildTicks: function() {\n\t\tvar me = this;\n\t\tvar options = me.options;\n\n\t\t// For backwards compatibility\n\t\tif (options.type === 'time' && !me.chart.options.plugins.streaming) {\n\t\t\treturn TimeScale.prototype.buildTicks.apply(me, arguments);\n\t\t}\n\n\t\tvar timeOpts = options.time;\n\t\tvar majorTicksOpts = options.ticks.major;\n\t\tvar duration = resolveOption(me, 'duration');\n\t\tvar delay = resolveOption(me, 'delay');\n\t\tvar refresh = resolveOption(me, 'refresh');\n\t\tvar bounds = options.bounds;\n\t\tvar distribution = options.distribution;\n\t\tvar offset = options.offset;\n\t\tvar minTime = timeOpts.min;\n\t\tvar maxTime = timeOpts.max;\n\t\tvar majorEnabled = majorTicksOpts.enabled;\n\t\tvar max = me.realtime.head - delay;\n\t\tvar min = max - duration;\n\t\tvar maxArray = [max + refresh, max];\n\t\tvar ticks;\n\n\t\toptions.bounds = undefined;\n\t\toptions.distribution = 'linear';\n\t\toptions.offset = false;\n\t\ttimeOpts.min = -1e15;\n\t\ttimeOpts.max = 1e15;\n\t\tmajorTicksOpts.enabled = true;\n\n\t\tObject.defineProperty(me, 'min', {\n\t\t\tget: function() {\n\t\t\t\treturn min;\n\t\t\t},\n\t\t\tset: helpers$1.noop\n\t\t});\n\t\tObject.defineProperty(me, 'max', {\n\t\t\tget: function() {\n\t\t\t\treturn maxArray.shift();\n\t\t\t},\n\t\t\tset: helpers$1.noop\n\t\t});\n\n\t\tticks = TimeScale.prototype.buildTicks.apply(me, arguments);\n\n\t\tdelete me.min;\n\t\tdelete me.max;\n\n\t\tme.min = min;\n\t\tme.max = max;\n\t\toptions.bounds = bounds;\n\t\toptions.distribution = distribution;\n\t\toptions.offset = offset;\n\t\ttimeOpts.min = minTime;\n\t\ttimeOpts.max = maxTime;\n\t\tmajorTicksOpts.enabled = majorEnabled;\n\t\tme._table = [{time: min, pos: 0}, {time: max, pos: 1}];\n\n\t\treturn ticks;\n\t},\n\n\tfit: function() {\n\t\tvar me = this;\n\t\tvar options = me.options;\n\n\t\tTimeScale.prototype.fit.apply(me, arguments);\n\n\t\t// For backwards compatibility\n\t\tif (options.type === 'time' && !me.chart.options.plugins.streaming) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (options.ticks.display && options.display && me.isHorizontal()) {\n\t\t\tme.paddingLeft = 3;\n\t\t\tme.paddingRight = 3;\n\t\t\tme.handleMargins();\n\t\t}\n\t},\n\n\tdraw: function(chartArea) {\n\t\tvar me = this;\n\t\tvar chart = me.chart;\n\n\t\t// For backwards compatibility\n\t\tif (me.options.type === 'time' && !chart.options.plugins.streaming) {\n\t\t\tTimeScale.prototype.draw.apply(me, arguments);\n\t\t\treturn;\n\t\t}\n\n\t\tvar context = me.ctx;\n\t\tvar\tclipArea = me.isHorizontal() ?\n\t\t\t{\n\t\t\t\tleft: chartArea.left,\n\t\t\t\ttop: 0,\n\t\t\t\tright: chartArea.right,\n\t\t\t\tbottom: chart.height\n\t\t\t} : {\n\t\t\t\tleft: 0,\n\t\t\t\ttop: chartArea.top,\n\t\t\t\tright: chart.width,\n\t\t\t\tbottom: chartArea.bottom\n\t\t\t};\n\n\t\t// Clip and draw the scale\n\t\tcanvasHelpers.clipArea(context, clipArea);\n\t\tTimeScale.prototype.draw.apply(me, arguments);\n\t\tcanvasHelpers.unclipArea(context);\n\t},\n\n\tdestroy: function() {\n\t\tvar me = this;\n\n\t\t// For backwards compatibility\n\t\tif (me.options.type === 'time' && !me.chart.options.plugins.streaming) {\n\t\t\treturn;\n\t\t}\n\n\t\tStreamingHelper.stopFrameRefreshTimer(me.realtime);\n\t\tstopDataRefreshTimer(me);\n\t},\n\n\t/*\n\t * @private\n\t */\n\t_getTimeForIndex: function(index, datasetIndex) {\n\t\tvar me = this;\n\t\tvar timestamps = me._timestamps;\n\t\tvar time = timestamps.datasets[datasetIndex][index];\n\t\tvar value;\n\n\t\tif (helpers$1.isNullOrUndef(time)) {\n\t\t\tvalue = me.chart.data.datasets[datasetIndex].data[index];\n\t\t\tif (helpers$1.isObject(value)) {\n\t\t\t\ttime = parse(me, value);\n\t\t\t} else {\n\t\t\t\ttime = parse(me, timestamps.labels[index]);\n\t\t\t}\n\t\t}\n\n\t\treturn time;\n\t}\n});\n\nscaleService.registerScaleType('realtime', RealTimeScale, defaultConfig);\n\nvar helpers$2 = Chart.helpers;\nvar canvasHelpers$1 = helpers$2.canvas;\n\nChart.defaults.global.plugins.streaming = {\n\tduration: 10000,\n\tdelay: 0,\n\tframeRate: 30,\n\trefresh: 1000,\n\tonRefresh: null,\n\tpause: false,\n\tttl: undefined\n};\n\n/**\n * Update the chart keeping the current animation but suppressing a new one\n * @param {object} config - animation options\n */\nfunction update(config) {\n\tvar me = this;\n\tvar preservation = config && config.preservation;\n\tvar tooltip, lastActive, tooltipLastActive, lastMouseEvent;\n\n\tif (preservation) {\n\t\ttooltip = me.tooltip;\n\t\tlastActive = me.lastActive;\n\t\ttooltipLastActive = tooltip._lastActive;\n\t\tme._bufferedRender = true;\n\t}\n\n\tChart.prototype.update.apply(me, arguments);\n\n\tif (preservation) {\n\t\tme._bufferedRender = false;\n\t\tme._bufferedRequest = null;\n\t\tme.lastActive = lastActive;\n\t\ttooltip._lastActive = tooltipLastActive;\n\n\t\tif (me.animating) {\n\t\t\t// If the chart is animating, keep it until the duration is over\n\t\t\tChart.animationService.animations.forEach(function(animation) {\n\t\t\t\tif (animation.chart === me) {\n\t\t\t\t\tme.render({\n\t\t\t\t\t\tduration: (animation.numSteps - animation.currentStep) * 16.66\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\t// If the chart is not animating, make sure that all elements are at the final positions\n\t\t\tme.data.datasets.forEach(function(dataset, datasetIndex) {\n\t\t\t\tme.getDatasetMeta(datasetIndex).controller.transition(1);\n\t\t\t});\n\t\t}\n\n\t\tif (tooltip._active) {\n\t\t\ttooltip.update(true);\n\t\t}\n\n\t\tlastMouseEvent = me.streaming.lastMouseEvent;\n\t\tif (lastMouseEvent) {\n\t\t\tme.eventHandler(lastMouseEvent);\n\t\t}\n\t}\n}\n\n// Draw chart at frameRate\nfunction drawChart(chart) {\n\tvar streaming = chart.streaming;\n\tvar frameRate = chart.options.plugins.streaming.frameRate;\n\tvar frameDuration = 1000 / (Math.max(frameRate, 0) || 30);\n\tvar next = streaming.lastDrawn + frameDuration || 0;\n\tvar now = Date.now();\n\tvar lastMouseEvent = streaming.lastMouseEvent;\n\n\tif (next <= now) {\n\t\t// Draw only when animation is inactive\n\t\tif (!chart.animating && !chart.tooltip._start) {\n\t\t\tchart.draw();\n\t\t}\n\t\tif (lastMouseEvent) {\n\t\t\tchart.eventHandler(lastMouseEvent);\n\t\t}\n\t\tstreaming.lastDrawn = (next + frameDuration > now) ? next : now;\n\t}\n}\n\nvar StreamingPlugin = {\n\tid: 'streaming',\n\n\tbeforeInit: function(chart) {\n\t\tvar streaming = chart.streaming = chart.streaming || {};\n\t\tvar canvas = streaming.canvas = chart.canvas;\n\t\tvar mouseEventListener = streaming.mouseEventListener = function(event) {\n\t\t\tvar pos = helpers$2.getRelativePosition(event, chart);\n\t\t\tstreaming.lastMouseEvent = {\n\t\t\t\ttype: 'mousemove',\n\t\t\t\tchart: chart,\n\t\t\t\tnative: event,\n\t\t\t\tx: pos.x,\n\t\t\t\ty: pos.y\n\t\t\t};\n\t\t};\n\n\t\tcanvas.addEventListener('mousedown', mouseEventListener);\n\t\tcanvas.addEventListener('mouseup', mouseEventListener);\n\t},\n\n\tafterInit: function(chart) {\n\t\tchart.update = update;\n\n\t\tif (chart.resetZoom) {\n\t\t\tChart.Zoom.updateResetZoom(chart);\n\t\t}\n\t},\n\n\tbeforeUpdate: function(chart) {\n\t\tvar chartOpts = chart.options;\n\t\tvar scalesOpts = chartOpts.scales;\n\n\t\tif (scalesOpts) {\n\t\t\tscalesOpts.xAxes.concat(scalesOpts.yAxes).forEach(function(scaleOpts) {\n\t\t\t\tif (scaleOpts.type === 'realtime' || scaleOpts.type === 'time') {\n\t\t\t\t\t// Allow Bézier control to be outside the chart\n\t\t\t\t\tchartOpts.elements.line.capBezierPoints = false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn true;\n\t},\n\n\tafterUpdate: function(chart, options) {\n\t\tvar streaming = chart.streaming;\n\t\tvar pause = true;\n\n\t\t// if all scales are paused, stop refreshing frames\n\t\thelpers$2.each(chart.scales, function(scale) {\n\t\t\tif (scale instanceof RealTimeScale) {\n\t\t\t\tpause &= helpers$2.valueOrDefault(scale.options.realtime.pause, options.pause);\n\t\t\t}\n\t\t});\n\t\tif (pause) {\n\t\t\tStreamingHelper.stopFrameRefreshTimer(streaming);\n\t\t} else {\n\t\t\tStreamingHelper.startFrameRefreshTimer(streaming, function() {\n\t\t\t\tdrawChart(chart);\n\t\t\t});\n\t\t}\n\t},\n\n\tbeforeDatasetDraw: function(chart, args) {\n\t\tvar meta = args.meta;\n\t\tvar chartArea = chart.chartArea;\n\t\tvar clipArea = {\n\t\t\tleft: 0,\n\t\t\ttop: 0,\n\t\t\tright: chart.width,\n\t\t\tbottom: chart.height\n\t\t};\n\t\tif (meta.xAxisID && meta.controller.getScaleForId(meta.xAxisID) instanceof RealTimeScale) {\n\t\t\tclipArea.left = chartArea.left;\n\t\t\tclipArea.right = chartArea.right;\n\t\t}\n\t\tif (meta.yAxisID && meta.controller.getScaleForId(meta.yAxisID) instanceof RealTimeScale) {\n\t\t\tclipArea.top = chartArea.top;\n\t\t\tclipArea.bottom = chartArea.bottom;\n\t\t}\n\t\tcanvasHelpers$1.clipArea(chart.ctx, clipArea);\n\t\treturn true;\n\t},\n\n\tafterDatasetDraw: function(chart) {\n\t\tcanvasHelpers$1.unclipArea(chart.ctx);\n\t},\n\n\tbeforeEvent: function(chart, event) {\n\t\tvar streaming = chart.streaming;\n\n\t\tif (event.type === 'mousemove') {\n\t\t\t// Save mousemove event for reuse\n\t\t\tstreaming.lastMouseEvent = event;\n\t\t} else if (event.type === 'mouseout') {\n\t\t\t// Remove mousemove event\n\t\t\tdelete streaming.lastMouseEvent;\n\t\t}\n\t\treturn true;\n\t},\n\n\tdestroy: function(chart) {\n\t\tvar streaming = chart.streaming;\n\t\tvar canvas = streaming.canvas;\n\t\tvar mouseEventListener = streaming.mouseEventListener;\n\n\t\tStreamingHelper.stopFrameRefreshTimer(streaming);\n\n\t\tcanvas.removeEventListener('mousedown', mouseEventListener);\n\t\tcanvas.removeEventListener('mouseup', mouseEventListener);\n\n\t\thelpers$2.each(chart.scales, function(scale) {\n\t\t\tif (scale instanceof RealTimeScale) {\n\t\t\t\tscale.destroy();\n\t\t\t}\n\t\t});\n\t}\n};\n\nvar helpers$3 = Chart.helpers;\n\n// Ported from chartjs-plugin-zoom 0.7.0 3c187b7\nvar zoomNS = Chart.Zoom = Chart.Zoom || {};\n\n// Ported from chartjs-plugin-zoom 0.7.0 3c187b7\nzoomNS.zoomFunctions = zoomNS.zoomFunctions || {};\nzoomNS.panFunctions = zoomNS.panFunctions || {};\n\n// Ported from chartjs-plugin-zoom 0.7.0 3c187b7\nfunction rangeMaxLimiter(zoomPanOptions, newMax) {\n\tif (zoomPanOptions.scaleAxes && zoomPanOptions.rangeMax &&\n\t\t\t!helpers$3.isNullOrUndef(zoomPanOptions.rangeMax[zoomPanOptions.scaleAxes])) {\n\t\tvar rangeMax = zoomPanOptions.rangeMax[zoomPanOptions.scaleAxes];\n\t\tif (newMax > rangeMax) {\n\t\t\tnewMax = rangeMax;\n\t\t}\n\t}\n\treturn newMax;\n}\n\n// Ported from chartjs-plugin-zoom 0.7.0 3c187b7\nfunction rangeMinLimiter(zoomPanOptions, newMin) {\n\tif (zoomPanOptions.scaleAxes && zoomPanOptions.rangeMin &&\n\t\t\t!helpers$3.isNullOrUndef(zoomPanOptions.rangeMin[zoomPanOptions.scaleAxes])) {\n\t\tvar rangeMin = zoomPanOptions.rangeMin[zoomPanOptions.scaleAxes];\n\t\tif (newMin < rangeMin) {\n\t\t\tnewMin = rangeMin;\n\t\t}\n\t}\n\treturn newMin;\n}\n\nfunction zoomRealTimeScale(scale, zoom, center, zoomOptions) {\n\tvar realtimeOpts = scale.options.realtime;\n\tvar streamingOpts = scale.chart.options.plugins.streaming;\n\tvar duration = helpers$3.valueOrDefault(realtimeOpts.duration, streamingOpts.duration);\n\tvar delay = helpers$3.valueOrDefault(realtimeOpts.delay, streamingOpts.delay);\n\tvar newDuration = duration * (2 - zoom);\n\tvar maxPercent, limitedDuration;\n\n\tif (scale.isHorizontal()) {\n\t\tmaxPercent = (scale.right - center.x) / (scale.right - scale.left);\n\t} else {\n\t\tmaxPercent = (scale.bottom - center.y) / (scale.bottom - scale.top);\n\t}\n\tif (zoom < 1) {\n\t\tlimitedDuration = rangeMaxLimiter(zoomOptions, newDuration);\n\t} else {\n\t\tlimitedDuration = rangeMinLimiter(zoomOptions, newDuration);\n\t}\n\trealtimeOpts.duration = limitedDuration;\n\trealtimeOpts.delay = delay + maxPercent * (duration - limitedDuration);\n}\n\nfunction panRealTimeScale(scale, delta, panOptions) {\n\tvar realtimeOpts = scale.options.realtime;\n\tvar streamingOpts = scale.chart.options.plugins.streaming;\n\tvar delay = helpers$3.valueOrDefault(realtimeOpts.delay, streamingOpts.delay);\n\tvar newDelay = delay + (scale.getValueForPixel(delta) - scale.getValueForPixel(0));\n\n\tif (delta > 0) {\n\t\trealtimeOpts.delay = rangeMaxLimiter(panOptions, newDelay);\n\t} else {\n\t\trealtimeOpts.delay = rangeMinLimiter(panOptions, newDelay);\n\t}\n}\n\nzoomNS.zoomFunctions.realtime = zoomRealTimeScale;\nzoomNS.panFunctions.realtime = panRealTimeScale;\n\nfunction updateResetZoom(chart) {\n\t// For chartjs-plugin-zoom 0.6.6 backward compatibility\n\tvar zoom = chart.$zoom || {_originalOptions: {}};\n\n\tvar resetZoom = chart.resetZoom;\n\tvar update = chart.update;\n\tvar resetZoomAndUpdate = function() {\n\t\thelpers$3.each(chart.scales, function(scale) {\n\t\t\tvar realtimeOptions = scale.options.realtime;\n\t\t\tvar originalOptions = zoom._originalOptions[scale.id] || scale.originalOptions;\n\n\t\t\tif (realtimeOptions) {\n\t\t\t\tif (originalOptions) {\n\t\t\t\t\trealtimeOptions.duration = originalOptions.realtime.duration;\n\t\t\t\t\trealtimeOptions.delay = originalOptions.realtime.delay;\n\t\t\t\t} else {\n\t\t\t\t\tdelete realtimeOptions.duration;\n\t\t\t\t\tdelete realtimeOptions.delay;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tupdate.call(chart, {\n\t\t\tduration: 0\n\t\t});\n\t};\n\n\tchart.resetZoom = function() {\n\t\tchart.update = resetZoomAndUpdate;\n\t\tresetZoom();\n\t\tchart.update = update;\n\t};\n}\n\nzoomNS.updateResetZoom = updateResetZoom;\n\nChart.helpers.streaming = StreamingHelper;\n\nChart.plugins.register(StreamingPlugin);\n\nreturn StreamingPlugin;\n\n}));\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}