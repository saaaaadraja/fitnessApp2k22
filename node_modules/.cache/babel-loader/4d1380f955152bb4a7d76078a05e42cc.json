{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactAddonsShallowCompare = require('react-addons-shallow-compare');\n\nvar _reactAddonsShallowCompare2 = _interopRequireDefault(_reactAddonsShallowCompare);\n\nvar _reactAddonsUpdate = require('react-addons-update');\n\nvar _reactAddonsUpdate2 = _interopRequireDefault(_reactAddonsUpdate);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _utils = require('../utils');\n\nrequire('./Nestable.css');\n\nvar _NestableItem = require('./NestableItem');\n\nvar _NestableItem2 = _interopRequireDefault(_NestableItem);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar Nestable = function (_Component) {\n  _inherits(Nestable, _Component);\n\n  function Nestable(props) {\n    _classCallCheck(this, Nestable);\n\n    var _this = _possibleConstructorReturn(this, (Nestable.__proto__ || Object.getPrototypeOf(Nestable)).call(this, props));\n\n    _this.collapse = function (itemIds) {\n      var _this$props = _this.props,\n          childrenProp = _this$props.childrenProp,\n          collapsed = _this$props.collapsed;\n      var items = _this.state.items;\n\n      if (itemIds === 'NONE') {\n        _this.setState({\n          collapsedGroups: collapsed ? (0, _utils.getAllNonEmptyNodesIds)(items, childrenProp) : []\n        });\n      } else if (itemIds === 'ALL') {\n        _this.setState({\n          collapsedGroups: collapsed ? [] : (0, _utils.getAllNonEmptyNodesIds)(items, childrenProp)\n        });\n      } else if ((0, _utils.isArray)(itemIds)) {\n        _this.setState({\n          collapsedGroups: (0, _utils.getAllNonEmptyNodesIds)(items, childrenProp).filter(function (id) {\n            return itemIds.indexOf(id) > -1 ^ collapsed;\n          })\n        });\n      }\n    };\n\n    _this.startTrackMouse = function () {\n      document.addEventListener('mousemove', _this.onMouseMove);\n      document.addEventListener('mouseup', _this.onDragEnd);\n      document.addEventListener('keydown', _this.onKeyDown);\n    };\n\n    _this.stopTrackMouse = function () {\n      document.removeEventListener('mousemove', _this.onMouseMove);\n      document.removeEventListener('mouseup', _this.onDragEnd);\n      document.removeEventListener('keydown', _this.onKeyDown);\n      _this.elCopyStyles = null;\n    };\n\n    _this.getItemDepth = function (item) {\n      var childrenProp = _this.props.childrenProp;\n      var level = 1;\n\n      if (item[childrenProp].length > 0) {\n        var childrenDepths = item[childrenProp].map(_this.getItemDepth);\n        level += Math.max.apply(Math, _toConsumableArray(childrenDepths));\n      }\n\n      return level;\n    };\n\n    _this.isCollapsed = function (item) {\n      var collapsed = _this.props.collapsed;\n      var collapsedGroups = _this.state.collapsedGroups;\n      return !!(collapsedGroups.indexOf(item.id) > -1 ^ collapsed);\n    };\n\n    _this.onDragStart = function (e, item) {\n      if (e) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n\n      _this.el = (0, _utils.closest)(e.target, '.nestable-item');\n\n      _this.startTrackMouse();\n\n      _this.onMouseMove(e);\n\n      _this.setState({\n        dragItem: item,\n        itemsOld: _this.state.items\n      });\n    };\n\n    _this.onDragEnd = function (e, isCancel) {\n      e && e.preventDefault();\n\n      _this.stopTrackMouse();\n\n      _this.el = null;\n      isCancel ? _this.dragRevert() : _this.dragApply();\n    };\n\n    _this.onMouseMove = function (e) {\n      var _this$props2 = _this.props,\n          group = _this$props2.group,\n          threshold = _this$props2.threshold;\n      var dragItem = _this.state.dragItem;\n      var clientX = e.clientX,\n          clientY = e.clientY;\n      var transformProps = (0, _utils.getTransformProps)(clientX, clientY);\n      var elCopy = document.querySelector('.nestable-' + group + ' .nestable-drag-layer > .nestable-list');\n\n      if (!_this.elCopyStyles) {\n        var offset = (0, _utils.getOffsetRect)(_this.el);\n        var scroll = (0, _utils.getTotalScroll)(_this.el);\n        _this.elCopyStyles = _extends({\n          marginTop: offset.top - clientY - scroll.top,\n          marginLeft: offset.left - clientX - scroll.left\n        }, transformProps);\n      } else {\n        _this.elCopyStyles = _extends({}, _this.elCopyStyles, transformProps);\n\n        for (var key in transformProps) {\n          if (transformProps.hasOwnProperty(key)) {\n            elCopy.style[key] = transformProps[key];\n          }\n        }\n\n        var diffX = clientX - _this.mouse.last.x;\n\n        if (diffX >= 0 && _this.mouse.shift.x >= 0 || diffX <= 0 && _this.mouse.shift.x <= 0) {\n          _this.mouse.shift.x += diffX;\n        } else {\n          _this.mouse.shift.x = 0;\n        }\n\n        _this.mouse.last.x = clientX;\n\n        if (Math.abs(_this.mouse.shift.x) > threshold) {\n          if (_this.mouse.shift.x > 0) {\n            _this.tryIncreaseDepth(dragItem);\n          } else {\n            _this.tryDecreaseDepth(dragItem);\n          }\n\n          _this.mouse.shift.x = 0;\n        }\n      }\n    };\n\n    _this.onMouseEnter = function (e, item) {\n      if (e) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n\n      var _this$props3 = _this.props,\n          collapsed = _this$props3.collapsed,\n          childrenProp = _this$props3.childrenProp;\n      var dragItem = _this.state.dragItem;\n      if (dragItem.id === item.id) return;\n\n      var pathFrom = _this.getPathById(dragItem.id);\n\n      var pathTo = _this.getPathById(item.id); // if collapsed by default\n      // and move last (by count) child\n      // remove parent node from list of open nodes\n\n\n      var collapseProps = {};\n\n      if (collapsed && pathFrom.length > 1) {\n        var parent = _this.getItemByPath(pathFrom.slice(0, -1));\n\n        if (parent[childrenProp].length === 1) {\n          collapseProps = _this.onToggleCollapse(parent, true);\n        }\n      }\n\n      _this.moveItem({\n        dragItem: dragItem,\n        pathFrom: pathFrom,\n        pathTo: pathTo\n      }, collapseProps);\n    };\n\n    _this.onToggleCollapse = function (item, isGetter) {\n      var collapsed = _this.props.collapsed;\n      var collapsedGroups = _this.state.collapsedGroups;\n\n      var isCollapsed = _this.isCollapsed(item);\n\n      var newState = {\n        collapsedGroups: isCollapsed ^ collapsed ? collapsedGroups.filter(function (id) {\n          return id !== item.id;\n        }) : collapsedGroups.concat(item.id)\n      };\n\n      if (isGetter) {\n        return newState;\n      } else {\n        _this.setState(newState);\n      }\n    };\n\n    _this.onKeyDown = function (e) {\n      if (e.which === 27) {\n        // ESC\n        _this.onDragEnd(null, true);\n      }\n    };\n\n    _this.state = {\n      items: [],\n      itemsOld: null,\n      // snap copy in case of canceling drag\n      dragItem: null,\n      isDirty: false,\n      collapsedGroups: []\n    };\n    _this.el = null;\n    _this.elCopyStyles = null;\n    _this.mouse = {\n      last: {\n        x: 0\n      },\n      shift: {\n        x: 0\n      }\n    };\n    return _this;\n  }\n\n  _createClass(Nestable, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _props = this.props,\n          items = _props.items,\n          childrenProp = _props.childrenProp; // make sure every item has property 'children'\n\n      items = (0, _utils.listWithChildren)(items, childrenProp);\n      this.setState({\n        items: items\n      });\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      var _props2 = this.props,\n          itemsNew = _props2.items,\n          childrenProp = _props2.childrenProp;\n      var isPropsUpdated = (0, _reactAddonsShallowCompare2.default)({\n        props: prevProps,\n        state: {}\n      }, this.props, {});\n\n      if (isPropsUpdated) {\n        this.stopTrackMouse();\n        var extra = {};\n\n        if (prevProps.collapsed !== this.props.collapsed) {\n          extra.collapsedGroups = [];\n        }\n\n        this.setState(_extends({\n          items: (0, _utils.listWithChildren)(itemsNew, childrenProp),\n          dragItem: null,\n          isDirty: false\n        }, extra));\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.stopTrackMouse();\n    } // ––––––––––––––––––––––––––––––––––––\n    // Public Methods\n    // ––––––––––––––––––––––––––––––––––––\n    // ––––––––––––––––––––––––––––––––––––\n    // Methods\n    // ––––––––––––––––––––––––––––––––––––\n\n  }, {\n    key: 'moveItem',\n    value: function moveItem(_ref) {\n      var dragItem = _ref.dragItem,\n          pathFrom = _ref.pathFrom,\n          pathTo = _ref.pathTo;\n      var extraProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var _props3 = this.props,\n          childrenProp = _props3.childrenProp,\n          confirmChange = _props3.confirmChange;\n      var dragItemSize = this.getItemDepth(dragItem);\n      var items = this.state.items; // the remove action might affect the next position,\n      // so update next coordinates accordingly\n\n      var realPathTo = this.getRealNextPath(pathFrom, pathTo, dragItemSize);\n      if (realPathTo.length === 0) return; // user can validate every movement\n\n      var destinationPath = realPathTo.length > pathTo.length ? pathTo : pathTo.slice(0, -1);\n      var destinationParent = this.getItemByPath(destinationPath);\n      if (!confirmChange(dragItem, destinationParent)) return;\n      var removePath = this.getSplicePath(pathFrom, {\n        numToRemove: 1,\n        childrenProp: childrenProp\n      });\n      var insertPath = this.getSplicePath(realPathTo, {\n        numToRemove: 0,\n        itemsToInsert: [dragItem],\n        childrenProp: childrenProp\n      });\n      items = (0, _reactAddonsUpdate2.default)(items, removePath);\n      items = (0, _reactAddonsUpdate2.default)(items, insertPath);\n      this.setState(_extends({\n        items: items,\n        isDirty: true\n      }, extraProps));\n    }\n  }, {\n    key: 'tryIncreaseDepth',\n    value: function tryIncreaseDepth(dragItem) {\n      var _props4 = this.props,\n          maxDepth = _props4.maxDepth,\n          childrenProp = _props4.childrenProp,\n          collapsed = _props4.collapsed;\n      var pathFrom = this.getPathById(dragItem.id);\n      var itemIndex = pathFrom[pathFrom.length - 1];\n      var newDepth = pathFrom.length + this.getItemDepth(dragItem); // has previous sibling and isn't at max depth\n\n      if (itemIndex > 0 && newDepth <= maxDepth) {\n        var prevSibling = this.getItemByPath(pathFrom.slice(0, -1).concat(itemIndex - 1)); // previous sibling is not collapsed\n\n        if (!prevSibling[childrenProp].length || !this.isCollapsed(prevSibling)) {\n          var pathTo = pathFrom.slice(0, -1).concat(itemIndex - 1).concat(prevSibling[childrenProp].length); // if collapsed by default\n          // and was no children here\n          // open this node\n\n          var collapseProps = {};\n\n          if (collapsed && !prevSibling[childrenProp].length) {\n            collapseProps = this.onToggleCollapse(prevSibling, true);\n          }\n\n          this.moveItem({\n            dragItem: dragItem,\n            pathFrom: pathFrom,\n            pathTo: pathTo\n          }, collapseProps);\n        }\n      }\n    }\n  }, {\n    key: 'tryDecreaseDepth',\n    value: function tryDecreaseDepth(dragItem) {\n      var _props5 = this.props,\n          childrenProp = _props5.childrenProp,\n          collapsed = _props5.collapsed;\n      var pathFrom = this.getPathById(dragItem.id);\n      var itemIndex = pathFrom[pathFrom.length - 1]; // has parent\n\n      if (pathFrom.length > 1) {\n        var parent = this.getItemByPath(pathFrom.slice(0, -1)); // is last (by order) item in array\n\n        if (itemIndex + 1 === parent[childrenProp].length) {\n          var pathTo = pathFrom.slice(0, -1);\n          pathTo[pathTo.length - 1] += 1; // if collapsed by default\n          // and is last (by count) item in array\n          // remove this node from list of open nodes\n\n          var collapseProps = {};\n\n          if (collapsed && parent[childrenProp].length === 1) {\n            collapseProps = this.onToggleCollapse(parent, true);\n          }\n\n          this.moveItem({\n            dragItem: dragItem,\n            pathFrom: pathFrom,\n            pathTo: pathTo\n          }, collapseProps);\n        }\n      }\n    }\n  }, {\n    key: 'dragApply',\n    value: function dragApply() {\n      var onChange = this.props.onChange;\n      var _state = this.state,\n          items = _state.items,\n          isDirty = _state.isDirty,\n          dragItem = _state.dragItem;\n      this.setState({\n        itemsOld: null,\n        dragItem: null,\n        isDirty: false\n      });\n      onChange && isDirty && onChange(items, dragItem);\n    }\n  }, {\n    key: 'dragRevert',\n    value: function dragRevert() {\n      var itemsOld = this.state.itemsOld;\n      this.setState({\n        items: itemsOld,\n        itemsOld: null,\n        dragItem: null,\n        isDirty: false\n      });\n    } // ––––––––––––––––––––––––––––––––––––\n    // Getter methods\n    // ––––––––––––––––––––––––––––––––––––\n\n  }, {\n    key: 'getPathById',\n    value: function getPathById(id) {\n      var _this2 = this;\n\n      var items = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.state.items;\n      var childrenProp = this.props.childrenProp;\n      var path = [];\n      items.every(function (item, i) {\n        if (item.id === id) {\n          path.push(i);\n        } else if (item[childrenProp]) {\n          var childrenPath = _this2.getPathById(id, item[childrenProp]);\n\n          if (childrenPath.length) {\n            path = path.concat(i).concat(childrenPath);\n          }\n        }\n\n        return path.length === 0;\n      });\n      return path;\n    }\n  }, {\n    key: 'getItemByPath',\n    value: function getItemByPath(path) {\n      var items = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.state.items;\n      var childrenProp = this.props.childrenProp;\n      var item = null;\n      path.forEach(function (index) {\n        var list = item ? item[childrenProp] : items;\n        item = list[index];\n      });\n      return item;\n    }\n  }, {\n    key: 'getSplicePath',\n    value: function getSplicePath(path) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var splicePath = {};\n      var numToRemove = options.numToRemove || 0;\n      var itemsToInsert = options.itemsToInsert || [];\n      var lastIndex = path.length - 1;\n      var currentPath = splicePath;\n      path.forEach(function (index, i) {\n        if (i === lastIndex) {\n          currentPath.$splice = [[index, numToRemove].concat(_toConsumableArray(itemsToInsert))];\n        } else {\n          var nextPath = {};\n          currentPath[index] = _defineProperty({}, options.childrenProp, nextPath);\n          currentPath = nextPath;\n        }\n      });\n      return splicePath;\n    }\n  }, {\n    key: 'getRealNextPath',\n    value: function getRealNextPath(prevPath, nextPath, dragItemSize) {\n      var _props6 = this.props,\n          childrenProp = _props6.childrenProp,\n          maxDepth = _props6.maxDepth;\n      var ppLastIndex = prevPath.length - 1;\n      var npLastIndex = nextPath.length - 1;\n      var newDepth = nextPath.length + dragItemSize - 1;\n\n      if (prevPath.length < nextPath.length) {\n        // move into depth\n        var wasShifted = false; // if new depth exceeds max, try to put after item instead of into item\n\n        if (newDepth > maxDepth && nextPath.length) {\n          return this.getRealNextPath(prevPath, nextPath.slice(0, -1), dragItemSize);\n        }\n\n        return nextPath.map(function (nextIndex, i) {\n          if (wasShifted) {\n            return i === npLastIndex ? nextIndex + 1 : nextIndex;\n          }\n\n          if (typeof prevPath[i] !== 'number') {\n            return nextIndex;\n          }\n\n          if (nextPath[i] > prevPath[i] && i === ppLastIndex) {\n            wasShifted = true;\n            return nextIndex - 1;\n          }\n\n          return nextIndex;\n        });\n      } else if (prevPath.length === nextPath.length) {\n        // if move bottom + move to item with children --> make it a first child instead of swap\n        if (nextPath[npLastIndex] > prevPath[npLastIndex]) {\n          var target = this.getItemByPath(nextPath);\n\n          if (newDepth < maxDepth && target[childrenProp] && target[childrenProp].length && !this.isCollapsed(target)) {\n            return nextPath.slice(0, -1).concat(nextPath[npLastIndex] - 1).concat(0);\n          }\n        }\n      }\n\n      return nextPath;\n    }\n  }, {\n    key: 'getItemOptions',\n    value: function getItemOptions() {\n      var _props7 = this.props,\n          renderItem = _props7.renderItem,\n          renderCollapseIcon = _props7.renderCollapseIcon,\n          handler = _props7.handler,\n          childrenProp = _props7.childrenProp;\n      var dragItem = this.state.dragItem;\n      return {\n        dragItem: dragItem,\n        childrenProp: childrenProp,\n        renderItem: renderItem,\n        renderCollapseIcon: renderCollapseIcon,\n        handler: handler,\n        onDragStart: this.onDragStart,\n        onMouseEnter: this.onMouseEnter,\n        isCollapsed: this.isCollapsed,\n        onToggleCollapse: this.onToggleCollapse\n      };\n    } // ––––––––––––––––––––––––––––––––––––\n    // Click handlers or event handlers\n    // ––––––––––––––––––––––––––––––––––––\n\n  }, {\n    key: 'renderDragLayer',\n    // ––––––––––––––––––––––––––––––––––––\n    // Render methods\n    // ––––––––––––––––––––––––––––––––––––\n    value: function renderDragLayer() {\n      var group = this.props.group;\n      var dragItem = this.state.dragItem;\n      var el = document.querySelector('.nestable-' + group + ' .nestable-item-' + dragItem.id);\n      var listStyles = {};\n\n      if (el) {\n        listStyles.width = el.clientWidth;\n      }\n\n      if (this.elCopyStyles) {\n        listStyles = _extends({}, listStyles, this.elCopyStyles);\n      }\n\n      var options = this.getItemOptions();\n      return _react2.default.createElement('div', {\n        className: 'nestable-drag-layer'\n      }, _react2.default.createElement('ol', {\n        className: 'nestable-list',\n        style: listStyles\n      }, _react2.default.createElement(_NestableItem2.default, {\n        item: dragItem,\n        options: options,\n        isCopy: true\n      })));\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props8 = this.props,\n          group = _props8.group,\n          className = _props8.className;\n      var _state2 = this.state,\n          items = _state2.items,\n          dragItem = _state2.dragItem;\n      var options = this.getItemOptions();\n      return _react2.default.createElement('div', {\n        className: (0, _classnames2.default)(className, 'nestable', 'nestable-' + group, {\n          'is-drag-active': dragItem\n        })\n      }, _react2.default.createElement('ol', {\n        className: 'nestable-list nestable-group'\n      }, items.map(function (item, i) {\n        return _react2.default.createElement(_NestableItem2.default, {\n          key: i,\n          index: i,\n          item: item,\n          options: options\n        });\n      })), dragItem && this.renderDragLayer());\n    }\n  }]);\n\n  return Nestable;\n}(_react.Component);\n\nNestable.propTypes = {\n  className: _propTypes2.default.string,\n  items: _propTypes2.default.arrayOf(_propTypes2.default.shape({\n    id: _propTypes2.default.any.isRequired\n  })),\n  threshold: _propTypes2.default.number,\n  maxDepth: _propTypes2.default.number,\n  collapsed: _propTypes2.default.bool,\n  group: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  childrenProp: _propTypes2.default.string,\n  renderItem: _propTypes2.default.func,\n  renderCollapseIcon: _propTypes2.default.func,\n  handler: _propTypes2.default.node,\n  onChange: _propTypes2.default.func,\n  confirmChange: _propTypes2.default.func\n};\nNestable.defaultProps = {\n  items: [],\n  threshold: 30,\n  maxDepth: 10,\n  collapsed: false,\n  group: Math.random().toString(36).slice(2),\n  childrenProp: 'children',\n  renderItem: function renderItem(_ref2) {\n    var item = _ref2.item;\n    return item.toString();\n  },\n  onChange: function onChange() {},\n  confirmChange: function confirmChange() {\n    return true;\n  }\n};\nexports.default = Nestable;","map":{"version":3,"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react","require","_react2","_interopRequireDefault","_propTypes","_propTypes2","_reactAddonsShallowCompare","_reactAddonsShallowCompare2","_reactAddonsUpdate","_reactAddonsUpdate2","_classnames","_classnames2","_utils","_NestableItem","_NestableItem2","obj","__esModule","default","_defineProperty","_toConsumableArray","arr","Array","isArray","arr2","from","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","Nestable","_Component","_this","getPrototypeOf","collapse","itemIds","_this$props","childrenProp","collapsed","items","state","setState","collapsedGroups","getAllNonEmptyNodesIds","filter","id","indexOf","startTrackMouse","document","addEventListener","onMouseMove","onDragEnd","onKeyDown","stopTrackMouse","removeEventListener","elCopyStyles","getItemDepth","item","level","childrenDepths","map","Math","max","apply","isCollapsed","onDragStart","e","preventDefault","stopPropagation","el","closest","dragItem","itemsOld","isCancel","dragRevert","dragApply","_this$props2","group","threshold","clientX","clientY","transformProps","getTransformProps","elCopy","querySelector","offset","getOffsetRect","scroll","getTotalScroll","marginTop","top","marginLeft","left","style","diffX","mouse","last","x","shift","abs","tryIncreaseDepth","tryDecreaseDepth","onMouseEnter","_this$props3","pathFrom","getPathById","pathTo","collapseProps","parent","getItemByPath","slice","onToggleCollapse","moveItem","isGetter","newState","concat","which","isDirty","componentDidMount","_props","listWithChildren","componentDidUpdate","prevProps","_props2","itemsNew","isPropsUpdated","extra","componentWillUnmount","_ref","extraProps","undefined","_props3","confirmChange","dragItemSize","realPathTo","getRealNextPath","destinationPath","destinationParent","removePath","getSplicePath","numToRemove","insertPath","itemsToInsert","_props4","maxDepth","itemIndex","newDepth","prevSibling","_props5","onChange","_state","_this2","path","every","push","childrenPath","forEach","index","list","options","splicePath","lastIndex","currentPath","$splice","nextPath","prevPath","_props6","ppLastIndex","npLastIndex","wasShifted","nextIndex","getItemOptions","_props7","renderItem","renderCollapseIcon","handler","renderDragLayer","listStyles","width","clientWidth","createElement","className","isCopy","render","_props8","_state2","Component","propTypes","string","arrayOf","shape","any","isRequired","number","bool","oneOfType","func","node","defaultProps","random","toString","_ref2"],"sources":["D:/Theme/package/node_modules/react-nestable/dist/Nestable/Nestable.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactAddonsShallowCompare = require('react-addons-shallow-compare');\n\nvar _reactAddonsShallowCompare2 = _interopRequireDefault(_reactAddonsShallowCompare);\n\nvar _reactAddonsUpdate = require('react-addons-update');\n\nvar _reactAddonsUpdate2 = _interopRequireDefault(_reactAddonsUpdate);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _utils = require('../utils');\n\nrequire('./Nestable.css');\n\nvar _NestableItem = require('./NestableItem');\n\nvar _NestableItem2 = _interopRequireDefault(_NestableItem);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Nestable = function (_Component) {\n  _inherits(Nestable, _Component);\n\n  function Nestable(props) {\n    _classCallCheck(this, Nestable);\n\n    var _this = _possibleConstructorReturn(this, (Nestable.__proto__ || Object.getPrototypeOf(Nestable)).call(this, props));\n\n    _this.collapse = function (itemIds) {\n      var _this$props = _this.props,\n          childrenProp = _this$props.childrenProp,\n          collapsed = _this$props.collapsed;\n      var items = _this.state.items;\n\n\n      if (itemIds === 'NONE') {\n        _this.setState({\n          collapsedGroups: collapsed ? (0, _utils.getAllNonEmptyNodesIds)(items, childrenProp) : []\n        });\n      } else if (itemIds === 'ALL') {\n        _this.setState({\n          collapsedGroups: collapsed ? [] : (0, _utils.getAllNonEmptyNodesIds)(items, childrenProp)\n        });\n      } else if ((0, _utils.isArray)(itemIds)) {\n        _this.setState({\n          collapsedGroups: (0, _utils.getAllNonEmptyNodesIds)(items, childrenProp).filter(function (id) {\n            return itemIds.indexOf(id) > -1 ^ collapsed;\n          })\n        });\n      }\n    };\n\n    _this.startTrackMouse = function () {\n      document.addEventListener('mousemove', _this.onMouseMove);\n      document.addEventListener('mouseup', _this.onDragEnd);\n      document.addEventListener('keydown', _this.onKeyDown);\n    };\n\n    _this.stopTrackMouse = function () {\n      document.removeEventListener('mousemove', _this.onMouseMove);\n      document.removeEventListener('mouseup', _this.onDragEnd);\n      document.removeEventListener('keydown', _this.onKeyDown);\n      _this.elCopyStyles = null;\n    };\n\n    _this.getItemDepth = function (item) {\n      var childrenProp = _this.props.childrenProp;\n\n      var level = 1;\n\n      if (item[childrenProp].length > 0) {\n        var childrenDepths = item[childrenProp].map(_this.getItemDepth);\n        level += Math.max.apply(Math, _toConsumableArray(childrenDepths));\n      }\n\n      return level;\n    };\n\n    _this.isCollapsed = function (item) {\n      var collapsed = _this.props.collapsed;\n      var collapsedGroups = _this.state.collapsedGroups;\n\n\n      return !!(collapsedGroups.indexOf(item.id) > -1 ^ collapsed);\n    };\n\n    _this.onDragStart = function (e, item) {\n      if (e) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n\n      _this.el = (0, _utils.closest)(e.target, '.nestable-item');\n\n      _this.startTrackMouse();\n      _this.onMouseMove(e);\n\n      _this.setState({\n        dragItem: item,\n        itemsOld: _this.state.items\n      });\n    };\n\n    _this.onDragEnd = function (e, isCancel) {\n      e && e.preventDefault();\n\n      _this.stopTrackMouse();\n      _this.el = null;\n\n      isCancel ? _this.dragRevert() : _this.dragApply();\n    };\n\n    _this.onMouseMove = function (e) {\n      var _this$props2 = _this.props,\n          group = _this$props2.group,\n          threshold = _this$props2.threshold;\n      var dragItem = _this.state.dragItem;\n      var clientX = e.clientX,\n          clientY = e.clientY;\n\n      var transformProps = (0, _utils.getTransformProps)(clientX, clientY);\n      var elCopy = document.querySelector('.nestable-' + group + ' .nestable-drag-layer > .nestable-list');\n\n      if (!_this.elCopyStyles) {\n        var offset = (0, _utils.getOffsetRect)(_this.el);\n        var scroll = (0, _utils.getTotalScroll)(_this.el);\n\n        _this.elCopyStyles = _extends({\n          marginTop: offset.top - clientY - scroll.top,\n          marginLeft: offset.left - clientX - scroll.left\n        }, transformProps);\n      } else {\n        _this.elCopyStyles = _extends({}, _this.elCopyStyles, transformProps);\n        for (var key in transformProps) {\n          if (transformProps.hasOwnProperty(key)) {\n            elCopy.style[key] = transformProps[key];\n          }\n        }\n\n        var diffX = clientX - _this.mouse.last.x;\n        if (diffX >= 0 && _this.mouse.shift.x >= 0 || diffX <= 0 && _this.mouse.shift.x <= 0) {\n          _this.mouse.shift.x += diffX;\n        } else {\n          _this.mouse.shift.x = 0;\n        }\n        _this.mouse.last.x = clientX;\n\n        if (Math.abs(_this.mouse.shift.x) > threshold) {\n          if (_this.mouse.shift.x > 0) {\n            _this.tryIncreaseDepth(dragItem);\n          } else {\n            _this.tryDecreaseDepth(dragItem);\n          }\n\n          _this.mouse.shift.x = 0;\n        }\n      }\n    };\n\n    _this.onMouseEnter = function (e, item) {\n      if (e) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n\n      var _this$props3 = _this.props,\n          collapsed = _this$props3.collapsed,\n          childrenProp = _this$props3.childrenProp;\n      var dragItem = _this.state.dragItem;\n\n      if (dragItem.id === item.id) return;\n\n      var pathFrom = _this.getPathById(dragItem.id);\n      var pathTo = _this.getPathById(item.id);\n\n      // if collapsed by default\n      // and move last (by count) child\n      // remove parent node from list of open nodes\n      var collapseProps = {};\n      if (collapsed && pathFrom.length > 1) {\n        var parent = _this.getItemByPath(pathFrom.slice(0, -1));\n        if (parent[childrenProp].length === 1) {\n          collapseProps = _this.onToggleCollapse(parent, true);\n        }\n      }\n\n      _this.moveItem({ dragItem: dragItem, pathFrom: pathFrom, pathTo: pathTo }, collapseProps);\n    };\n\n    _this.onToggleCollapse = function (item, isGetter) {\n      var collapsed = _this.props.collapsed;\n      var collapsedGroups = _this.state.collapsedGroups;\n\n      var isCollapsed = _this.isCollapsed(item);\n\n      var newState = {\n        collapsedGroups: isCollapsed ^ collapsed ? collapsedGroups.filter(function (id) {\n          return id !== item.id;\n        }) : collapsedGroups.concat(item.id)\n      };\n\n      if (isGetter) {\n        return newState;\n      } else {\n        _this.setState(newState);\n      }\n    };\n\n    _this.onKeyDown = function (e) {\n      if (e.which === 27) {\n        // ESC\n        _this.onDragEnd(null, true);\n      }\n    };\n\n    _this.state = {\n      items: [],\n      itemsOld: null, // snap copy in case of canceling drag\n      dragItem: null,\n      isDirty: false,\n      collapsedGroups: []\n    };\n\n    _this.el = null;\n    _this.elCopyStyles = null;\n    _this.mouse = {\n      last: { x: 0 },\n      shift: { x: 0 }\n    };\n    return _this;\n  }\n\n  _createClass(Nestable, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _props = this.props,\n          items = _props.items,\n          childrenProp = _props.childrenProp;\n\n      // make sure every item has property 'children'\n\n      items = (0, _utils.listWithChildren)(items, childrenProp);\n\n      this.setState({ items: items });\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      var _props2 = this.props,\n          itemsNew = _props2.items,\n          childrenProp = _props2.childrenProp;\n\n      var isPropsUpdated = (0, _reactAddonsShallowCompare2.default)({ props: prevProps, state: {} }, this.props, {});\n\n      if (isPropsUpdated) {\n        this.stopTrackMouse();\n\n        var extra = {};\n\n        if (prevProps.collapsed !== this.props.collapsed) {\n          extra.collapsedGroups = [];\n        }\n\n        this.setState(_extends({\n          items: (0, _utils.listWithChildren)(itemsNew, childrenProp),\n          dragItem: null,\n          isDirty: false\n        }, extra));\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.stopTrackMouse();\n    }\n\n    // ––––––––––––––––––––––––––––––––––––\n    // Public Methods\n    // ––––––––––––––––––––––––––––––––––––\n\n\n    // ––––––––––––––––––––––––––––––––––––\n    // Methods\n    // ––––––––––––––––––––––––––––––––––––\n\n  }, {\n    key: 'moveItem',\n    value: function moveItem(_ref) {\n      var dragItem = _ref.dragItem,\n          pathFrom = _ref.pathFrom,\n          pathTo = _ref.pathTo;\n      var extraProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var _props3 = this.props,\n          childrenProp = _props3.childrenProp,\n          confirmChange = _props3.confirmChange;\n\n      var dragItemSize = this.getItemDepth(dragItem);\n      var items = this.state.items;\n\n      // the remove action might affect the next position,\n      // so update next coordinates accordingly\n\n      var realPathTo = this.getRealNextPath(pathFrom, pathTo, dragItemSize);\n\n      if (realPathTo.length === 0) return;\n\n      // user can validate every movement\n      var destinationPath = realPathTo.length > pathTo.length ? pathTo : pathTo.slice(0, -1);\n      var destinationParent = this.getItemByPath(destinationPath);\n      if (!confirmChange(dragItem, destinationParent)) return;\n\n      var removePath = this.getSplicePath(pathFrom, {\n        numToRemove: 1,\n        childrenProp: childrenProp\n      });\n\n      var insertPath = this.getSplicePath(realPathTo, {\n        numToRemove: 0,\n        itemsToInsert: [dragItem],\n        childrenProp: childrenProp\n      });\n\n      items = (0, _reactAddonsUpdate2.default)(items, removePath);\n      items = (0, _reactAddonsUpdate2.default)(items, insertPath);\n\n      this.setState(_extends({\n        items: items,\n        isDirty: true\n      }, extraProps));\n    }\n  }, {\n    key: 'tryIncreaseDepth',\n    value: function tryIncreaseDepth(dragItem) {\n      var _props4 = this.props,\n          maxDepth = _props4.maxDepth,\n          childrenProp = _props4.childrenProp,\n          collapsed = _props4.collapsed;\n\n      var pathFrom = this.getPathById(dragItem.id);\n      var itemIndex = pathFrom[pathFrom.length - 1];\n      var newDepth = pathFrom.length + this.getItemDepth(dragItem);\n\n      // has previous sibling and isn't at max depth\n      if (itemIndex > 0 && newDepth <= maxDepth) {\n        var prevSibling = this.getItemByPath(pathFrom.slice(0, -1).concat(itemIndex - 1));\n\n        // previous sibling is not collapsed\n        if (!prevSibling[childrenProp].length || !this.isCollapsed(prevSibling)) {\n          var pathTo = pathFrom.slice(0, -1).concat(itemIndex - 1).concat(prevSibling[childrenProp].length);\n\n          // if collapsed by default\n          // and was no children here\n          // open this node\n          var collapseProps = {};\n          if (collapsed && !prevSibling[childrenProp].length) {\n            collapseProps = this.onToggleCollapse(prevSibling, true);\n          }\n\n          this.moveItem({ dragItem: dragItem, pathFrom: pathFrom, pathTo: pathTo }, collapseProps);\n        }\n      }\n    }\n  }, {\n    key: 'tryDecreaseDepth',\n    value: function tryDecreaseDepth(dragItem) {\n      var _props5 = this.props,\n          childrenProp = _props5.childrenProp,\n          collapsed = _props5.collapsed;\n\n      var pathFrom = this.getPathById(dragItem.id);\n      var itemIndex = pathFrom[pathFrom.length - 1];\n\n      // has parent\n      if (pathFrom.length > 1) {\n        var parent = this.getItemByPath(pathFrom.slice(0, -1));\n\n        // is last (by order) item in array\n        if (itemIndex + 1 === parent[childrenProp].length) {\n          var pathTo = pathFrom.slice(0, -1);\n          pathTo[pathTo.length - 1] += 1;\n\n          // if collapsed by default\n          // and is last (by count) item in array\n          // remove this node from list of open nodes\n          var collapseProps = {};\n          if (collapsed && parent[childrenProp].length === 1) {\n            collapseProps = this.onToggleCollapse(parent, true);\n          }\n\n          this.moveItem({ dragItem: dragItem, pathFrom: pathFrom, pathTo: pathTo }, collapseProps);\n        }\n      }\n    }\n  }, {\n    key: 'dragApply',\n    value: function dragApply() {\n      var onChange = this.props.onChange;\n      var _state = this.state,\n          items = _state.items,\n          isDirty = _state.isDirty,\n          dragItem = _state.dragItem;\n\n\n      this.setState({\n        itemsOld: null,\n        dragItem: null,\n        isDirty: false\n      });\n\n      onChange && isDirty && onChange(items, dragItem);\n    }\n  }, {\n    key: 'dragRevert',\n    value: function dragRevert() {\n      var itemsOld = this.state.itemsOld;\n\n\n      this.setState({\n        items: itemsOld,\n        itemsOld: null,\n        dragItem: null,\n        isDirty: false\n      });\n    }\n\n    // ––––––––––––––––––––––––––––––––––––\n    // Getter methods\n    // ––––––––––––––––––––––––––––––––––––\n\n  }, {\n    key: 'getPathById',\n    value: function getPathById(id) {\n      var _this2 = this;\n\n      var items = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.state.items;\n      var childrenProp = this.props.childrenProp;\n\n      var path = [];\n\n      items.every(function (item, i) {\n        if (item.id === id) {\n          path.push(i);\n        } else if (item[childrenProp]) {\n          var childrenPath = _this2.getPathById(id, item[childrenProp]);\n\n          if (childrenPath.length) {\n            path = path.concat(i).concat(childrenPath);\n          }\n        }\n\n        return path.length === 0;\n      });\n\n      return path;\n    }\n  }, {\n    key: 'getItemByPath',\n    value: function getItemByPath(path) {\n      var items = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.state.items;\n      var childrenProp = this.props.childrenProp;\n\n      var item = null;\n\n      path.forEach(function (index) {\n        var list = item ? item[childrenProp] : items;\n        item = list[index];\n      });\n\n      return item;\n    }\n  }, {\n    key: 'getSplicePath',\n    value: function getSplicePath(path) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      var splicePath = {};\n      var numToRemove = options.numToRemove || 0;\n      var itemsToInsert = options.itemsToInsert || [];\n      var lastIndex = path.length - 1;\n      var currentPath = splicePath;\n\n      path.forEach(function (index, i) {\n        if (i === lastIndex) {\n          currentPath.$splice = [[index, numToRemove].concat(_toConsumableArray(itemsToInsert))];\n        } else {\n          var nextPath = {};\n          currentPath[index] = _defineProperty({}, options.childrenProp, nextPath);\n          currentPath = nextPath;\n        }\n      });\n\n      return splicePath;\n    }\n  }, {\n    key: 'getRealNextPath',\n    value: function getRealNextPath(prevPath, nextPath, dragItemSize) {\n      var _props6 = this.props,\n          childrenProp = _props6.childrenProp,\n          maxDepth = _props6.maxDepth;\n\n      var ppLastIndex = prevPath.length - 1;\n      var npLastIndex = nextPath.length - 1;\n      var newDepth = nextPath.length + dragItemSize - 1;\n\n      if (prevPath.length < nextPath.length) {\n        // move into depth\n        var wasShifted = false;\n\n        // if new depth exceeds max, try to put after item instead of into item\n        if (newDepth > maxDepth && nextPath.length) {\n          return this.getRealNextPath(prevPath, nextPath.slice(0, -1), dragItemSize);\n        }\n\n        return nextPath.map(function (nextIndex, i) {\n          if (wasShifted) {\n            return i === npLastIndex ? nextIndex + 1 : nextIndex;\n          }\n\n          if (typeof prevPath[i] !== 'number') {\n            return nextIndex;\n          }\n\n          if (nextPath[i] > prevPath[i] && i === ppLastIndex) {\n            wasShifted = true;\n            return nextIndex - 1;\n          }\n\n          return nextIndex;\n        });\n      } else if (prevPath.length === nextPath.length) {\n        // if move bottom + move to item with children --> make it a first child instead of swap\n        if (nextPath[npLastIndex] > prevPath[npLastIndex]) {\n          var target = this.getItemByPath(nextPath);\n\n          if (newDepth < maxDepth && target[childrenProp] && target[childrenProp].length && !this.isCollapsed(target)) {\n            return nextPath.slice(0, -1).concat(nextPath[npLastIndex] - 1).concat(0);\n          }\n        }\n      }\n\n      return nextPath;\n    }\n  }, {\n    key: 'getItemOptions',\n    value: function getItemOptions() {\n      var _props7 = this.props,\n          renderItem = _props7.renderItem,\n          renderCollapseIcon = _props7.renderCollapseIcon,\n          handler = _props7.handler,\n          childrenProp = _props7.childrenProp;\n      var dragItem = this.state.dragItem;\n\n\n      return {\n        dragItem: dragItem,\n        childrenProp: childrenProp,\n        renderItem: renderItem,\n        renderCollapseIcon: renderCollapseIcon,\n        handler: handler,\n\n        onDragStart: this.onDragStart,\n        onMouseEnter: this.onMouseEnter,\n        isCollapsed: this.isCollapsed,\n        onToggleCollapse: this.onToggleCollapse\n      };\n    }\n\n    // ––––––––––––––––––––––––––––––––––––\n    // Click handlers or event handlers\n    // ––––––––––––––––––––––––––––––––––––\n\n  }, {\n    key: 'renderDragLayer',\n\n\n    // ––––––––––––––––––––––––––––––––––––\n    // Render methods\n    // ––––––––––––––––––––––––––––––––––––\n    value: function renderDragLayer() {\n      var group = this.props.group;\n      var dragItem = this.state.dragItem;\n\n      var el = document.querySelector('.nestable-' + group + ' .nestable-item-' + dragItem.id);\n\n      var listStyles = {};\n      if (el) {\n        listStyles.width = el.clientWidth;\n      }\n      if (this.elCopyStyles) {\n        listStyles = _extends({}, listStyles, this.elCopyStyles);\n      }\n\n      var options = this.getItemOptions();\n\n      return _react2.default.createElement(\n        'div',\n        { className: 'nestable-drag-layer' },\n        _react2.default.createElement(\n          'ol',\n          { className: 'nestable-list', style: listStyles },\n          _react2.default.createElement(_NestableItem2.default, {\n            item: dragItem,\n            options: options,\n            isCopy: true\n          })\n        )\n      );\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props8 = this.props,\n          group = _props8.group,\n          className = _props8.className;\n      var _state2 = this.state,\n          items = _state2.items,\n          dragItem = _state2.dragItem;\n\n      var options = this.getItemOptions();\n\n      return _react2.default.createElement(\n        'div',\n        { className: (0, _classnames2.default)(className, 'nestable', 'nestable-' + group, { 'is-drag-active': dragItem }) },\n        _react2.default.createElement(\n          'ol',\n          { className: 'nestable-list nestable-group' },\n          items.map(function (item, i) {\n            return _react2.default.createElement(_NestableItem2.default, {\n              key: i,\n              index: i,\n              item: item,\n              options: options\n            });\n          })\n        ),\n        dragItem && this.renderDragLayer()\n      );\n    }\n  }]);\n\n  return Nestable;\n}(_react.Component);\n\nNestable.propTypes = {\n  className: _propTypes2.default.string,\n  items: _propTypes2.default.arrayOf(_propTypes2.default.shape({\n    id: _propTypes2.default.any.isRequired\n  })),\n  threshold: _propTypes2.default.number,\n  maxDepth: _propTypes2.default.number,\n  collapsed: _propTypes2.default.bool,\n  group: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  childrenProp: _propTypes2.default.string,\n  renderItem: _propTypes2.default.func,\n  renderCollapseIcon: _propTypes2.default.func,\n  handler: _propTypes2.default.node,\n  onChange: _propTypes2.default.func,\n  confirmChange: _propTypes2.default.func\n};\nNestable.defaultProps = {\n  items: [],\n  threshold: 30,\n  maxDepth: 10,\n  collapsed: false,\n  group: Math.random().toString(36).slice(2),\n  childrenProp: 'children',\n  renderItem: function renderItem(_ref2) {\n    var item = _ref2.item;\n    return item.toString();\n  },\n  onChange: function onChange() {},\n  confirmChange: function confirmChange() {\n    return true;\n  }\n};\nexports.default = Nestable;"],"mappings":"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"},"metadata":{},"sourceType":"script"}