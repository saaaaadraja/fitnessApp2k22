{"ast":null,"code":"import { EventHandler, Browser, remove } from '@syncfusion/ej2-base';\nimport { ScrollElements, createScrollSvg } from './scrollbar-elements';\nimport { getElement, minMax, logBase } from '../utils/helper';\nimport { getScrollbarThemeColor } from '../model/theme';\nimport { scrollChanged, scrollEnd, scrollStart } from '../model/constants';\n/**\n * Scrollbar Base\n */\n\nvar ScrollBar =\n/** @class */\nfunction () {\n  /**\n   * Constructor for creating scrollbar\n   * @param component\n   * @param axis\n   */\n  function ScrollBar(component, axis) {\n    /** @private */\n    this.scrollRange = {\n      max: null,\n      min: null,\n      interval: null,\n      delta: null\n    };\n    this.component = component;\n    this.elements = [];\n    this.scrollElements = new ScrollElements(component);\n    this.axis = axis;\n    this.mouseMoveListener = this.scrollMouseMove.bind(this);\n    this.mouseUpListener = this.scrollMouseUp.bind(this);\n    this.animateDuration = 500;\n    this.isPointer = Browser.isPointer;\n    this.browserName = Browser.info.name;\n  }\n  /**\n   * To Mouse x and y position\n   * @param e\n   */\n\n\n  ScrollBar.prototype.getMouseXY = function (e) {\n    var pageX;\n    var pageY;\n    var touchArg;\n\n    if (e.type.indexOf('touch') > -1) {\n      touchArg = e;\n      pageX = touchArg.changedTouches[0].clientX;\n      pageY = touchArg.changedTouches[0].clientY;\n    } else {\n      pageX = e.clientX;\n      pageY = e.clientY;\n    }\n\n    var svgRect = getElement(this.component.element.id + '_scrollBar_svg' + this.axis.name).getBoundingClientRect();\n    this.mouseX = pageX - Math.max(svgRect.left, 0);\n    this.mouseY = pageY - Math.max(svgRect.top, 0);\n  };\n  /**\n   * Method to bind events for scrollbar svg object\n   * @param element\n   */\n\n\n  ScrollBar.prototype.wireEvents = function (element) {\n    EventHandler.add(element, Browser.touchStartEvent, this.scrollMouseDown, this);\n    EventHandler.add(element, Browser.touchMoveEvent, this.scrollMouseMove, this);\n    EventHandler.add(element, Browser.touchEndEvent, this.scrollMouseUp, this);\n    EventHandler.add(element, 'mousewheel', this.scrollMouseWheel, this);\n    window.addEventListener('mousemove', this.mouseMoveListener, false);\n    window.addEventListener('mouseup', this.mouseUpListener, false);\n  };\n  /**\n   * Method to remove events for srcollbar svg object\n   * @param element\n   */\n\n\n  ScrollBar.prototype.unWireEvents = function (element) {\n    EventHandler.remove(element, Browser.touchStartEvent, this.scrollMouseDown);\n    EventHandler.remove(element, Browser.touchMoveEvent, this.scrollMouseMove);\n    EventHandler.remove(element, Browser.touchEndEvent, this.scrollMouseUp);\n    EventHandler.remove(element, 'mousewheel', this.scrollMouseWheel);\n    window.removeEventListener('mousemove', this.mouseMoveListener, false);\n    window.removeEventListener('mouseup', this.mouseUpListener, false);\n  };\n  /**\n   * Handles the mouse down on scrollbar\n   * @param e\n   */\n\n\n  ScrollBar.prototype.scrollMouseDown = function (e) {\n    var id = e.target.id;\n    var elem = this.scrollElements;\n    this.getMouseXY(e);\n    this.isResizeLeft = this.isExist(id, '_leftCircle_') || this.isExist(id, '_leftArrow_');\n    this.isResizeRight = this.isExist(id, '_rightCircle_') || this.isExist(id, '_rightArrow_'); //  this.previousXY = this.isVertical ? this.mouseY : this.mouseX;\n\n    this.previousXY = this.isVertical && this.axis.isInversed ? this.mouseY : this.isVertical ? this.width - this.mouseY : this.axis.isInversed ? this.width - this.mouseX : this.mouseX;\n    this.previousWidth = elem.thumbRectWidth;\n    this.previousRectX = elem.thumbRectX;\n    this.startZoomPosition = this.axis.zoomPosition;\n    this.startZoomFactor = this.axis.zoomFactor;\n    this.startRange = this.axis.visibleRange;\n    this.scrollStarted = true;\n    this.component.trigger(scrollStart, this.getArgs(scrollStart));\n\n    if (this.isExist(id, 'scrollBarThumb_')) {\n      this.isThumbDrag = true;\n      this.svgObject.style.cursor = '-webkit-grabbing';\n    } else if (this.isExist(id, 'scrollBarBackRect_')) {\n      var currentX = this.moveLength(this.previousXY, this.previousRectX);\n      elem.thumbRectX = this.isWithIn(currentX) ? currentX : elem.thumbRectX;\n      this.positionThumb(elem.thumbRectX, elem.thumbRectWidth);\n      this.setZoomFactorPosition(elem.thumbRectX, elem.thumbRectWidth, false);\n\n      if (this.isLazyLoad) {\n        var thumbMove = elem.thumbRectX > this.previousRectX ? 'RightMove' : 'LeftMove';\n        var args = this.calculateLazyRange(elem.thumbRectX, elem.thumbRectWidth, thumbMove);\n\n        if (args) {\n          this.component.trigger(scrollEnd, args);\n        }\n      }\n    }\n    /**\n     * Customer issue\n     * Task ID - EJ2-28898\n     * Issue: While element's height is smaller than chart'height, html scroll bar presents. On that case while moving chart scrollbar,\n     * html scrollbar goes up due to chart's svg removed from the dom when zoomFactor and zoomPosition chnaged\n     * Fix: Only for scrolling purpose, height for element is set to chart's available height\n     */\n\n\n    if (this.component.element.style.height === '') {\n      this.isCustomHeight = true;\n      this.component.element.style.height = this.component.availableSize.height + 'px';\n    }\n  };\n  /**\n   * To check the matched string\n   * @param id\n   * @param match\n   */\n\n\n  ScrollBar.prototype.isExist = function (id, match) {\n    return id.indexOf(match) > -1;\n  };\n  /**\n   * To check current poisition is within scrollbar region\n   * @param currentX\n   */\n\n\n  ScrollBar.prototype.isWithIn = function (currentX) {\n    var circleRadius = 8;\n    return currentX - circleRadius >= 0 && currentX + this.scrollElements.thumbRectWidth + circleRadius <= this.width;\n  };\n  /**\n   * Method to find move length of thumb\n   * @param mouseXY\n   * @param thumbX\n   * @param circleRadius\n   */\n\n\n  ScrollBar.prototype.moveLength = function (mouseXY, thumbX, circleRadius) {\n    if (circleRadius === void 0) {\n      circleRadius = 8;\n    }\n\n    var moveLength = 10 / 100 * (this.width - circleRadius * 2);\n\n    if (mouseXY < thumbX) {\n      moveLength = thumbX - (thumbX - moveLength > circleRadius ? moveLength : circleRadius);\n    } else {\n      moveLength = thumbX + (thumbX + this.scrollElements.thumbRectWidth + moveLength < this.width - circleRadius ? moveLength : circleRadius);\n    }\n\n    return moveLength;\n  };\n  /**\n   * Method to calculate zoom factor and position\n   * @param currentX\n   * @param currentWidth\n   */\n\n\n  ScrollBar.prototype.setZoomFactorPosition = function (currentX, currentWidth, isRequire) {\n    if (isRequire === void 0) {\n      isRequire = true;\n    }\n\n    var axis = this.axis;\n    this.isScrollUI = true;\n    var circleRadius = 8;\n    var circleWidth = 1;\n    var currentScrollWidth = currentX + currentWidth + circleRadius + circleWidth;\n    var currentZPWidth = circleRadius + circleWidth / 2;\n    this.zoomPosition = (currentX - (currentX - currentZPWidth <= 0 ? currentZPWidth : 0)) / (this.isVertical ? axis.rect.height : this.width);\n    this.zoomFactor = (currentWidth + (currentScrollWidth >= this.width ? circleRadius + circleWidth : 0)) / (this.isVertical ? axis.rect.height : this.width);\n    axis.zoomPosition = this.zoomPosition < 0 ? 0 : this.zoomPosition > 0.9 ? 1 : this.zoomPosition;\n    axis.zoomFactor = isRequire ? this.zoomFactor : axis.zoomFactor;\n  };\n  /**\n   * Handles the mouse move on scrollbar\n   * @param e\n   */\n\n\n  ScrollBar.prototype.scrollMouseMove = function (e) {\n    var target = e.target;\n    var elem = this.scrollElements;\n    this.getMouseXY(e);\n    this.setCursor(target);\n    this.setTheme(target); //let mouseXY: number = this.isVertical ? this.mouseY : this.mouseX;\n\n    var mouseXY = this.isVertical && this.axis.isInversed ? this.width - this.mouseY : this.isVertical ? this.mouseY : this.mouseX;\n    var range = this.axis.visibleRange;\n    var zoomPosition = this.zoomPosition;\n    var zoomFactor = this.zoomFactor;\n    var moveLength = this.previousRectX - elem.thumbRectX;\n    var thumbMove = moveLength < 0 ? 'RightMove' : 'LeftMove';\n    var args;\n\n    if (this.isLazyLoad && (this.isThumbDrag || this.isResizeLeft || this.isResizeRight)) {\n      args = this.calculateLazyRange(elem.thumbRectX, elem.thumbRectWidth, thumbMove);\n    }\n\n    var currentRange = args ? args.currentRange : null;\n\n    if (this.isThumbDrag) {\n      this.component.isScrolling = this.isThumbDrag;\n      mouseXY = this.isVertical || this.axis.isInversed ? this.width - mouseXY : mouseXY;\n      var currentX = elem.thumbRectX + (mouseXY - this.previousXY);\n\n      if (mouseXY >= currentX + elem.thumbRectWidth) {\n        this.setCursor(target);\n      } else {\n        this.svgObject.style.cursor = '-webkit-grabbing';\n      }\n\n      if (mouseXY >= 0 && mouseXY <= currentX + elem.thumbRectWidth) {\n        elem.thumbRectX = this.isWithIn(currentX) ? currentX : elem.thumbRectX;\n        this.positionThumb(elem.thumbRectX, elem.thumbRectWidth);\n        this.previousXY = mouseXY;\n        this.setZoomFactorPosition(currentX, elem.thumbRectWidth, false);\n      }\n\n      this.component.trigger(scrollChanged, this.getArgs(scrollChanged, range, zoomPosition, zoomFactor, currentRange));\n    } else if (this.isResizeLeft || this.isResizeRight) {\n      this.resizeThumb(e);\n      this.component.trigger(scrollChanged, this.getArgs(scrollChanged, range, zoomPosition, zoomFactor, currentRange));\n    }\n  };\n  /**\n   * Handles the mouse wheel on scrollbar\n   * @param e\n   */\n\n\n  ScrollBar.prototype.scrollMouseWheel = function (e) {\n    var svgRect = getElement(this.component.element.id + '_scrollBar_svg' + this.axis.name).getBoundingClientRect();\n    this.mouseX = e.clientX - Math.max(svgRect.left, 0);\n    this.mouseY = e.clientY - Math.max(svgRect.top, 0);\n    var origin = 0.5;\n    var elem = this.scrollElements;\n    var axis = this.axis;\n    var direction = this.browserName === 'mozilla' && !this.isPointer ? -e.detail / 3 > 0 ? 1 : -1 : e.wheelDelta / 120 > 0 ? 1 : -1;\n    var cumulative;\n    cumulative = Math.max(Math.max(1 / minMax(axis.zoomFactor, 0, 1), 1) + 0.25 * direction, 1);\n    var range = this.axis.visibleRange;\n    var zoomPosition = this.zoomPosition;\n    var zoomFactor = this.zoomFactor;\n    var args;\n\n    if (cumulative >= 1) {\n      origin = axis.orientation === 'Horizontal' ? this.mouseX / axis.rect.width : 1 - this.mouseY / axis.rect.height;\n      origin = origin > 1 ? 1 : origin < 0 ? 0 : origin;\n      this.zoomFactor = cumulative === 1 ? 1 : minMax(1 / cumulative, 0, 1);\n      this.zoomPosition = cumulative === 1 ? 0 : axis.zoomPosition + (axis.zoomFactor - this.zoomFactor) * origin;\n    }\n\n    elem.thumbRectX = this.isWithIn(this.zoomPosition * this.width) ? this.zoomPosition * this.width : elem.thumbRectX;\n    this.isScrollUI = true;\n    this.positionThumb(elem.thumbRectX, elem.thumbRectWidth);\n\n    if (this.isLazyLoad) {\n      this.setZoomFactorPosition(elem.thumbRectX, elem.thumbRectWidth);\n    }\n\n    axis.zoomFactor = this.zoomFactor;\n    axis.zoomPosition = this.zoomPosition;\n\n    if (this.isLazyLoad) {\n      args = this.calculateMouseWheelRange(elem.thumbRectX, elem.thumbRectWidth);\n\n      if (args) {\n        if (args.currentRange.minimum !== args.previousAxisRange.minimum && args.currentRange.maximum !== args.previousAxisRange.maximum) {\n          this.component.trigger(scrollEnd, args);\n          this.isScrollEnd = false;\n        }\n      }\n    }\n\n    if (!this.isLazyLoad) {\n      this.component.trigger(scrollChanged, this.getArgs(scrollChanged, range, zoomPosition, zoomFactor));\n    }\n  };\n  /**\n   * Handles the mouse up on scrollbar\n   * @param e\n   */\n\n\n  ScrollBar.prototype.scrollMouseUp = function (e) {\n    var circleRadius = 8;\n    var circleWidth = 1;\n    var args;\n    this.startX = this.scrollElements.thumbRectX;\n    var currentScrollWidth = this.startX + this.scrollElements.thumbRectWidth + circleRadius + circleWidth;\n    var currentZPWidth = circleRadius + circleWidth / 2;\n\n    if ((this.isResizeLeft || this.isResizeRight) && !this.isLazyLoad) {\n      this.axis.zoomFactor = currentScrollWidth >= this.width - 1 && this.startX - currentZPWidth <= 0 ? 1 : this.zoomFactor;\n    }\n\n    if (this.isLazyLoad) {\n      var moveLength = this.previousRectX - this.startX;\n\n      if ((moveLength > 0 || moveLength < 0) && this.isThumbDrag) {\n        var thumbMove = moveLength < 0 ? 'RightMove' : 'LeftMove';\n\n        if (thumbMove === 'RightMove') {\n          this.startX = this.startX + Math.abs(moveLength) < this.width - circleRadius ? this.startX : this.width - circleRadius - this.scrollElements.thumbRectWidth;\n        } else {\n          this.startX = this.startX + this.scrollElements.thumbRectWidth - Math.abs(moveLength) > circleRadius ? this.startX : circleRadius;\n        }\n\n        args = this.calculateLazyRange(this.startX, this.scrollElements.thumbRectWidth, thumbMove);\n\n        if (args) {\n          this.component.trigger(scrollEnd, args);\n          this.scrollStarted = false;\n        }\n      }\n\n      if (this.isResizeLeft || this.isResizeRight) {\n        args = this.calculateLazyRange(this.startX, this.scrollElements.thumbRectWidth);\n\n        if (args) {\n          this.component.trigger(scrollEnd, args);\n          this.scrollStarted = false;\n        }\n      }\n    }\n\n    this.isThumbDrag = false;\n    this.isResizeLeft = false;\n    this.isResizeRight = false;\n    this.isScrollEnd = false;\n    this.component.isScrolling = false;\n\n    if (this.scrollStarted && !this.isLazyLoad) {\n      this.component.trigger(scrollEnd, this.getArgs(scrollChanged, this.startRange, this.startZoomPosition, this.startZoomFactor));\n      this.scrollStarted = false;\n    }\n    /**\n     * Customer issue\n     * Task ID - EJ2-28898\n     * Chart's height setted is removed here.\n     */\n\n\n    if (this.isCustomHeight) {\n      this.component.element.style.height = null;\n    }\n  };\n\n  ScrollBar.prototype.calculateMouseWheelRange = function (scrollThumbX, scrollThumbWidth) {\n    var zoomFactor;\n    var zoomPosition;\n    var currentStart;\n    var currentEnd;\n    var args;\n    var range = this.scrollRange;\n    var previousRange = this.getStartEnd(this.previousStart, this.previousEnd, false);\n    var circleRadius = 8;\n\n    if (scrollThumbX + scrollThumbWidth + circleRadius <= this.width) {\n      zoomPosition = (scrollThumbX - circleRadius) / this.width;\n      zoomFactor = scrollThumbWidth / this.width;\n    }\n\n    currentStart = range.min + zoomPosition * range.delta;\n    currentEnd = currentStart + zoomFactor * range.delta;\n\n    if (currentEnd) {\n      args = {\n        axis: this.axis,\n        currentRange: this.getStartEnd(currentStart, currentEnd, true),\n        previousAxisRange: previousRange\n      };\n    }\n\n    return args;\n  };\n\n  ;\n  /**\n   * Range calculation for lazy loading\n   */\n\n  ScrollBar.prototype.calculateLazyRange = function (scrollThumbX, scrollThumbWidth, thumbMove) {\n    var currentScrollWidth = scrollThumbWidth;\n    var zoomFactor;\n    var zoomPosition;\n    var currentStart;\n    var currentEnd;\n    var args;\n    var range = this.scrollRange;\n    var previousRange = this.getStartEnd(this.previousStart, this.previousEnd, false);\n    var circleRadius = 8;\n    var circleWidth = 16;\n\n    if (this.isResizeRight || thumbMove === 'RightMove') {\n      currentScrollWidth = this.isResizeRight ? currentScrollWidth + circleWidth : currentScrollWidth;\n      zoomFactor = (currentScrollWidth + circleRadius) / this.width;\n      zoomPosition = thumbMove === 'RightMove' ? (scrollThumbX + circleRadius) / this.width : this.axis.zoomPosition;\n      currentStart = thumbMove === 'RightMove' ? range.min + zoomPosition * range.delta : this.previousStart;\n      currentEnd = currentStart + zoomFactor * range.delta;\n    } else if (this.isResizeLeft || thumbMove === 'LeftMove') {\n      zoomPosition = (scrollThumbX - circleRadius) / this.width;\n      zoomFactor = currentScrollWidth / this.width;\n      currentStart = range.min + zoomPosition * range.delta;\n      currentStart = currentStart >= range.min ? currentStart : range.min;\n      currentEnd = thumbMove === 'LeftMove' ? currentStart + zoomFactor * range.delta : this.previousEnd;\n    } else if (this.isThumbDrag) {\n      zoomPosition = thumbMove === 'RightMove' ? (scrollThumbX + circleRadius) / this.width : (scrollThumbX - circleRadius) / this.width;\n      zoomFactor = this.scrollElements.thumbRectWidth / this.width;\n      currentStart = range.min + zoomPosition * range.delta;\n      currentStart = currentStart >= range.min ? currentStart : range.min;\n      currentEnd = currentStart + zoomFactor * range.delta;\n    }\n\n    if (currentEnd) {\n      args = {\n        axis: this.component.isBlazor ? {} : this.axis,\n        currentRange: this.getStartEnd(currentStart, currentEnd, true),\n        previousAxisRange: previousRange\n      };\n    }\n\n    return args;\n  };\n  /**\n   * Get start and end values\n   */\n\n\n  ScrollBar.prototype.getStartEnd = function (start, end, isCurrentStartEnd) {\n    var range;\n    var valueType = this.valueType;\n\n    if ((valueType === 'DateTime' || valueType === 'DateTimeCategory') && isCurrentStartEnd) {\n      this.previousStart = start;\n      this.previousEnd = end;\n    } else if (isCurrentStartEnd) {\n      this.previousStart = Math.round(start);\n      this.previousEnd = Math.ceil(end);\n    }\n\n    switch (valueType) {\n      case 'Double':\n      case 'Category':\n      case 'Logarithmic':\n        start = Math.round(start);\n        end = Math.ceil(end);\n        break;\n\n      case 'DateTime':\n      case 'DateTimeCategory':\n        start = new Date(start);\n        end = new Date(end);\n        break;\n    }\n\n    return range = {\n      minimum: start,\n      maximum: end\n    };\n  };\n  /**\n   * To render scroll bar\n   * @private\n   */\n\n\n  ScrollBar.prototype.render = function (isScrollExist) {\n    if (this.component.zoomModule || isScrollExist && this.axis.scrollbarSettings.enable) {\n      this.getDefaults();\n    }\n\n    this.getTheme();\n    this.removeScrollSvg();\n    createScrollSvg(this, this.component.svgRenderer);\n    this.wireEvents(this.svgObject);\n    this.svgObject.appendChild(this.scrollElements.renderElements(this, this.component.svgRenderer));\n    return this.svgObject;\n  };\n  /**\n   * Theming for scrollabr\n   */\n\n\n  ScrollBar.prototype.getTheme = function () {\n    this.scrollbarThemeStyle = getScrollbarThemeColor(this.component.theme);\n  };\n  /**\n   * Method to remove existing scrollbar\n   */\n\n\n  ScrollBar.prototype.removeScrollSvg = function () {\n    if (document.getElementById(this.component.element.id + '_scrollBar_svg' + this.axis.name)) {\n      remove(document.getElementById(this.component.element.id + '_scrollBar_svg' + this.axis.name));\n    }\n  };\n  /**\n   * Method to set cursor fpr scrollbar\n   * @param target\n   */\n\n\n  ScrollBar.prototype.setCursor = function (target) {\n    var id = target.id;\n    this.svgObject.style.cursor = id.indexOf('scrollBarThumb_') > -1 || id.indexOf('_gripCircle') > -1 ? '-webkit-grab' : id.indexOf('Circle_') > -1 || id.indexOf('Arrow_') > -1 ? this.isVertical ? 'ns-resize' : 'ew-resize' : 'auto';\n  };\n  /**\n   * Method to set theme for sollbar\n   * @param target\n   */\n\n\n  ScrollBar.prototype.setTheme = function (target) {\n    var id = target.id;\n    var isLeftHover = id.indexOf('_leftCircle_') > -1 || id.indexOf('_leftArrow_') > -1;\n    var isRightHover = id.indexOf('_rightCircle_') > -1 || id.indexOf('_rightArrow_') > -1;\n    var style = this.scrollbarThemeStyle;\n    var leftArrowEle = this.scrollElements.leftArrowEle;\n    var rightArrowEle = this.scrollElements.rightArrowEle;\n    var leftCircleEle = this.scrollElements.leftCircleEle;\n    var rightCircleEle = this.scrollElements.rightCircleEle;\n    var isAxis = this.isCurrentAxis(target, leftArrowEle);\n    leftCircleEle.style.fill = isLeftHover && isAxis ? style.circleHover : style.circle;\n    rightCircleEle.style.fill = isRightHover && isAxis ? style.circleHover : style.circle;\n    leftCircleEle.style.stroke = isLeftHover && isAxis ? style.circleHover : style.circle;\n    rightCircleEle.style.stroke = isRightHover && isAxis ? style.circleHover : style.circle;\n\n    if (this.component.theme === 'HighContrastLight') {\n      leftArrowEle.style.fill = isLeftHover && isAxis ? style.arrowHover : style.arrow;\n      leftArrowEle.style.stroke = isLeftHover && isAxis ? style.arrowHover : style.arrow;\n      rightArrowEle.style.fill = isRightHover && isAxis ? style.arrowHover : style.arrow;\n      rightArrowEle.style.stroke = isRightHover && isAxis ? style.arrowHover : style.arrow;\n      leftCircleEle.style.stroke = isLeftHover && isAxis ? style.circleHover : style.circle;\n      rightCircleEle.style.stroke = isRightHover && isAxis ? style.circleHover : style.circle;\n    }\n  };\n  /**\n   * To check current axis\n   * @param target\n   * @param ele\n   */\n\n\n  ScrollBar.prototype.isCurrentAxis = function (target, ele) {\n    return target.id.split('_')[2] === ele.id.split('_')[2];\n  };\n  /**\n   * Method to resize thumb\n   * @param e\n   */\n\n\n  ScrollBar.prototype.resizeThumb = function (e) {\n    var currentWidth;\n    var circleRadius = 8;\n    var padding = 5;\n    var gripWidth = 14;\n    var minThumbWidth = circleRadius * 2 + padding * 2 + gripWidth;\n    var thumbX = this.previousRectX; // let mouseXY: number = this.isVertical ? this.mouseY : this.mouseX;\n\n    var mouseXY = this.isVertical && this.axis.isInversed ? this.mouseY : this.isVertical ? this.width - this.mouseY : this.axis.isInversed ? this.width - this.mouseX : this.mouseX;\n    var diff = Math.abs(this.previousXY - mouseXY);\n\n    if (this.isResizeLeft && mouseXY >= 0) {\n      var currentX = thumbX + (mouseXY > this.previousXY ? diff : -diff);\n      currentWidth = currentX - circleRadius >= 0 ? this.previousWidth + (mouseXY > this.previousXY ? -diff : diff) : this.previousWidth;\n      currentX = currentX - circleRadius >= 0 ? currentX : thumbX;\n\n      if (currentWidth >= minThumbWidth && mouseXY < currentX + currentWidth) {\n        this.scrollElements.thumbRectX = this.previousRectX = currentX;\n        this.scrollElements.thumbRectWidth = this.previousWidth = currentWidth;\n        this.previousXY = mouseXY;\n        this.positionThumb(currentX, currentWidth);\n        this.setZoomFactorPosition(currentX, currentWidth);\n      }\n    } else if (this.isResizeRight) {\n      currentWidth = mouseXY >= minThumbWidth + this.scrollElements.thumbRectX && mouseXY <= this.width - circleRadius ? mouseXY - this.scrollElements.thumbRectX : this.previousWidth;\n      this.scrollElements.thumbRectWidth = this.previousWidth = currentWidth;\n      this.previousXY = mouseXY;\n      this.positionThumb(this.startX, currentWidth);\n      this.setZoomFactorPosition(this.startX, currentWidth);\n\n      if (!this.isLazyLoad) {\n        this.setZoomFactorPosition(this.startX, currentWidth);\n      }\n    }\n  };\n  /**\n   * Method to position the scrollbar thumb\n   * @param currentX\n   * @param currentWidth\n   */\n\n\n  ScrollBar.prototype.positionThumb = function (currentX, currentWidth) {\n    var circlePadding = 3;\n    var elem = this.scrollElements;\n    var gripWidth = 14;\n    var gripCircleDiameter = 2;\n    var padding = gripWidth / 2 - gripCircleDiameter;\n    elem.slider.setAttribute('x', currentX.toString());\n    elem.slider.setAttribute('width', currentWidth.toString());\n    elem.leftCircleEle.setAttribute('cx', currentX.toString());\n    elem.rightCircleEle.setAttribute('cx', (currentX + currentWidth).toString());\n    elem.setArrowDirection(currentX, currentWidth, this.height);\n    elem.gripCircle.setAttribute('transform', 'translate(' + (currentX + currentWidth / 2 + (this.isVertical ? 1 : -1) * padding) + ',' + (this.isVertical ? '10' : '5') + ') rotate(' + (this.isVertical ? '180' : '0') + ')');\n  };\n  /**\n   * Method to get default values\n   */\n\n\n  ScrollBar.prototype.getDefaults = function () {\n    var axis = this.axis;\n\n    if (this.axis.scrollbarSettings.enable) {\n      this.isLazyLoad = true;\n      this.getLazyDefaults(axis);\n    }\n\n    var circleRadius = 8;\n    var padding = 5;\n    var gripWidth = 14;\n    var minThumbWidth = circleRadius * 2 + padding * 2 + gripWidth;\n    this.isVertical = axis.orientation === 'Vertical';\n    var lazyRange = axis.scrollbarSettings.range;\n    this.zoomFactor = this.isLazyLoad ? this.zoomFactor : axis.zoomFactor;\n    this.zoomPosition = this.isLazyLoad ? this.zoomPosition : axis.zoomPosition;\n    var currentWidth = this.zoomFactor * (this.isVertical ? axis.rect.height : axis.rect.width);\n    currentWidth = currentWidth > minThumbWidth ? currentWidth : minThumbWidth;\n    this.scrollX = axis.rect.x;\n    this.scrollY = axis.rect.y;\n    this.width = this.isVertical ? axis.rect.height : axis.rect.width;\n    this.height = 16;\n    var currentX = this.zoomPosition * (this.isVertical ? axis.rect.height : this.width);\n    var minThumbX = this.width - minThumbWidth - circleRadius;\n    this.scrollElements.thumbRectX = currentX > minThumbX ? minThumbX : currentX < circleRadius ? circleRadius : currentX;\n    this.scrollElements.thumbRectWidth = currentWidth + this.scrollElements.thumbRectX < this.width - circleRadius * 2 ? currentWidth : this.width - this.scrollElements.thumbRectX - circleRadius;\n  };\n  /**\n   * Lazy load default values\n   */\n\n\n  ScrollBar.prototype.getLazyDefaults = function (axis) {\n    var start;\n    var end;\n    var valueType = axis.valueType;\n    var scrollbarSettings = axis.scrollbarSettings;\n    this.valueType = valueType = (!scrollbarSettings.range.minimum || !scrollbarSettings.range.maximum) && scrollbarSettings.pointsLength ? 'Double' : valueType;\n    var range = axis.scrollbarSettings.range;\n    var visibleRange = axis.visibleRange;\n    var pointsLength = axis.scrollbarSettings.pointsLength;\n    var zoomFactor;\n    var zoomPosition;\n    var option = {\n      skeleton: 'full',\n      type: 'dateTime'\n    };\n    var dateParser = this.component.intl.getDateParser(option);\n    var dateFormatter = this.component.intl.getDateFormat(option);\n\n    switch (valueType) {\n      case 'Double':\n      case 'Category':\n      case 'Logarithmic':\n        start = range.minimum ? range.minimum : pointsLength ? 0 : visibleRange.min;\n        end = range.maximum ? range.maximum : pointsLength ? pointsLength - 1 : visibleRange.max;\n        break;\n\n      case 'DateTime':\n      case 'DateTimeCategory':\n        start = range.minimum ? Date.parse(dateParser(dateFormatter(range.minimum))) : visibleRange.min;\n        end = range.maximum ? Date.parse(dateParser(dateFormatter(range.maximum))) : visibleRange.max;\n        break;\n    }\n\n    start = Math.min(start, visibleRange.min);\n    end = Math.max(end, visibleRange.max);\n    zoomFactor = (visibleRange.max - visibleRange.min) / (end - start);\n    zoomPosition = (visibleRange.min - start) / (end - start);\n    this.zoomFactor = range.minimum || range.maximum ? zoomFactor : this.axis.maxPointLength / axis.scrollbarSettings.pointsLength;\n    this.zoomPosition = range.minimum || range.maximum ? zoomPosition : axis.zoomPosition;\n    this.scrollRange.min = start;\n    this.scrollRange.max = end;\n    this.scrollRange.delta = end - start;\n    this.previousStart = visibleRange.min;\n    this.previousEnd = visibleRange.max;\n  };\n  /**\n   * Method to get log range\n   */\n\n\n  ScrollBar.prototype.getLogRange = function (axis) {\n    var logRange;\n    var range = axis.scrollbarSettings.range;\n    var start = logBase(range.minimum, axis.logBase);\n    start = isFinite(start) ? start : range.minimum;\n    var end = logBase(range.maximum, axis.logBase);\n    end = isFinite(start) ? end : range.maximum;\n    logRange = {\n      minimum: Math.floor(start / 1),\n      maximum: Math.ceil(end / 1)\n    };\n    return logRange;\n  };\n  /**\n   * Method for injecting scrollbar module\n   * @param axis\n   * @param component\n   */\n\n\n  ScrollBar.prototype.injectTo = function (axis, component) {\n    axis.zoomingScrollBar = new ScrollBar(component, axis);\n  };\n  /**\n   * Method to destroy scrollbar\n   */\n\n\n  ScrollBar.prototype.destroy = function () {\n    var _this = this;\n\n    if (this.axes) {\n      this.axes.map(function (axis) {\n        axis.zoomingScrollBar.destroy();\n      });\n    } else {\n      this.elements.map(function (element) {\n        _this.unWireEvents(element);\n\n        remove(element.firstChild);\n      });\n      this.elements = [];\n    }\n  };\n  /**\n   * Method to get scrollbar module name\n   */\n\n\n  ScrollBar.prototype.getModuleName = function () {\n    return 'ScrollBar';\n  };\n\n  ScrollBar.prototype.getArgs = function (eventName, range, zoomPosition, zoomFactor, currentRanges) {\n    var scrollArgs = {\n      axis: this.component.isBlazor ? {} : this.axis,\n      name: eventName,\n      range: this.axis.visibleRange,\n      zoomFactor: this.axis.zoomFactor,\n      zoomPosition: this.axis.zoomPosition,\n      previousRange: range,\n      previousZoomFactor: zoomFactor,\n      previousZoomPosition: zoomPosition,\n      currentRange: currentRanges\n    };\n    return scrollArgs;\n  };\n\n  return ScrollBar;\n}();\n\nexport { ScrollBar };","map":{"version":3,"names":["EventHandler","Browser","remove","ScrollElements","createScrollSvg","getElement","minMax","logBase","getScrollbarThemeColor","scrollChanged","scrollEnd","scrollStart","ScrollBar","component","axis","scrollRange","max","min","interval","delta","elements","scrollElements","mouseMoveListener","scrollMouseMove","bind","mouseUpListener","scrollMouseUp","animateDuration","isPointer","browserName","info","name","prototype","getMouseXY","e","pageX","pageY","touchArg","type","indexOf","changedTouches","clientX","clientY","svgRect","element","id","getBoundingClientRect","mouseX","Math","left","mouseY","top","wireEvents","add","touchStartEvent","scrollMouseDown","touchMoveEvent","touchEndEvent","scrollMouseWheel","window","addEventListener","unWireEvents","removeEventListener","target","elem","isResizeLeft","isExist","isResizeRight","previousXY","isVertical","isInversed","width","previousWidth","thumbRectWidth","previousRectX","thumbRectX","startZoomPosition","zoomPosition","startZoomFactor","zoomFactor","startRange","visibleRange","scrollStarted","trigger","getArgs","isThumbDrag","svgObject","style","cursor","currentX","moveLength","isWithIn","positionThumb","setZoomFactorPosition","isLazyLoad","thumbMove","args","calculateLazyRange","height","isCustomHeight","availableSize","match","circleRadius","mouseXY","thumbX","currentWidth","isRequire","isScrollUI","circleWidth","currentScrollWidth","currentZPWidth","rect","setCursor","setTheme","range","currentRange","isScrolling","resizeThumb","origin","direction","detail","wheelDelta","cumulative","orientation","calculateMouseWheelRange","minimum","previousAxisRange","maximum","isScrollEnd","startX","abs","scrollThumbX","scrollThumbWidth","currentStart","currentEnd","previousRange","getStartEnd","previousStart","previousEnd","isBlazor","start","end","isCurrentStartEnd","valueType","round","ceil","Date","render","isScrollExist","zoomModule","scrollbarSettings","enable","getDefaults","getTheme","removeScrollSvg","svgRenderer","appendChild","renderElements","scrollbarThemeStyle","theme","document","getElementById","isLeftHover","isRightHover","leftArrowEle","rightArrowEle","leftCircleEle","rightCircleEle","isAxis","isCurrentAxis","fill","circleHover","circle","stroke","arrowHover","arrow","ele","split","padding","gripWidth","minThumbWidth","diff","circlePadding","gripCircleDiameter","slider","setAttribute","toString","setArrowDirection","gripCircle","getLazyDefaults","lazyRange","scrollX","x","scrollY","y","minThumbX","pointsLength","option","skeleton","dateParser","intl","getDateParser","dateFormatter","getDateFormat","parse","maxPointLength","getLogRange","logRange","isFinite","floor","injectTo","zoomingScrollBar","destroy","_this","axes","map","firstChild","getModuleName","eventName","currentRanges","scrollArgs","previousZoomFactor","previousZoomPosition"],"sources":["D:/Theme/package/node_modules/@syncfusion/ej2-charts/src/common/scrollbar/scrollbar.js"],"sourcesContent":["import { EventHandler, Browser, remove } from '@syncfusion/ej2-base';\nimport { ScrollElements, createScrollSvg } from './scrollbar-elements';\nimport { getElement, minMax, logBase } from '../utils/helper';\nimport { getScrollbarThemeColor } from '../model/theme';\nimport { scrollChanged, scrollEnd, scrollStart } from '../model/constants';\n/**\n * Scrollbar Base\n */\nvar ScrollBar = /** @class */ (function () {\n    /**\n     * Constructor for creating scrollbar\n     * @param component\n     * @param axis\n     */\n    function ScrollBar(component, axis) {\n        /** @private */\n        this.scrollRange = { max: null, min: null, interval: null, delta: null };\n        this.component = component;\n        this.elements = [];\n        this.scrollElements = new ScrollElements(component);\n        this.axis = axis;\n        this.mouseMoveListener = this.scrollMouseMove.bind(this);\n        this.mouseUpListener = this.scrollMouseUp.bind(this);\n        this.animateDuration = 500;\n        this.isPointer = Browser.isPointer;\n        this.browserName = Browser.info.name;\n    }\n    /**\n     * To Mouse x and y position\n     * @param e\n     */\n    ScrollBar.prototype.getMouseXY = function (e) {\n        var pageX;\n        var pageY;\n        var touchArg;\n        if (e.type.indexOf('touch') > -1) {\n            touchArg = e;\n            pageX = touchArg.changedTouches[0].clientX;\n            pageY = touchArg.changedTouches[0].clientY;\n        }\n        else {\n            pageX = e.clientX;\n            pageY = e.clientY;\n        }\n        var svgRect = getElement(this.component.element.id + '_scrollBar_svg' + this.axis.name).getBoundingClientRect();\n        this.mouseX = pageX - Math.max(svgRect.left, 0);\n        this.mouseY = pageY - Math.max(svgRect.top, 0);\n    };\n    /**\n     * Method to bind events for scrollbar svg object\n     * @param element\n     */\n    ScrollBar.prototype.wireEvents = function (element) {\n        EventHandler.add(element, Browser.touchStartEvent, this.scrollMouseDown, this);\n        EventHandler.add(element, Browser.touchMoveEvent, this.scrollMouseMove, this);\n        EventHandler.add(element, Browser.touchEndEvent, this.scrollMouseUp, this);\n        EventHandler.add(element, 'mousewheel', this.scrollMouseWheel, this);\n        window.addEventListener('mousemove', this.mouseMoveListener, false);\n        window.addEventListener('mouseup', this.mouseUpListener, false);\n    };\n    /**\n     * Method to remove events for srcollbar svg object\n     * @param element\n     */\n    ScrollBar.prototype.unWireEvents = function (element) {\n        EventHandler.remove(element, Browser.touchStartEvent, this.scrollMouseDown);\n        EventHandler.remove(element, Browser.touchMoveEvent, this.scrollMouseMove);\n        EventHandler.remove(element, Browser.touchEndEvent, this.scrollMouseUp);\n        EventHandler.remove(element, 'mousewheel', this.scrollMouseWheel);\n        window.removeEventListener('mousemove', this.mouseMoveListener, false);\n        window.removeEventListener('mouseup', this.mouseUpListener, false);\n    };\n    /**\n     * Handles the mouse down on scrollbar\n     * @param e\n     */\n    ScrollBar.prototype.scrollMouseDown = function (e) {\n        var id = e.target.id;\n        var elem = this.scrollElements;\n        this.getMouseXY(e);\n        this.isResizeLeft = this.isExist(id, '_leftCircle_') || this.isExist(id, '_leftArrow_');\n        this.isResizeRight = this.isExist(id, '_rightCircle_') || this.isExist(id, '_rightArrow_');\n        //  this.previousXY = this.isVertical ? this.mouseY : this.mouseX;\n        this.previousXY = (this.isVertical && this.axis.isInversed) ? this.mouseY : this.isVertical ? this.width -\n            this.mouseY : this.axis.isInversed ? this.width - this.mouseX : this.mouseX;\n        this.previousWidth = elem.thumbRectWidth;\n        this.previousRectX = elem.thumbRectX;\n        this.startZoomPosition = this.axis.zoomPosition;\n        this.startZoomFactor = this.axis.zoomFactor;\n        this.startRange = this.axis.visibleRange;\n        this.scrollStarted = true;\n        this.component.trigger(scrollStart, this.getArgs(scrollStart));\n        if (this.isExist(id, 'scrollBarThumb_')) {\n            this.isThumbDrag = true;\n            this.svgObject.style.cursor = '-webkit-grabbing';\n        }\n        else if (this.isExist(id, 'scrollBarBackRect_')) {\n            var currentX = this.moveLength(this.previousXY, this.previousRectX);\n            elem.thumbRectX = this.isWithIn(currentX) ? currentX : elem.thumbRectX;\n            this.positionThumb(elem.thumbRectX, elem.thumbRectWidth);\n            this.setZoomFactorPosition(elem.thumbRectX, elem.thumbRectWidth, false);\n            if (this.isLazyLoad) {\n                var thumbMove = elem.thumbRectX > this.previousRectX ? 'RightMove' : 'LeftMove';\n                var args = this.calculateLazyRange(elem.thumbRectX, elem.thumbRectWidth, thumbMove);\n                if (args) {\n                    this.component.trigger(scrollEnd, args);\n                }\n            }\n        }\n        /**\n         * Customer issue\n         * Task ID - EJ2-28898\n         * Issue: While element's height is smaller than chart'height, html scroll bar presents. On that case while moving chart scrollbar,\n         * html scrollbar goes up due to chart's svg removed from the dom when zoomFactor and zoomPosition chnaged\n         * Fix: Only for scrolling purpose, height for element is set to chart's available height\n         */\n        if (this.component.element.style.height === '') {\n            this.isCustomHeight = true;\n            this.component.element.style.height = this.component.availableSize.height + 'px';\n        }\n    };\n    /**\n     * To check the matched string\n     * @param id\n     * @param match\n     */\n    ScrollBar.prototype.isExist = function (id, match) {\n        return id.indexOf(match) > -1;\n    };\n    /**\n     * To check current poisition is within scrollbar region\n     * @param currentX\n     */\n    ScrollBar.prototype.isWithIn = function (currentX) {\n        var circleRadius = 8;\n        return (currentX - circleRadius >= 0 &&\n            currentX + this.scrollElements.thumbRectWidth + circleRadius <= this.width);\n    };\n    /**\n     * Method to find move length of thumb\n     * @param mouseXY\n     * @param thumbX\n     * @param circleRadius\n     */\n    ScrollBar.prototype.moveLength = function (mouseXY, thumbX, circleRadius) {\n        if (circleRadius === void 0) { circleRadius = 8; }\n        var moveLength = (10 / 100) * (this.width - circleRadius * 2);\n        if (mouseXY < thumbX) {\n            moveLength = thumbX - (thumbX - moveLength > circleRadius ? moveLength : circleRadius);\n        }\n        else {\n            moveLength = thumbX + (thumbX + this.scrollElements.thumbRectWidth + moveLength < this.width - circleRadius ?\n                moveLength : circleRadius);\n        }\n        return moveLength;\n    };\n    /**\n     * Method to calculate zoom factor and position\n     * @param currentX\n     * @param currentWidth\n     */\n    ScrollBar.prototype.setZoomFactorPosition = function (currentX, currentWidth, isRequire) {\n        if (isRequire === void 0) { isRequire = true; }\n        var axis = this.axis;\n        this.isScrollUI = true;\n        var circleRadius = 8;\n        var circleWidth = 1;\n        var currentScrollWidth = currentX + currentWidth + circleRadius + circleWidth;\n        var currentZPWidth = circleRadius + (circleWidth / 2);\n        this.zoomPosition = (currentX - (currentX - currentZPWidth <= 0 ? currentZPWidth : 0)) / (this.isVertical\n            ? axis.rect.height : this.width);\n        this.zoomFactor = (currentWidth + (currentScrollWidth >= this.width ? circleRadius + circleWidth : 0)) / (this.isVertical\n            ? axis.rect.height : this.width);\n        axis.zoomPosition = this.zoomPosition < 0 ? 0 : this.zoomPosition > 0.9 ? 1 : this.zoomPosition;\n        axis.zoomFactor = isRequire ? this.zoomFactor : axis.zoomFactor;\n    };\n    /**\n     * Handles the mouse move on scrollbar\n     * @param e\n     */\n    ScrollBar.prototype.scrollMouseMove = function (e) {\n        var target = e.target;\n        var elem = this.scrollElements;\n        this.getMouseXY(e);\n        this.setCursor(target);\n        this.setTheme(target);\n        //let mouseXY: number = this.isVertical ? this.mouseY : this.mouseX;\n        var mouseXY = (this.isVertical && this.axis.isInversed) ? this.width - this.mouseY : this.isVertical ?\n            this.mouseY : this.mouseX;\n        var range = this.axis.visibleRange;\n        var zoomPosition = this.zoomPosition;\n        var zoomFactor = this.zoomFactor;\n        var moveLength = this.previousRectX - elem.thumbRectX;\n        var thumbMove = moveLength < 0 ? 'RightMove' : 'LeftMove';\n        var args;\n        if (this.isLazyLoad && (this.isThumbDrag || this.isResizeLeft || this.isResizeRight)) {\n            args = this.calculateLazyRange(elem.thumbRectX, elem.thumbRectWidth, thumbMove);\n        }\n        var currentRange = args ? args.currentRange : null;\n        if (this.isThumbDrag) {\n            this.component.isScrolling = this.isThumbDrag;\n            mouseXY = (this.isVertical || this.axis.isInversed) ? this.width - mouseXY : mouseXY;\n            var currentX = elem.thumbRectX + (mouseXY - this.previousXY);\n            if (mouseXY >= currentX + elem.thumbRectWidth) {\n                this.setCursor(target);\n            }\n            else {\n                this.svgObject.style.cursor = '-webkit-grabbing';\n            }\n            if (mouseXY >= 0 && mouseXY <= currentX + elem.thumbRectWidth) {\n                elem.thumbRectX = this.isWithIn(currentX) ? currentX : elem.thumbRectX;\n                this.positionThumb(elem.thumbRectX, elem.thumbRectWidth);\n                this.previousXY = mouseXY;\n                this.setZoomFactorPosition(currentX, elem.thumbRectWidth, false);\n            }\n            this.component.trigger(scrollChanged, this.getArgs(scrollChanged, range, zoomPosition, zoomFactor, currentRange));\n        }\n        else if (this.isResizeLeft || this.isResizeRight) {\n            this.resizeThumb(e);\n            this.component.trigger(scrollChanged, this.getArgs(scrollChanged, range, zoomPosition, zoomFactor, currentRange));\n        }\n    };\n    /**\n     * Handles the mouse wheel on scrollbar\n     * @param e\n     */\n    ScrollBar.prototype.scrollMouseWheel = function (e) {\n        var svgRect = getElement(this.component.element.id + '_scrollBar_svg' + this.axis.name).getBoundingClientRect();\n        this.mouseX = e.clientX - Math.max(svgRect.left, 0);\n        this.mouseY = e.clientY - Math.max(svgRect.top, 0);\n        var origin = 0.5;\n        var elem = this.scrollElements;\n        var axis = this.axis;\n        var direction = (this.browserName === 'mozilla' && !this.isPointer) ?\n            -(e.detail) / 3 > 0 ? 1 : -1 : (e.wheelDelta / 120) > 0 ? 1 : -1;\n        var cumulative;\n        cumulative = Math.max(Math.max(1 / minMax(axis.zoomFactor, 0, 1), 1) + (0.25 * direction), 1);\n        var range = this.axis.visibleRange;\n        var zoomPosition = this.zoomPosition;\n        var zoomFactor = this.zoomFactor;\n        var args;\n        if (cumulative >= 1) {\n            origin = axis.orientation === 'Horizontal' ? this.mouseX / axis.rect.width : 1 - (this.mouseY / axis.rect.height);\n            origin = origin > 1 ? 1 : origin < 0 ? 0 : origin;\n            this.zoomFactor = (cumulative === 1) ? 1 : minMax(1 / cumulative, 0, 1);\n            this.zoomPosition = (cumulative === 1) ? 0 : axis.zoomPosition + ((axis.zoomFactor - this.zoomFactor) * origin);\n        }\n        elem.thumbRectX = this.isWithIn(this.zoomPosition * this.width) ? this.zoomPosition * this.width : elem.thumbRectX;\n        this.isScrollUI = true;\n        this.positionThumb(elem.thumbRectX, elem.thumbRectWidth);\n        if (this.isLazyLoad) {\n            this.setZoomFactorPosition(elem.thumbRectX, elem.thumbRectWidth);\n        }\n        axis.zoomFactor = this.zoomFactor;\n        axis.zoomPosition = this.zoomPosition;\n        if (this.isLazyLoad) {\n            args = this.calculateMouseWheelRange(elem.thumbRectX, elem.thumbRectWidth);\n            if (args) {\n                if ((args.currentRange.minimum !== args.previousAxisRange.minimum) && (args.currentRange.maximum !==\n                    args.previousAxisRange.maximum)) {\n                    this.component.trigger(scrollEnd, args);\n                    this.isScrollEnd = false;\n                }\n            }\n        }\n        if (!this.isLazyLoad) {\n            this.component.trigger(scrollChanged, this.getArgs(scrollChanged, range, zoomPosition, zoomFactor));\n        }\n    };\n    /**\n     * Handles the mouse up on scrollbar\n     * @param e\n     */\n    ScrollBar.prototype.scrollMouseUp = function (e) {\n        var circleRadius = 8;\n        var circleWidth = 1;\n        var args;\n        this.startX = this.scrollElements.thumbRectX;\n        var currentScrollWidth = this.startX + this.scrollElements.thumbRectWidth + circleRadius + circleWidth;\n        var currentZPWidth = circleRadius + (circleWidth / 2);\n        if ((this.isResizeLeft || this.isResizeRight) && !this.isLazyLoad) {\n            this.axis.zoomFactor = (currentScrollWidth >= this.width - 1 && (this.startX - currentZPWidth) <= 0) ? 1 : this.zoomFactor;\n        }\n        if (this.isLazyLoad) {\n            var moveLength = this.previousRectX - this.startX;\n            if ((moveLength > 0 || moveLength < 0) && this.isThumbDrag) {\n                var thumbMove = moveLength < 0 ? 'RightMove' : 'LeftMove';\n                if (thumbMove === 'RightMove') {\n                    this.startX = (this.startX + Math.abs(moveLength)) < this.width - circleRadius ? this.startX :\n                        this.width - circleRadius - this.scrollElements.thumbRectWidth;\n                }\n                else {\n                    this.startX = (this.startX + this.scrollElements.thumbRectWidth - Math.abs(moveLength)) > circleRadius ?\n                        this.startX : circleRadius;\n                }\n                args = this.calculateLazyRange(this.startX, this.scrollElements.thumbRectWidth, thumbMove);\n                if (args) {\n                    this.component.trigger(scrollEnd, args);\n                    this.scrollStarted = false;\n                }\n            }\n            if (this.isResizeLeft || this.isResizeRight) {\n                args = this.calculateLazyRange(this.startX, this.scrollElements.thumbRectWidth);\n                if (args) {\n                    this.component.trigger(scrollEnd, args);\n                    this.scrollStarted = false;\n                }\n            }\n        }\n        this.isThumbDrag = false;\n        this.isResizeLeft = false;\n        this.isResizeRight = false;\n        this.isScrollEnd = false;\n        this.component.isScrolling = false;\n        if (this.scrollStarted && !this.isLazyLoad) {\n            this.component.trigger(scrollEnd, this.getArgs(scrollChanged, this.startRange, this.startZoomPosition, this.startZoomFactor));\n            this.scrollStarted = false;\n        }\n        /**\n         * Customer issue\n         * Task ID - EJ2-28898\n         * Chart's height setted is removed here.\n         */\n        if (this.isCustomHeight) {\n            this.component.element.style.height = null;\n        }\n    };\n    ScrollBar.prototype.calculateMouseWheelRange = function (scrollThumbX, scrollThumbWidth) {\n        var zoomFactor;\n        var zoomPosition;\n        var currentStart;\n        var currentEnd;\n        var args;\n        var range = this.scrollRange;\n        var previousRange = this.getStartEnd(this.previousStart, this.previousEnd, false);\n        var circleRadius = 8;\n        if ((scrollThumbX + scrollThumbWidth + circleRadius) <= this.width) {\n            zoomPosition = (scrollThumbX - circleRadius) / this.width;\n            zoomFactor = scrollThumbWidth / (this.width);\n        }\n        currentStart = range.min + zoomPosition * range.delta;\n        currentEnd = currentStart + zoomFactor * range.delta;\n        if (currentEnd) {\n            args = { axis: this.axis, currentRange: this.getStartEnd(currentStart, currentEnd, true), previousAxisRange: previousRange };\n        }\n        return args;\n    };\n    ;\n    /**\n     * Range calculation for lazy loading\n     */\n    ScrollBar.prototype.calculateLazyRange = function (scrollThumbX, scrollThumbWidth, thumbMove) {\n        var currentScrollWidth = scrollThumbWidth;\n        var zoomFactor;\n        var zoomPosition;\n        var currentStart;\n        var currentEnd;\n        var args;\n        var range = this.scrollRange;\n        var previousRange = this.getStartEnd(this.previousStart, this.previousEnd, false);\n        var circleRadius = 8;\n        var circleWidth = 16;\n        if (this.isResizeRight || thumbMove === 'RightMove') {\n            currentScrollWidth = this.isResizeRight ? currentScrollWidth + circleWidth : currentScrollWidth;\n            zoomFactor = (currentScrollWidth + circleRadius) / this.width;\n            zoomPosition = thumbMove === 'RightMove' ? (scrollThumbX + circleRadius) / this.width : this.axis.zoomPosition;\n            currentStart = thumbMove === 'RightMove' ? (range.min + zoomPosition * range.delta) : this.previousStart;\n            currentEnd = currentStart + zoomFactor * range.delta;\n        }\n        else if (this.isResizeLeft || thumbMove === 'LeftMove') {\n            zoomPosition = (scrollThumbX - circleRadius) / this.width;\n            zoomFactor = currentScrollWidth / this.width;\n            currentStart = range.min + zoomPosition * range.delta;\n            currentStart = currentStart >= range.min ? currentStart : range.min;\n            currentEnd = thumbMove === 'LeftMove' ? (currentStart + zoomFactor * range.delta) : this.previousEnd;\n        }\n        else if (this.isThumbDrag) {\n            zoomPosition = thumbMove === 'RightMove' ? (scrollThumbX + circleRadius) / this.width : (scrollThumbX - circleRadius) / this.width;\n            zoomFactor = (this.scrollElements.thumbRectWidth) / this.width;\n            currentStart = range.min + zoomPosition * range.delta;\n            currentStart = currentStart >= range.min ? currentStart : range.min;\n            currentEnd = currentStart + zoomFactor * range.delta;\n        }\n        if (currentEnd) {\n            args = { axis: (this.component.isBlazor ? {} : this.axis), currentRange: this.getStartEnd(currentStart, currentEnd, true),\n                previousAxisRange: previousRange };\n        }\n        return args;\n    };\n    /**\n     * Get start and end values\n     */\n    ScrollBar.prototype.getStartEnd = function (start, end, isCurrentStartEnd) {\n        var range;\n        var valueType = this.valueType;\n        if ((valueType === 'DateTime' || valueType === 'DateTimeCategory') && isCurrentStartEnd) {\n            this.previousStart = start;\n            this.previousEnd = end;\n        }\n        else if (isCurrentStartEnd) {\n            this.previousStart = Math.round(start);\n            this.previousEnd = Math.ceil(end);\n        }\n        switch (valueType) {\n            case 'Double':\n            case 'Category':\n            case 'Logarithmic':\n                start = Math.round(start);\n                end = Math.ceil(end);\n                break;\n            case 'DateTime':\n            case 'DateTimeCategory':\n                start = new Date(start);\n                end = new Date(end);\n                break;\n        }\n        return range = { minimum: start, maximum: end };\n    };\n    /**\n     * To render scroll bar\n     * @private\n     */\n    ScrollBar.prototype.render = function (isScrollExist) {\n        if (this.component.zoomModule || (isScrollExist && this.axis.scrollbarSettings.enable)) {\n            this.getDefaults();\n        }\n        this.getTheme();\n        this.removeScrollSvg();\n        createScrollSvg(this, this.component.svgRenderer);\n        this.wireEvents(this.svgObject);\n        this.svgObject.appendChild(this.scrollElements.renderElements(this, this.component.svgRenderer));\n        return this.svgObject;\n    };\n    /**\n     * Theming for scrollabr\n     */\n    ScrollBar.prototype.getTheme = function () {\n        this.scrollbarThemeStyle = getScrollbarThemeColor(this.component.theme);\n    };\n    /**\n     * Method to remove existing scrollbar\n     */\n    ScrollBar.prototype.removeScrollSvg = function () {\n        if (document.getElementById(this.component.element.id + '_scrollBar_svg' + this.axis.name)) {\n            remove(document.getElementById(this.component.element.id + '_scrollBar_svg' + this.axis.name));\n        }\n    };\n    /**\n     * Method to set cursor fpr scrollbar\n     * @param target\n     */\n    ScrollBar.prototype.setCursor = function (target) {\n        var id = target.id;\n        this.svgObject.style.cursor = id.indexOf('scrollBarThumb_') > -1 || id.indexOf('_gripCircle') > -1 ?\n            '-webkit-grab' : (id.indexOf('Circle_') > -1 || id.indexOf('Arrow_') > -1) ? this.isVertical ? 'ns-resize' :\n            'ew-resize' : 'auto';\n    };\n    /**\n     * Method to set theme for sollbar\n     * @param target\n     */\n    ScrollBar.prototype.setTheme = function (target) {\n        var id = target.id;\n        var isLeftHover = id.indexOf('_leftCircle_') > -1 || id.indexOf('_leftArrow_') > -1;\n        var isRightHover = id.indexOf('_rightCircle_') > -1 || id.indexOf('_rightArrow_') > -1;\n        var style = this.scrollbarThemeStyle;\n        var leftArrowEle = this.scrollElements.leftArrowEle;\n        var rightArrowEle = this.scrollElements.rightArrowEle;\n        var leftCircleEle = this.scrollElements.leftCircleEle;\n        var rightCircleEle = this.scrollElements.rightCircleEle;\n        var isAxis = this.isCurrentAxis(target, leftArrowEle);\n        leftCircleEle.style.fill = isLeftHover && isAxis ? style.circleHover : style.circle;\n        rightCircleEle.style.fill = isRightHover && isAxis ? style.circleHover : style.circle;\n        leftCircleEle.style.stroke = isLeftHover && isAxis ? style.circleHover : style.circle;\n        rightCircleEle.style.stroke = isRightHover && isAxis ? style.circleHover : style.circle;\n        if (this.component.theme === 'HighContrastLight') {\n            leftArrowEle.style.fill = isLeftHover && isAxis ? style.arrowHover : style.arrow;\n            leftArrowEle.style.stroke = isLeftHover && isAxis ? style.arrowHover : style.arrow;\n            rightArrowEle.style.fill = isRightHover && isAxis ? style.arrowHover : style.arrow;\n            rightArrowEle.style.stroke = isRightHover && isAxis ? style.arrowHover : style.arrow;\n            leftCircleEle.style.stroke = isLeftHover && isAxis ? style.circleHover : style.circle;\n            rightCircleEle.style.stroke = isRightHover && isAxis ? style.circleHover : style.circle;\n        }\n    };\n    /**\n     * To check current axis\n     * @param target\n     * @param ele\n     */\n    ScrollBar.prototype.isCurrentAxis = function (target, ele) {\n        return (target.id.split('_')[2] === ele.id.split('_')[2]);\n    };\n    /**\n     * Method to resize thumb\n     * @param e\n     */\n    ScrollBar.prototype.resizeThumb = function (e) {\n        var currentWidth;\n        var circleRadius = 8;\n        var padding = 5;\n        var gripWidth = 14;\n        var minThumbWidth = circleRadius * 2 + padding * 2 + gripWidth;\n        var thumbX = this.previousRectX;\n        // let mouseXY: number = this.isVertical ? this.mouseY : this.mouseX;\n        var mouseXY = (this.isVertical && this.axis.isInversed) ? this.mouseY : this.isVertical ? this.width -\n            this.mouseY : this.axis.isInversed ? this.width - this.mouseX : this.mouseX;\n        var diff = Math.abs(this.previousXY - mouseXY);\n        if (this.isResizeLeft && mouseXY >= 0) {\n            var currentX = thumbX + (mouseXY > this.previousXY ? diff : -diff);\n            currentWidth = currentX - circleRadius >= 0 ? this.previousWidth + (mouseXY > this.previousXY ? -diff : diff) :\n                this.previousWidth;\n            currentX = currentX - circleRadius >= 0 ? currentX : thumbX;\n            if (currentWidth >= minThumbWidth && mouseXY < currentX + currentWidth) {\n                this.scrollElements.thumbRectX = this.previousRectX = currentX;\n                this.scrollElements.thumbRectWidth = this.previousWidth = currentWidth;\n                this.previousXY = mouseXY;\n                this.positionThumb(currentX, currentWidth);\n                this.setZoomFactorPosition(currentX, currentWidth);\n            }\n        }\n        else if (this.isResizeRight) {\n            currentWidth = mouseXY >= minThumbWidth + this.scrollElements.thumbRectX && mouseXY <= this.width - circleRadius ?\n                mouseXY - this.scrollElements.thumbRectX : this.previousWidth;\n            this.scrollElements.thumbRectWidth = this.previousWidth = currentWidth;\n            this.previousXY = mouseXY;\n            this.positionThumb(this.startX, currentWidth);\n            this.setZoomFactorPosition(this.startX, currentWidth);\n            if (!this.isLazyLoad) {\n                this.setZoomFactorPosition(this.startX, currentWidth);\n            }\n        }\n    };\n    /**\n     * Method to position the scrollbar thumb\n     * @param currentX\n     * @param currentWidth\n     */\n    ScrollBar.prototype.positionThumb = function (currentX, currentWidth) {\n        var circlePadding = 3;\n        var elem = this.scrollElements;\n        var gripWidth = 14;\n        var gripCircleDiameter = 2;\n        var padding = gripWidth / 2 - gripCircleDiameter;\n        elem.slider.setAttribute('x', currentX.toString());\n        elem.slider.setAttribute('width', currentWidth.toString());\n        elem.leftCircleEle.setAttribute('cx', currentX.toString());\n        elem.rightCircleEle.setAttribute('cx', (currentX + currentWidth).toString());\n        elem.setArrowDirection(currentX, currentWidth, this.height);\n        elem.gripCircle.setAttribute('transform', 'translate(' + (currentX + currentWidth / 2 + ((this.isVertical ? 1 : -1) * padding)) +\n            ',' + (this.isVertical ? '10' : '5') + ') rotate(' + (this.isVertical ? '180' : '0') + ')');\n    };\n    /**\n     * Method to get default values\n     */\n    ScrollBar.prototype.getDefaults = function () {\n        var axis = this.axis;\n        if (this.axis.scrollbarSettings.enable) {\n            this.isLazyLoad = true;\n            this.getLazyDefaults(axis);\n        }\n        var circleRadius = 8;\n        var padding = 5;\n        var gripWidth = 14;\n        var minThumbWidth = circleRadius * 2 + padding * 2 + gripWidth;\n        this.isVertical = axis.orientation === 'Vertical';\n        var lazyRange = axis.scrollbarSettings.range;\n        this.zoomFactor = this.isLazyLoad ? this.zoomFactor : axis.zoomFactor;\n        this.zoomPosition = this.isLazyLoad ? this.zoomPosition : axis.zoomPosition;\n        var currentWidth = this.zoomFactor * (this.isVertical ? axis.rect.height : axis.rect.width);\n        currentWidth = currentWidth > minThumbWidth ? currentWidth : minThumbWidth;\n        this.scrollX = axis.rect.x;\n        this.scrollY = axis.rect.y;\n        this.width = this.isVertical ? axis.rect.height : axis.rect.width;\n        this.height = 16;\n        var currentX = this.zoomPosition * (this.isVertical ? axis.rect.height : this.width);\n        var minThumbX = (this.width - minThumbWidth - circleRadius);\n        this.scrollElements.thumbRectX = currentX > minThumbX ? minThumbX : currentX < circleRadius ? circleRadius : currentX;\n        this.scrollElements.thumbRectWidth = ((currentWidth + this.scrollElements.thumbRectX) < this.width - (circleRadius * 2))\n            ? currentWidth : this.width - this.scrollElements.thumbRectX - circleRadius;\n    };\n    /**\n     * Lazy load default values\n     */\n    ScrollBar.prototype.getLazyDefaults = function (axis) {\n        var start;\n        var end;\n        var valueType = axis.valueType;\n        var scrollbarSettings = axis.scrollbarSettings;\n        this.valueType = valueType = (!scrollbarSettings.range.minimum || !scrollbarSettings.range.maximum) &&\n            scrollbarSettings.pointsLength ? 'Double' : valueType;\n        var range = axis.scrollbarSettings.range;\n        var visibleRange = axis.visibleRange;\n        var pointsLength = axis.scrollbarSettings.pointsLength;\n        var zoomFactor;\n        var zoomPosition;\n        var option = {\n            skeleton: 'full',\n            type: 'dateTime'\n        };\n        var dateParser = this.component.intl.getDateParser(option);\n        var dateFormatter = this.component.intl.getDateFormat(option);\n        switch (valueType) {\n            case 'Double':\n            case 'Category':\n            case 'Logarithmic':\n                start = range.minimum ? range.minimum : pointsLength ? 0 : visibleRange.min;\n                end = range.maximum ? range.maximum : pointsLength ? (pointsLength - 1) : visibleRange.max;\n                break;\n            case 'DateTime':\n            case 'DateTimeCategory':\n                start = range.minimum ? Date.parse(dateParser(dateFormatter(range.minimum))) : visibleRange.min;\n                end = range.maximum ? Date.parse(dateParser(dateFormatter(range.maximum))) : visibleRange.max;\n                break;\n        }\n        start = Math.min(start, visibleRange.min);\n        end = Math.max(end, visibleRange.max);\n        zoomFactor = (visibleRange.max - visibleRange.min) / (end - start);\n        zoomPosition = (visibleRange.min - start) / (end - start);\n        this.zoomFactor = range.minimum || range.maximum ? zoomFactor : (this.axis.maxPointLength / axis.scrollbarSettings.pointsLength);\n        this.zoomPosition = range.minimum || range.maximum ? zoomPosition : axis.zoomPosition;\n        this.scrollRange.min = start;\n        this.scrollRange.max = end;\n        this.scrollRange.delta = end - start;\n        this.previousStart = visibleRange.min;\n        this.previousEnd = visibleRange.max;\n    };\n    /**\n     * Method to get log range\n     */\n    ScrollBar.prototype.getLogRange = function (axis) {\n        var logRange;\n        var range = axis.scrollbarSettings.range;\n        var start = logBase(range.minimum, axis.logBase);\n        start = isFinite(start) ? start : range.minimum;\n        var end = logBase(range.maximum, axis.logBase);\n        end = isFinite(start) ? end : range.maximum;\n        logRange = { minimum: Math.floor(start / 1), maximum: Math.ceil(end / 1) };\n        return logRange;\n    };\n    /**\n     * Method for injecting scrollbar module\n     * @param axis\n     * @param component\n     */\n    ScrollBar.prototype.injectTo = function (axis, component) {\n        axis.zoomingScrollBar = new ScrollBar(component, axis);\n    };\n    /**\n     * Method to destroy scrollbar\n     */\n    ScrollBar.prototype.destroy = function () {\n        var _this = this;\n        if (this.axes) {\n            this.axes.map(function (axis) {\n                axis.zoomingScrollBar.destroy();\n            });\n        }\n        else {\n            this.elements.map(function (element) {\n                _this.unWireEvents(element);\n                remove(element.firstChild);\n            });\n            this.elements = [];\n        }\n    };\n    /**\n     * Method to get scrollbar module name\n     */\n    ScrollBar.prototype.getModuleName = function () {\n        return 'ScrollBar';\n    };\n    ScrollBar.prototype.getArgs = function (eventName, range, zoomPosition, zoomFactor, currentRanges) {\n        var scrollArgs = {\n            axis: (this.component.isBlazor ? {} : this.axis),\n            name: eventName,\n            range: this.axis.visibleRange,\n            zoomFactor: this.axis.zoomFactor,\n            zoomPosition: this.axis.zoomPosition,\n            previousRange: range,\n            previousZoomFactor: zoomFactor,\n            previousZoomPosition: zoomPosition,\n            currentRange: currentRanges\n        };\n        return scrollArgs;\n    };\n    return ScrollBar;\n}());\nexport { ScrollBar };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}