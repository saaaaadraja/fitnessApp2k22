{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { valueToCoefficient, inside, isOverlap, textTrim } from '../../common/utils/helper';\nimport { appendChildElement } from '../../common/utils/helper';\nimport { CircleOption } from '../../common/utils/helper';\nimport { Size, measureText, TextOption, PathOption, Rect } from '@syncfusion/ej2-svg-base';\nimport { LineBase } from '../series/line-base';\nimport { textElement, ChartLocation, valueToPolarCoefficient, CoefficientToVector, getElement } from '../../common/utils/helper';\n/**\n * Specifies the Polar Axis Layout.\n */\n\nvar axisPadding = 10;\n\nvar PolarRadarPanel =\n/** @class */\nfunction (_super) {\n  __extends(PolarRadarPanel, _super);\n\n  function PolarRadarPanel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    /** @private */\n\n\n    _this.visibleAxisLabelRect = [];\n    return _this;\n  }\n  /**\n   * Measure the polar radar axis size.\n   * @return {void}\n   * @private\n   */\n\n\n  PolarRadarPanel.prototype.measureAxis = function (rect) {\n    var chart = this.chart;\n    this.initialClipRect = rect;\n    this.seriesClipRect = new Rect(rect.x, rect.y, rect.width, rect.height); //Measure axis size calculation\n\n    this.measureRowAxis(chart, this.initialClipRect);\n    this.measureColumnAxis(chart, this.initialClipRect);\n    this.calculateAxisSize();\n  };\n\n  PolarRadarPanel.prototype.measureRowAxis = function (chart, rect) {\n    this.calculateRowSize(rect);\n    var row = chart.rows[0];\n    this.measureDefinition(row, chart, new Size(chart.availableSize.width, row.computedHeight), rect);\n  };\n\n  PolarRadarPanel.prototype.measureColumnAxis = function (chart, rect) {\n    this.calculateColumnSize(rect);\n    var column = chart.columns[0];\n    this.measureDefinition(column, chart, new Size(column.computedWidth, chart.availableSize.height), rect);\n  };\n  /**\n   * Measure the column and row in chart.\n   * @return {void}\n   * @private\n   */\n\n\n  PolarRadarPanel.prototype.measureDefinition = function (definition, chart, size, clipRect) {\n    for (var _i = 0, _a = definition.axes; _i < _a.length; _i++) {\n      var axis = _a[_i];\n      axis.getModule(chart);\n      axis.baseModule.calculateRangeAndInterval(size, axis);\n    }\n  };\n  /**\n   * Measure the axis.\n   * @return {void}\n   * @private\n   */\n\n\n  PolarRadarPanel.prototype.calculateAxisSize = function () {\n    var chart = this.chart;\n    var axis;\n    var padding = 5;\n    this.centerX = this.initialClipRect.width * 0.5 + this.initialClipRect.x;\n    this.centerY = this.initialClipRect.height * 0.5 + this.initialClipRect.y;\n    chart.radius = Math.min(this.initialClipRect.width, this.initialClipRect.height) / 2 - padding - chart.primaryXAxis.majorTickLines.height - chart.primaryXAxis.maxLabelSize.height;\n    chart.radius = chart.primaryXAxis.coefficient * chart.radius / 100;\n    this.seriesClipRect.y = this.centerY - chart.radius;\n    this.seriesClipRect.x = this.centerX - chart.radius;\n    this.seriesClipRect.height = 2 * chart.radius;\n    this.seriesClipRect.width = 2 * chart.radius;\n    this.calculateRowSize(this.seriesClipRect);\n    axis = chart.primaryYAxis;\n    axis.rect = this.seriesClipRect;\n    this.calculateColumnSize(this.seriesClipRect);\n    axis = chart.primaryXAxis;\n    axis.rect = this.seriesClipRect;\n  };\n  /**\n   * Measure the axis.\n   * @return {void}\n   * @private\n   */\n\n\n  PolarRadarPanel.prototype.measure = function () {\n    var chart = this.chart;\n    chart.verticalAxes.push(chart.primaryYAxis);\n    var row = chart.rows[0];\n    row.axes[0] = chart.primaryYAxis;\n    chart.rows[0] = row;\n    chart.horizontalAxes.push(chart.primaryXAxis);\n    var column = chart.columns[0];\n    column.axes[0] = chart.primaryXAxis;\n    chart.columns[0] = column;\n  };\n  /**\n   * Measure the row size.\n   * @return {void}\n   */\n\n\n  PolarRadarPanel.prototype.calculateRowSize = function (rect) {\n    /*! Calculate row size */\n    var chart = this.chart;\n    var row = chart.rows[0];\n    row.computedHeight = rect.height / 2;\n    row.computedTop = rect.y;\n    chart.rows[0] = row;\n  };\n  /**\n   * Measure the row size.\n   * @return {void}\n   */\n\n\n  PolarRadarPanel.prototype.calculateColumnSize = function (rect) {\n    /*! Calculate column size */\n    var chart = this.chart;\n    var column = chart.columns[0];\n    column.computedLeft = rect.x;\n    column.computedWidth = rect.width;\n    chart.columns[0] = column;\n  };\n  /**\n   * To render the axis element.\n   * @return {void}\n   * @private\n   */\n\n\n  PolarRadarPanel.prototype.renderAxes = function () {\n    var axis;\n    var chart = this.chart;\n    this.startAngle = chart.primaryXAxis.startAngle;\n    var axisElement = chart.renderer.createGroup({\n      id: chart.element.id + 'AxisCollection'\n    });\n    var axisLineElement = chart.renderer.createGroup({\n      id: chart.element.id + 'AxisOutsideCollection'\n    });\n\n    for (var i = 0, len = chart.axisCollections.length; i < len; i++) {\n      this.element = chart.renderer.createGroup({\n        id: chart.element.id + 'AxisGroup' + i\n      });\n      axis = chart.axisCollections[i];\n\n      if (axis.orientation === 'Horizontal') {\n        if (axis.majorGridLines.width > 0 || axis.majorTickLines.width > 0) {\n          this.drawXAxisGridLine(axis, i);\n        }\n\n        if (axis.visible && axis.internalVisibility) {\n          this.drawXAxisLabels(axis, i);\n        }\n      } else {\n        this.drawYAxisGridLine(axis, i);\n\n        if (axis.lineStyle.width > 0) {\n          this.drawYAxisLine(axis, i, axis.plotOffset, 0);\n        }\n\n        if (axis.visible && axis.internalVisibility) {\n          this.drawYAxisLabels(axis, i);\n        }\n      }\n\n      axisElement.appendChild(this.element);\n    }\n\n    axisElement.appendChild(this.element);\n    appendChildElement(chart.enableCanvas, chart.svgObject, axisElement, chart.redraw);\n    return axisLineElement;\n  };\n\n  PolarRadarPanel.prototype.drawYAxisLine = function (axis, index, plotX, plotY) {\n    var chart = this.chart;\n    var optionsLine = {};\n    var vector = CoefficientToVector(valueToPolarCoefficient(axis.visibleLabels[0].value, axis), this.startAngle);\n    var axisLine = 'M ' + this.centerX + ' ' + this.centerY + 'L ' + (this.centerX + chart.radius * vector.x) + ' ' + (this.centerY + chart.radius * vector.y);\n    optionsLine = {\n      'id': chart.element.id + 'AxisLine_' + index,\n      'd': axisLine,\n      'stroke-dasharray': axis.lineStyle.dashArray,\n      'stroke-width': axis.lineStyle.width,\n      'stroke': axis.lineStyle.color || chart.themeStyle.axisLine\n    };\n    /**\n     * I252450\n     * When we click the center of the marker which is plotted in the axis line, selection did not work is fixed\n     * Cause: Instead of marker id, axis  line id is obtained while clicking\n     * Fix: Pointer events set to none for axis lines\n     */\n\n    var element = chart.renderer.drawPath(optionsLine);\n    this.setPointerEventNone(element);\n    chart.yAxisElements.appendChild(element);\n  };\n\n  PolarRadarPanel.prototype.drawYAxisLabels = function (axis, index) {\n    var chart = this.chart;\n    var elementSize;\n    var options;\n    var pointX = 0;\n    var pointY = 0;\n    var vector;\n    var angle = this.startAngle < 0 ? this.startAngle + 360 : this.startAngle;\n    var anchor = 'middle';\n    var radius;\n    var padding = 5;\n    var isIntersect;\n    var labelRegions = [];\n    var isLabelVisible = [];\n    isLabelVisible[0] = true;\n    var intersectType = axis.labelIntersectAction;\n    var labelElement = chart.renderer.createGroup({\n      id: chart.element.id + 'AxisLabels' + index\n    });\n    vector = CoefficientToVector(valueToPolarCoefficient(axis.visibleLabels[0].value, axis), this.startAngle);\n\n    for (var i = 0, len = axis.visibleLabels.length; i < len; i++) {\n      isIntersect = false;\n      radius = chart.radius * valueToCoefficient(axis.visibleLabels[i].value, axis);\n      elementSize = axis.visibleLabels[i].size;\n      radius = chart.radius * valueToCoefficient(axis.visibleLabels[i].value, axis);\n      pointX = this.centerX + radius * vector.x + (axis.majorTickLines.height + elementSize.width / 2 + padding / 2) * Math.cos(angle * Math.PI / 180) * (axis.labelPosition === 'Inside' ? 1 : -1);\n      pointY = this.centerY + radius * vector.y + (axis.majorTickLines.height + elementSize.height / 2) * Math.sin(angle * Math.PI / 180) * (axis.labelPosition === 'Inside' ? 1 : -1);\n      pointY += elementSize.height / 4;\n      labelRegions[i] = this.getLabelRegion(pointX, pointY, axis.visibleLabels[i], anchor);\n\n      if (i !== 0 && intersectType === 'Hide') {\n        for (var j = i; j >= 0; j--) {\n          j = j === 0 ? 0 : j === i ? j - 1 : j;\n\n          if (isLabelVisible[j] && isOverlap(labelRegions[i], labelRegions[j])) {\n            isIntersect = true;\n            isLabelVisible[i] = false;\n            break;\n          } else {\n            isLabelVisible[i] = true;\n          }\n        }\n\n        if (isIntersect) {\n          continue; // If the label is intersect, the label render is ignored.\n        } // To check Y axis label with visible X axis label\n\n\n        for (var _i = 0, _a = this.visibleAxisLabelRect; _i < _a.length; _i++) {\n          var rect = _a[_i];\n\n          if (isOverlap(labelRegions[i], rect)) {\n            isIntersect = true;\n            break;\n          }\n        }\n      }\n\n      if (isIntersect) {\n        continue;\n      }\n\n      this.visibleAxisLabelRect.push(labelRegions[i]);\n      options = new TextOption(chart.element.id + index + '_AxisLabel_' + i, pointX, pointY, anchor, axis.visibleLabels[i].text);\n      textElement(chart.renderer, options, axis.labelStyle, axis.labelStyle.color || chart.themeStyle.axisLabel, labelElement, false, chart.redraw, true, true);\n    }\n\n    chart.yAxisElements.appendChild(labelElement);\n  };\n\n  PolarRadarPanel.prototype.drawYAxisGridLine = function (axis, index) {\n    var chart = this.chart;\n    var options;\n    var radius;\n    var majorTick = '';\n    var majorGrid = '';\n    var vector;\n    var vector2;\n    var angle = this.startAngle < 0 ? this.startAngle + 360 : this.startAngle;\n    var rect = axis.rect;\n    var x1;\n    var y1;\n    var x2;\n    var y2;\n    var border = {\n      color: axis.majorGridLines.color || chart.themeStyle.majorGridLine,\n      width: axis.majorGridLines.width\n    };\n    var previousValue;\n    var element;\n\n    if (axis.majorGridLines.width > 0) {\n      if (chart.visibleSeries[0].type === 'Polar') {\n        for (var j = 0; j < axis.visibleLabels.length; j++) {\n          element = getElement(chart.element.id + '_MajorGridLine_' + index + '_' + j);\n          previousValue = element ? element.getAttribute('r') : null;\n          radius = chart.radius * valueToCoefficient(axis.visibleLabels[j].value, axis);\n          options = new CircleOption(chart.element.id + '_MajorGridLine_' + index + '_' + j, 'transparent', border, axis.majorGridLines.width, this.centerX, this.centerY, radius);\n          appendChildElement(chart.enableCanvas, this.element, chart.renderer.drawCircle(options), chart.redraw, true, 'r', 'r', new ChartLocation(+previousValue, +previousValue), null, true);\n        }\n\n        if (radius !== chart.radius) {\n          options = new CircleOption(chart.element.id + '_MajorGridLine_' + index + '_' + axis.visibleLabels.length + 1, 'transparent', border, axis.majorGridLines.width, this.centerX, this.centerY, chart.radius);\n          appendChildElement(chart.enableCanvas, this.element, chart.renderer.drawCircle(options), chart.redraw, true, 'r', 'r', new ChartLocation(+previousValue, +previousValue), null, true);\n        }\n      } else {\n        for (var j = 0; j < axis.visibleLabels.length; j++) {\n          radius = chart.radius * valueToCoefficient(axis.visibleLabels[j].value, axis);\n          majorGrid = this.renderRadarGrid(radius, '', chart);\n          element = getElement(chart.element.id + '_MajorGridLine_' + index + '_' + j);\n          previousValue = element ? element.getAttribute('d') : null;\n          options = new PathOption(chart.element.id + '_MajorGridLine_' + index + '_' + j, 'transparent', axis.majorGridLines.width, axis.majorGridLines.color || chart.themeStyle.majorGridLine, null, null, majorGrid);\n          appendChildElement(chart.enableCanvas, this.element, chart.renderer.drawPath(options), chart.redraw, true, 'x', 'y', null, previousValue, true);\n        }\n\n        if (radius !== chart.radius) {\n          majorGrid = this.renderRadarGrid(chart.radius, '', chart);\n          element = getElement(chart.element.id + '_MajorGridLine_' + index + '_' + axis.visibleLabels.length);\n          previousValue = element ? element.getAttribute('d') : null;\n          options = new PathOption(chart.element.id + '_MajorGridLine_' + index + '_' + axis.visibleLabels.length, 'transparent', axis.majorGridLines.width, axis.majorGridLines.color || chart.themeStyle.majorGridLine, null, null, majorGrid);\n          appendChildElement(chart.enableCanvas, this.element, chart.renderer.drawPath(options), chart.redraw, true, 'x', 'y', null, previousValue, true);\n        }\n      }\n    }\n\n    if (axis.majorTickLines.width > 0) {\n      vector = CoefficientToVector(valueToPolarCoefficient(axis.visibleLabels[0].value, axis), this.startAngle);\n\n      for (var i = 0; i < axis.visibleLabels.length; i++) {\n        radius = chart.radius * valueToCoefficient(axis.visibleLabels[i].value, axis);\n        x1 = this.centerX + radius * vector.x;\n        y1 = this.centerY + radius * vector.y;\n        x2 = x1 + axis.majorTickLines.height * Math.cos(angle * Math.PI / 180) * (axis.tickPosition === 'Inside' ? 1 : -1);\n        y2 = y1 + axis.majorTickLines.height * Math.sin(angle * Math.PI / 180) * (axis.tickPosition === 'Inside' ? 1 : -1);\n        majorTick = 'M ' + x1 + ' ' + y1 + ' L ' + x2 + ' ' + y2;\n        this.renderTickLine(axis, index, majorTick, '', i);\n      }\n    }\n  };\n\n  PolarRadarPanel.prototype.renderRadarGrid = function (radius, majorGrid, chart) {\n    var vector;\n    var vector2;\n    var x1;\n    var y1;\n    var x2;\n    var y2;\n\n    for (var i = 0, len = chart.primaryXAxis.visibleLabels.length; i < len; i++) {\n      vector = CoefficientToVector(valueToPolarCoefficient(chart.primaryXAxis.visibleLabels[i].value, chart.primaryXAxis), this.startAngle);\n\n      if (i + 1 < len) {\n        vector2 = CoefficientToVector(valueToPolarCoefficient(chart.primaryXAxis.visibleLabels[i + 1].value, chart.primaryXAxis), this.startAngle);\n      } else {\n        vector2 = CoefficientToVector(valueToPolarCoefficient(chart.primaryXAxis.visibleLabels[0].value, chart.primaryXAxis), this.startAngle);\n      }\n\n      x1 = this.centerX + radius * vector.x;\n      y1 = this.centerY + radius * vector.y;\n      x2 = this.centerX + radius * vector2.x;\n      y2 = this.centerY + radius * vector2.y;\n      majorGrid = majorGrid.concat((i ? 'L ' : 'M ') + ' ' + x1 + ' ' + y1 + ' ' + 'L ' + ' ' + x2 + ' ' + y2 + ' ');\n    }\n\n    return majorGrid;\n  };\n\n  PolarRadarPanel.prototype.drawXAxisGridLine = function (axis, index) {\n    var chart = this.chart;\n    var tempInterval;\n    var vector;\n    var majorGrid = '';\n    var majorTick = '';\n    var minorGirdLine = '';\n    var minorTickLine = '';\n    var x1 = this.centerX;\n    var x2;\n    var y1 = this.centerY;\n    var y2;\n    var minorDirection;\n    var tickSize = axis.majorTickLines.height;\n    var rect = axis.rect;\n    var length = axis.visibleLabels.length; //Gridlines\n\n    for (var i = 0; i < length; i++) {\n      tempInterval = axis.visibleLabels[i].value;\n      vector = CoefficientToVector(valueToPolarCoefficient(axis.visibleLabels[i].value, axis), this.startAngle);\n      x2 = this.centerX + chart.radius * vector.x;\n      y2 = this.centerY + chart.radius * vector.y;\n      var xLoc = x2 + axis.majorTickLines.height * vector.x * (axis.tickPosition === 'Inside' ? -1 : 1);\n      var yLoc = y2 + axis.majorTickLines.height * vector.y * (axis.tickPosition === 'Inside' ? -1 : 1);\n      majorGrid = 'M ' + x1 + ' ' + y1 + ' ' + 'L ' + x2 + ' ' + y2;\n      majorTick = 'M ' + x2 + ' ' + y2 + ' L ' + xLoc + ' ' + yLoc;\n\n      if (axis.minorTicksPerInterval > 0 && (axis.minorGridLines.width > 0 || axis.minorTickLines.width > 0) && axis.valueType !== 'Category' && chart.visibleSeries[0].type !== 'Radar') {\n        minorDirection = this.drawAxisMinorLine(axis, tempInterval, minorGirdLine, minorTickLine);\n        minorGirdLine = minorDirection[0];\n        minorTickLine = minorDirection[1];\n      }\n\n      this.renderTickLine(axis, index, majorTick, minorTickLine, i);\n      this.renderGridLine(axis, index, majorGrid, minorGirdLine, i);\n    }\n  };\n\n  PolarRadarPanel.prototype.drawAxisMinorLine = function (axis, tempInterval, minorGird, minorTick) {\n    var value = tempInterval;\n    var x;\n    var y;\n    var vector;\n    var range = axis.visibleRange;\n    var direction = [];\n\n    for (var j = 0; j < axis.minorTicksPerInterval; j++) {\n      value += (axis.valueType === 'DateTime' ? axis.dateTimeInterval : axis.visibleRange.interval) / (axis.minorTicksPerInterval + 1);\n\n      if (inside(value, range)) {\n        vector = CoefficientToVector(valueToPolarCoefficient(value, axis), this.startAngle);\n        x = this.centerX + this.chart.radius * vector.x;\n        y = this.centerY + this.chart.radius * vector.y;\n        var tickXSize = x + axis.minorTickLines.height * vector.x * (axis.tickPosition === 'Inside' ? -1 : 1);\n        var tickYSize = y + axis.minorTickLines.height * vector.y * (axis.tickPosition === 'Inside' ? -1 : 1);\n        minorGird = minorGird.concat('M' + ' ' + this.centerX + ' ' + this.centerY + 'L ' + x + ' ' + y);\n        minorTick = minorTick.concat('M' + ' ' + x + ' ' + y + 'L' + ' ' + tickXSize + ' ' + tickYSize);\n      }\n    }\n\n    direction.push(minorGird);\n    direction.push(minorTick);\n    return direction;\n  };\n  /**\n   * To render the axis label.\n   * @return {void}\n   * @private\n   */\n  //tslint:disable-next-line:max-func-body-length\n\n\n  PolarRadarPanel.prototype.drawXAxisLabels = function (axis, index) {\n    this.visibleAxisLabelRect = [];\n    var legendRect;\n\n    if (this.chart.legendModule) {\n      legendRect = this.chart.legendModule.legendBounds;\n    }\n\n    var chart = this.chart;\n    var pointX = 0;\n    var pointY = 0;\n    var labelElement = chart.renderer.createGroup({\n      id: chart.element.id + 'AxisLabels' + index\n    });\n    var options;\n    var vector;\n    var labelText;\n    var firstLabelX;\n    var islabelInside = axis.labelPosition === 'Inside';\n    var padding = 5;\n    var lastLabelX;\n    var label;\n    var textAnchor = '';\n    var isIntersect;\n    var labelRegions = [];\n    var isLabelVisible = [];\n    isLabelVisible[0] = true;\n    var intersectType = axis.labelIntersectAction;\n    var ticksbwtLabel = axis.valueType === 'Category' && axis.labelPlacement === 'BetweenTicks' ? 0.5 : 0;\n    var radius = chart.radius + axis.majorTickLines.height;\n    radius = islabelInside ? -radius : radius;\n\n    for (var i = 0, len = axis.visibleLabels.length; i < len; i++) {\n      isIntersect = false;\n      vector = CoefficientToVector(valueToPolarCoefficient(axis.visibleLabels[i].value + ticksbwtLabel, axis), this.startAngle);\n\n      if (!isNaN(vector.x) && !isNaN(vector.y)) {\n        pointX = this.centerX + (radius + axis.majorTickLines.height + padding) * vector.x;\n        pointY = this.centerY + (radius + axis.majorTickLines.height + padding) * vector.y;\n        textAnchor = parseFloat(pointX.toFixed(1)) === parseFloat(this.centerX.toFixed(1)) ? 'middle' : pointX < this.centerX && !islabelInside || pointX > this.centerX && islabelInside ? 'end' : 'start';\n      }\n\n      label = axis.visibleLabels[i];\n      labelText = label.text; // to trim axis labels based on available size\n\n      if (axis.enableTrim || intersectType === 'Trim') {\n        var originalText = axis.visibleLabels[i].originalText;\n        var trimText = void 0;\n        var size = void 0;\n        var labelPosition = axis.labelPosition;\n        var chartWidth = chart.availableSize.width;\n        var textLength = originalText.length;\n\n        for (var i_1 = textLength - 1; i_1 >= 0; --i_1) {\n          trimText = originalText.substring(0, i_1) + '...';\n          size = measureText(trimText, axis.labelStyle).width;\n\n          if (pointX === chartWidth / 2 ? pointX - size / 2 >= 0 && pointX + size / 2 <= chartWidth : labelPosition === 'Outside' && (pointX >= chartWidth / 2 && pointX + size <= chartWidth || pointX <= chartWidth / 2 && pointX - size >= 0) || labelPosition === 'Inside' && (pointX + size <= chartWidth / 2 || pointX - size >= chartWidth / 2)) {\n            labelText = i_1 === textLength - 1 ? originalText : trimText;\n            label.size.width = measureText(labelText, axis.labelStyle).width;\n            label.text = labelText;\n            break;\n          }\n        }\n      } // fix for label style not working in axisLabelRender event issue\n\n\n      labelRegions[i] = this.getLabelRegion(pointX, pointY, label, textAnchor);\n\n      if (i === 0) {\n        firstLabelX = pointX;\n      } else if (i === axis.visibleLabels.length - 1 && axis.valueType !== 'Category') {\n        lastLabelX = measureText(labelText, axis.labelStyle).height;\n        lastLabelX += pointX;\n        labelText = lastLabelX > firstLabelX ? '' : labelText;\n      } // Label intersect action (Hide) perform here\n\n\n      if (i !== 0 && intersectType === 'Hide') {\n        for (var j = i; j >= 0; j--) {\n          j = j === 0 ? 0 : j === i ? j - 1 : j;\n\n          if (isLabelVisible[j] && isOverlap(labelRegions[i], labelRegions[j])) {\n            isIntersect = true;\n            isLabelVisible[i] = false;\n            break;\n          } else {\n            isLabelVisible[i] = true;\n          }\n        }\n      }\n\n      if (!isIntersect && legendRect) {\n        isIntersect = isOverlap(labelRegions[i], legendRect);\n\n        if (isIntersect) {\n          var width = this.getAvailableSpaceToTrim(legendRect, labelRegions[i]);\n\n          if (width > 0) {\n            labelText = textTrim(width, axis.visibleLabels[i].originalText, axis.labelStyle);\n            isIntersect = false;\n          }\n        }\n      }\n\n      options = new TextOption(chart.element.id + index + '_AxisLabel_' + i, pointX, pointY, textAnchor, labelText, '', 'central');\n\n      if (isIntersect) {\n        continue; // If the label is intersect, the label render is ignored.\n      }\n\n      this.visibleAxisLabelRect.push(labelRegions[i]);\n      textElement(chart.renderer, options, label.labelStyle, label.labelStyle.color || chart.themeStyle.axisLabel, labelElement, false, chart.redraw, true, true);\n    }\n\n    this.element.appendChild(labelElement);\n  };\n  /**\n   * To get available space to trim.\n   * @param legendRect\n   * @param labelRect\n   */\n\n\n  PolarRadarPanel.prototype.getAvailableSpaceToTrim = function (legendRect, labelRect) {\n    var legendX1 = legendRect.x;\n    var legendX2 = legendX1 + legendRect.width;\n    var labelX1 = labelRect.x;\n    var labelX2 = labelX1 + labelRect.width;\n    var width = 0;\n\n    if (labelX1 > legendX1 && labelX1 < legendX2 && labelX2 > legendX2) {\n      width = labelX2 - legendX2;\n    } else if (labelX1 > legendX1 && labelX1 < legendX2 && labelX2 < legendX2) {\n      width = 0;\n    } else if (labelX2 > legendX1 && labelX2 < legendX2 && labelX1 < legendX1) {\n      width = legendX1 - labelX1;\n    } else if (labelX2 > legendX1 && labelX2 > legendX2 && labelX1 < legendX1) {\n      width = legendX1 - labelX1;\n    }\n\n    return width;\n  };\n  /**\n   * Getting axis label bounds\n   * @param pointX\n   * @param pointY\n   * @param label\n   * @param anchor\n   */\n\n\n  PolarRadarPanel.prototype.getLabelRegion = function (pointX, pointY, label, anchor) {\n    if (anchor === 'middle') {\n      pointX -= label.size.width / 2;\n    } else if (anchor === 'end') {\n      pointX -= label.size.width;\n    } else {\n      pointX = pointX;\n    }\n\n    pointY -= label.size.height / 2;\n    return new Rect(pointX, pointY, label.size.width, label.size.height);\n  };\n\n  PolarRadarPanel.prototype.renderTickLine = function (axis, index, majorTickLine, minorTickLine, gridIndex) {\n    var tickOptions;\n    var chart = this.chart;\n    var direction;\n    var element;\n\n    if (axis.majorTickLines.width > 0) {\n      element = getElement(chart.element.id + '_MajorTickLine_' + index + '_' + gridIndex);\n      direction = element ? element.getAttribute('d') : null;\n      tickOptions = new PathOption(chart.element.id + '_MajorTickLine_' + index + '_' + gridIndex, 'transparent', axis.majorTickLines.width, axis.majorTickLines.color || chart.themeStyle.majorTickLine, null, null, majorTickLine);\n      /**\n       * I252450\n       * When we click the center of the marker which is plotted in the axis, selection did not work is fixed\n       * Cause: Instead of marker id, axis Tick line id is obtained while clicking\n       * Fix: Pointer events set to none for tick lines\n       */\n\n      element = chart.renderer.drawPath(tickOptions);\n      this.setPointerEventNone(element);\n      appendChildElement(chart.enableCanvas, chart.yAxisElements, element, chart.redraw, true, 'x', 'y', null, direction);\n    }\n\n    if (axis.minorTickLines.width > 0) {\n      element = getElement(chart.element.id + '_MinorTickLine_' + index + '_' + gridIndex);\n      direction = element ? element.getAttribute('d') : null;\n      tickOptions = new PathOption(chart.element.id + '_MinorTickLine_' + index + '_' + gridIndex, 'transparent', axis.minorTickLines.width, axis.minorTickLines.color || chart.themeStyle.minorTickLine, null, null, minorTickLine);\n      /**\n       * I252450\n       * When we click the center of the marker which is plotted in the axis, selection did not work is fixed\n       * Cause: Instead of marker id, axis Tick line id is obtained while clicking\n       * Fix: Pointer events set to none for tick lines\n       */\n\n      element = chart.renderer.drawPath(tickOptions);\n      this.setPointerEventNone(element);\n      appendChildElement(chart.enableCanvas, chart.yAxisElements, element, chart.redraw, true, 'x', 'y', null, direction);\n    }\n  };\n\n  PolarRadarPanel.prototype.renderGridLine = function (axis, index, majorGrid, minorGird, gridIndex) {\n    var chart = this.chart;\n    var gridOptions;\n    var direction;\n    var element;\n\n    if (axis.majorGridLines.width > 0) {\n      element = getElement(chart.element.id + '_MajorGridLine_' + index + '_' + gridIndex);\n      direction = element ? element.getAttribute('d') : null;\n      gridOptions = new PathOption(chart.element.id + '_MajorGridLine_' + index + '_' + gridIndex, 'transparent', axis.majorGridLines.width, axis.majorGridLines.color || chart.themeStyle.majorGridLine, null, axis.majorGridLines.dashArray, majorGrid);\n      appendChildElement(chart.enableCanvas, this.element, chart.renderer.drawPath(gridOptions), chart.redraw, true, 'x', 'y', null, direction);\n    }\n\n    if (axis.minorGridLines.width > 0) {\n      element = getElement(chart.element.id + '_MinorGridLine_' + index + '_' + gridIndex);\n      direction = element ? element.getAttribute('d') : null;\n      gridOptions = new PathOption(chart.element.id + '_MinorGridLine_' + index + '_' + gridIndex, 'transparent', axis.minorGridLines.width, axis.minorGridLines.color || chart.themeStyle.minorGridLine, null, axis.minorGridLines.dashArray, minorGird);\n      appendChildElement(chart.enableCanvas, this.element, chart.renderer.drawPath(gridOptions), chart.redraw, true, 'x', 'y', null, direction);\n    }\n  };\n\n  PolarRadarPanel.prototype.setPointerEventNone = function (element) {\n    if (element) {\n      element.setAttribute('style', 'pointer-events:none');\n    }\n  };\n\n  return PolarRadarPanel;\n}(LineBase);\n\nexport { PolarRadarPanel };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","valueToCoefficient","inside","isOverlap","textTrim","appendChildElement","CircleOption","Size","measureText","TextOption","PathOption","Rect","LineBase","textElement","ChartLocation","valueToPolarCoefficient","CoefficientToVector","getElement","axisPadding","PolarRadarPanel","_super","_this","apply","arguments","visibleAxisLabelRect","measureAxis","rect","chart","initialClipRect","seriesClipRect","x","y","width","height","measureRowAxis","measureColumnAxis","calculateAxisSize","calculateRowSize","row","rows","measureDefinition","availableSize","computedHeight","calculateColumnSize","column","columns","computedWidth","definition","size","clipRect","_i","_a","axes","length","axis","getModule","baseModule","calculateRangeAndInterval","padding","centerX","centerY","radius","Math","min","primaryXAxis","majorTickLines","maxLabelSize","coefficient","primaryYAxis","measure","verticalAxes","push","horizontalAxes","computedTop","computedLeft","renderAxes","startAngle","axisElement","renderer","createGroup","id","element","axisLineElement","i","len","axisCollections","orientation","majorGridLines","drawXAxisGridLine","visible","internalVisibility","drawXAxisLabels","drawYAxisGridLine","lineStyle","drawYAxisLine","plotOffset","drawYAxisLabels","appendChild","enableCanvas","svgObject","redraw","index","plotX","plotY","optionsLine","vector","visibleLabels","value","axisLine","dashArray","color","themeStyle","drawPath","setPointerEventNone","yAxisElements","elementSize","options","pointX","pointY","angle","anchor","isIntersect","labelRegions","isLabelVisible","intersectType","labelIntersectAction","labelElement","cos","PI","labelPosition","sin","getLabelRegion","j","text","labelStyle","axisLabel","majorTick","majorGrid","vector2","x1","y1","x2","y2","border","majorGridLine","previousValue","visibleSeries","type","getAttribute","drawCircle","renderRadarGrid","tickPosition","renderTickLine","concat","tempInterval","minorGirdLine","minorTickLine","minorDirection","tickSize","xLoc","yLoc","minorTicksPerInterval","minorGridLines","minorTickLines","valueType","drawAxisMinorLine","renderGridLine","minorGird","minorTick","range","visibleRange","direction","dateTimeInterval","interval","tickXSize","tickYSize","legendRect","legendModule","legendBounds","labelText","firstLabelX","islabelInside","lastLabelX","label","textAnchor","ticksbwtLabel","labelPlacement","isNaN","parseFloat","toFixed","enableTrim","originalText","trimText","chartWidth","textLength","i_1","substring","getAvailableSpaceToTrim","labelRect","legendX1","legendX2","labelX1","labelX2","majorTickLine","gridIndex","tickOptions","gridOptions","minorGridLine","setAttribute"],"sources":["D:/Theme/package/node_modules/@syncfusion/ej2-charts/src/chart/axis/polar-radar-panel.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { valueToCoefficient, inside, isOverlap, textTrim } from '../../common/utils/helper';\nimport { appendChildElement } from '../../common/utils/helper';\nimport { CircleOption } from '../../common/utils/helper';\nimport { Size, measureText, TextOption, PathOption, Rect } from '@syncfusion/ej2-svg-base';\nimport { LineBase } from '../series/line-base';\nimport { textElement, ChartLocation, valueToPolarCoefficient, CoefficientToVector, getElement } from '../../common/utils/helper';\n/**\n * Specifies the Polar Axis Layout.\n */\nvar axisPadding = 10;\nvar PolarRadarPanel = /** @class */ (function (_super) {\n    __extends(PolarRadarPanel, _super);\n    function PolarRadarPanel() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /** @private */\n        _this.visibleAxisLabelRect = [];\n        return _this;\n    }\n    /**\n     * Measure the polar radar axis size.\n     * @return {void}\n     * @private\n     */\n    PolarRadarPanel.prototype.measureAxis = function (rect) {\n        var chart = this.chart;\n        this.initialClipRect = rect;\n        this.seriesClipRect = new Rect(rect.x, rect.y, rect.width, rect.height);\n        //Measure axis size calculation\n        this.measureRowAxis(chart, this.initialClipRect);\n        this.measureColumnAxis(chart, this.initialClipRect);\n        this.calculateAxisSize();\n    };\n    PolarRadarPanel.prototype.measureRowAxis = function (chart, rect) {\n        this.calculateRowSize(rect);\n        var row = chart.rows[0];\n        this.measureDefinition(row, chart, new Size(chart.availableSize.width, row.computedHeight), rect);\n    };\n    PolarRadarPanel.prototype.measureColumnAxis = function (chart, rect) {\n        this.calculateColumnSize(rect);\n        var column = chart.columns[0];\n        this.measureDefinition(column, chart, new Size(column.computedWidth, chart.availableSize.height), rect);\n    };\n    /**\n     * Measure the column and row in chart.\n     * @return {void}\n     * @private\n     */\n    PolarRadarPanel.prototype.measureDefinition = function (definition, chart, size, clipRect) {\n        for (var _i = 0, _a = definition.axes; _i < _a.length; _i++) {\n            var axis = _a[_i];\n            axis.getModule(chart);\n            axis.baseModule.calculateRangeAndInterval(size, axis);\n        }\n    };\n    /**\n     * Measure the axis.\n     * @return {void}\n     * @private\n     */\n    PolarRadarPanel.prototype.calculateAxisSize = function () {\n        var chart = this.chart;\n        var axis;\n        var padding = 5;\n        this.centerX = this.initialClipRect.width * 0.5 + this.initialClipRect.x;\n        this.centerY = this.initialClipRect.height * 0.5 + this.initialClipRect.y;\n        chart.radius = Math.min(this.initialClipRect.width, this.initialClipRect.height) / 2 - padding -\n            chart.primaryXAxis.majorTickLines.height - chart.primaryXAxis.maxLabelSize.height;\n        chart.radius = (chart.primaryXAxis.coefficient * chart.radius) / 100;\n        this.seriesClipRect.y = this.centerY - chart.radius;\n        this.seriesClipRect.x = this.centerX - chart.radius;\n        this.seriesClipRect.height = 2 * chart.radius;\n        this.seriesClipRect.width = 2 * chart.radius;\n        this.calculateRowSize(this.seriesClipRect);\n        axis = chart.primaryYAxis;\n        axis.rect = this.seriesClipRect;\n        this.calculateColumnSize(this.seriesClipRect);\n        axis = chart.primaryXAxis;\n        axis.rect = this.seriesClipRect;\n    };\n    /**\n     * Measure the axis.\n     * @return {void}\n     * @private\n     */\n    PolarRadarPanel.prototype.measure = function () {\n        var chart = this.chart;\n        chart.verticalAxes.push(chart.primaryYAxis);\n        var row = chart.rows[0];\n        row.axes[0] = chart.primaryYAxis;\n        chart.rows[0] = row;\n        chart.horizontalAxes.push(chart.primaryXAxis);\n        var column = chart.columns[0];\n        column.axes[0] = chart.primaryXAxis;\n        chart.columns[0] = column;\n    };\n    /**\n     * Measure the row size.\n     * @return {void}\n     */\n    PolarRadarPanel.prototype.calculateRowSize = function (rect) {\n        /*! Calculate row size */\n        var chart = this.chart;\n        var row = chart.rows[0];\n        row.computedHeight = rect.height / 2;\n        row.computedTop = rect.y;\n        chart.rows[0] = row;\n    };\n    /**\n     * Measure the row size.\n     * @return {void}\n     */\n    PolarRadarPanel.prototype.calculateColumnSize = function (rect) {\n        /*! Calculate column size */\n        var chart = this.chart;\n        var column = chart.columns[0];\n        column.computedLeft = rect.x;\n        column.computedWidth = rect.width;\n        chart.columns[0] = column;\n    };\n    /**\n     * To render the axis element.\n     * @return {void}\n     * @private\n     */\n    PolarRadarPanel.prototype.renderAxes = function () {\n        var axis;\n        var chart = this.chart;\n        this.startAngle = chart.primaryXAxis.startAngle;\n        var axisElement = chart.renderer.createGroup({ id: chart.element.id + 'AxisCollection' });\n        var axisLineElement = chart.renderer.createGroup({ id: chart.element.id + 'AxisOutsideCollection' });\n        for (var i = 0, len = chart.axisCollections.length; i < len; i++) {\n            this.element = chart.renderer.createGroup({ id: chart.element.id + 'AxisGroup' + i });\n            axis = chart.axisCollections[i];\n            if (axis.orientation === 'Horizontal') {\n                if (axis.majorGridLines.width > 0 || axis.majorTickLines.width > 0) {\n                    this.drawXAxisGridLine(axis, i);\n                }\n                if (axis.visible && axis.internalVisibility) {\n                    this.drawXAxisLabels(axis, i);\n                }\n            }\n            else {\n                this.drawYAxisGridLine(axis, i);\n                if (axis.lineStyle.width > 0) {\n                    this.drawYAxisLine(axis, i, axis.plotOffset, 0);\n                }\n                if (axis.visible && axis.internalVisibility) {\n                    this.drawYAxisLabels(axis, i);\n                }\n            }\n            axisElement.appendChild(this.element);\n        }\n        axisElement.appendChild(this.element);\n        appendChildElement(chart.enableCanvas, chart.svgObject, axisElement, chart.redraw);\n        return axisLineElement;\n    };\n    PolarRadarPanel.prototype.drawYAxisLine = function (axis, index, plotX, plotY) {\n        var chart = this.chart;\n        var optionsLine = {};\n        var vector = CoefficientToVector(valueToPolarCoefficient(axis.visibleLabels[0].value, axis), this.startAngle);\n        var axisLine = 'M ' + this.centerX + ' ' + this.centerY + 'L ' +\n            (this.centerX + chart.radius * vector.x) + ' ' + (this.centerY + chart.radius * vector.y);\n        optionsLine = {\n            'id': chart.element.id + 'AxisLine_' + index,\n            'd': axisLine,\n            'stroke-dasharray': axis.lineStyle.dashArray,\n            'stroke-width': axis.lineStyle.width,\n            'stroke': axis.lineStyle.color || chart.themeStyle.axisLine\n        };\n        /**\n         * I252450\n         * When we click the center of the marker which is plotted in the axis line, selection did not work is fixed\n         * Cause: Instead of marker id, axis  line id is obtained while clicking\n         * Fix: Pointer events set to none for axis lines\n         */\n        var element = chart.renderer.drawPath(optionsLine);\n        this.setPointerEventNone(element);\n        chart.yAxisElements.appendChild(element);\n    };\n    PolarRadarPanel.prototype.drawYAxisLabels = function (axis, index) {\n        var chart = this.chart;\n        var elementSize;\n        var options;\n        var pointX = 0;\n        var pointY = 0;\n        var vector;\n        var angle = this.startAngle < 0 ? this.startAngle + 360 : this.startAngle;\n        var anchor = 'middle';\n        var radius;\n        var padding = 5;\n        var isIntersect;\n        var labelRegions = [];\n        var isLabelVisible = [];\n        isLabelVisible[0] = true;\n        var intersectType = axis.labelIntersectAction;\n        var labelElement = chart.renderer.createGroup({ id: chart.element.id + 'AxisLabels' + index });\n        vector = CoefficientToVector(valueToPolarCoefficient(axis.visibleLabels[0].value, axis), this.startAngle);\n        for (var i = 0, len = axis.visibleLabels.length; i < len; i++) {\n            isIntersect = false;\n            radius = chart.radius * valueToCoefficient(axis.visibleLabels[i].value, axis);\n            elementSize = axis.visibleLabels[i].size;\n            radius = chart.radius * valueToCoefficient(axis.visibleLabels[i].value, axis);\n            pointX = (this.centerX + radius * vector.x) + ((axis.majorTickLines.height + elementSize.width / 2 + padding / 2)\n                * (Math.cos(angle * Math.PI / 180)) * (axis.labelPosition === 'Inside' ? 1 : -1));\n            pointY = (this.centerY + radius * vector.y) + ((axis.majorTickLines.height + elementSize.height / 2)\n                * (Math.sin(angle * Math.PI / 180)) * (axis.labelPosition === 'Inside' ? 1 : -1));\n            pointY += (elementSize.height / 4);\n            labelRegions[i] = this.getLabelRegion(pointX, pointY, axis.visibleLabels[i], anchor);\n            if (i !== 0 && intersectType === 'Hide') {\n                for (var j = i; j >= 0; j--) {\n                    j = (j === 0) ? 0 : (j === i) ? (j - 1) : j;\n                    if (isLabelVisible[j] && isOverlap(labelRegions[i], labelRegions[j])) {\n                        isIntersect = true;\n                        isLabelVisible[i] = false;\n                        break;\n                    }\n                    else {\n                        isLabelVisible[i] = true;\n                    }\n                }\n                if (isIntersect) {\n                    continue; // If the label is intersect, the label render is ignored.\n                }\n                // To check Y axis label with visible X axis label\n                for (var _i = 0, _a = this.visibleAxisLabelRect; _i < _a.length; _i++) {\n                    var rect = _a[_i];\n                    if (isOverlap(labelRegions[i], rect)) {\n                        isIntersect = true;\n                        break;\n                    }\n                }\n            }\n            if (isIntersect) {\n                continue;\n            }\n            this.visibleAxisLabelRect.push(labelRegions[i]);\n            options = new TextOption(chart.element.id + index + '_AxisLabel_' + i, pointX, pointY, anchor, axis.visibleLabels[i].text);\n            textElement(chart.renderer, options, axis.labelStyle, axis.labelStyle.color || chart.themeStyle.axisLabel, labelElement, false, chart.redraw, true, true);\n        }\n        chart.yAxisElements.appendChild(labelElement);\n    };\n    PolarRadarPanel.prototype.drawYAxisGridLine = function (axis, index) {\n        var chart = this.chart;\n        var options;\n        var radius;\n        var majorTick = '';\n        var majorGrid = '';\n        var vector;\n        var vector2;\n        var angle = this.startAngle < 0 ? this.startAngle + 360 : this.startAngle;\n        var rect = axis.rect;\n        var x1;\n        var y1;\n        var x2;\n        var y2;\n        var border = {\n            color: axis.majorGridLines.color || chart.themeStyle.majorGridLine,\n            width: axis.majorGridLines.width\n        };\n        var previousValue;\n        var element;\n        if (axis.majorGridLines.width > 0) {\n            if (chart.visibleSeries[0].type === 'Polar') {\n                for (var j = 0; j < axis.visibleLabels.length; j++) {\n                    element = getElement(chart.element.id + '_MajorGridLine_' + index + '_' + j);\n                    previousValue = element ? element.getAttribute('r') : null;\n                    radius = chart.radius * valueToCoefficient(axis.visibleLabels[j].value, axis);\n                    options = new CircleOption(chart.element.id + '_MajorGridLine_' + index + '_' + j, 'transparent', border, axis.majorGridLines.width, this.centerX, this.centerY, radius);\n                    appendChildElement(chart.enableCanvas, this.element, chart.renderer.drawCircle(options), chart.redraw, true, 'r', 'r', new ChartLocation(+previousValue, +previousValue), null, true);\n                }\n                if (radius !== chart.radius) {\n                    options = new CircleOption(chart.element.id + '_MajorGridLine_' + index + '_' + axis.visibleLabels.length + 1, 'transparent', border, axis.majorGridLines.width, this.centerX, this.centerY, chart.radius);\n                    appendChildElement(chart.enableCanvas, this.element, chart.renderer.drawCircle(options), chart.redraw, true, 'r', 'r', new ChartLocation(+previousValue, +previousValue), null, true);\n                }\n            }\n            else {\n                for (var j = 0; j < axis.visibleLabels.length; j++) {\n                    radius = chart.radius * valueToCoefficient(axis.visibleLabels[j].value, axis);\n                    majorGrid = this.renderRadarGrid(radius, '', chart);\n                    element = getElement(chart.element.id + '_MajorGridLine_' + index + '_' + j);\n                    previousValue = element ? element.getAttribute('d') : null;\n                    options = new PathOption(chart.element.id + '_MajorGridLine_' + index + '_' + j, 'transparent', axis.majorGridLines.width, axis.majorGridLines.color || chart.themeStyle.majorGridLine, null, null, majorGrid);\n                    appendChildElement(chart.enableCanvas, this.element, chart.renderer.drawPath(options), chart.redraw, true, 'x', 'y', null, previousValue, true);\n                }\n                if (radius !== chart.radius) {\n                    majorGrid = this.renderRadarGrid(chart.radius, '', chart);\n                    element = getElement(chart.element.id + '_MajorGridLine_' + index + '_' + axis.visibleLabels.length);\n                    previousValue = element ? element.getAttribute('d') : null;\n                    options = new PathOption(chart.element.id + '_MajorGridLine_' + index + '_' + axis.visibleLabels.length, 'transparent', axis.majorGridLines.width, axis.majorGridLines.color || chart.themeStyle.majorGridLine, null, null, majorGrid);\n                    appendChildElement(chart.enableCanvas, this.element, chart.renderer.drawPath(options), chart.redraw, true, 'x', 'y', null, previousValue, true);\n                }\n            }\n        }\n        if (axis.majorTickLines.width > 0) {\n            vector = CoefficientToVector(valueToPolarCoefficient(axis.visibleLabels[0].value, axis), this.startAngle);\n            for (var i = 0; i < axis.visibleLabels.length; i++) {\n                radius = chart.radius * valueToCoefficient(axis.visibleLabels[i].value, axis);\n                x1 = this.centerX + radius * vector.x;\n                y1 = this.centerY + radius * vector.y;\n                x2 = x1 + (axis.majorTickLines.height * (Math.cos(angle * Math.PI / 180)) * (axis.tickPosition === 'Inside' ? 1 : -1));\n                y2 = y1 + (axis.majorTickLines.height * (Math.sin(angle * Math.PI / 180)) * (axis.tickPosition === 'Inside' ? 1 : -1));\n                majorTick = 'M ' + x1 + ' ' + y1 + ' L ' + x2 + ' ' + y2;\n                this.renderTickLine(axis, index, majorTick, '', i);\n            }\n        }\n    };\n    PolarRadarPanel.prototype.renderRadarGrid = function (radius, majorGrid, chart) {\n        var vector;\n        var vector2;\n        var x1;\n        var y1;\n        var x2;\n        var y2;\n        for (var i = 0, len = chart.primaryXAxis.visibleLabels.length; i < len; i++) {\n            vector = CoefficientToVector(valueToPolarCoefficient(chart.primaryXAxis.visibleLabels[i].value, chart.primaryXAxis), this.startAngle);\n            if (i + 1 < len) {\n                vector2 = CoefficientToVector(valueToPolarCoefficient(chart.primaryXAxis.visibleLabels[i + 1].value, chart.primaryXAxis), this.startAngle);\n            }\n            else {\n                vector2 = CoefficientToVector(valueToPolarCoefficient(chart.primaryXAxis.visibleLabels[0].value, chart.primaryXAxis), this.startAngle);\n            }\n            x1 = this.centerX + radius * vector.x;\n            y1 = this.centerY + radius * vector.y;\n            x2 = this.centerX + radius * vector2.x;\n            y2 = this.centerY + radius * vector2.y;\n            majorGrid = majorGrid.concat((i ? 'L ' : 'M ') + ' ' + x1 + ' ' + y1 + ' ' + 'L ' + ' ' + x2 + ' ' + y2 + ' ');\n        }\n        return majorGrid;\n    };\n    PolarRadarPanel.prototype.drawXAxisGridLine = function (axis, index) {\n        var chart = this.chart;\n        var tempInterval;\n        var vector;\n        var majorGrid = '';\n        var majorTick = '';\n        var minorGirdLine = '';\n        var minorTickLine = '';\n        var x1 = this.centerX;\n        var x2;\n        var y1 = this.centerY;\n        var y2;\n        var minorDirection;\n        var tickSize = axis.majorTickLines.height;\n        var rect = axis.rect;\n        var length = axis.visibleLabels.length;\n        //Gridlines\n        for (var i = 0; i < length; i++) {\n            tempInterval = axis.visibleLabels[i].value;\n            vector = CoefficientToVector(valueToPolarCoefficient(axis.visibleLabels[i].value, axis), this.startAngle);\n            x2 = this.centerX + chart.radius * vector.x;\n            y2 = this.centerY + chart.radius * vector.y;\n            var xLoc = x2 + (axis.majorTickLines.height * vector.x * (axis.tickPosition === 'Inside' ? -1 : 1));\n            var yLoc = y2 + (axis.majorTickLines.height * vector.y * (axis.tickPosition === 'Inside' ? -1 : 1));\n            majorGrid = 'M ' + x1 + ' ' + y1 + ' ' + 'L ' + x2 + ' ' + y2;\n            majorTick = 'M ' + x2 + ' ' + y2 + ' L ' + xLoc + ' ' + yLoc;\n            if (axis.minorTicksPerInterval > 0 && (axis.minorGridLines.width > 0 || axis.minorTickLines.width > 0)\n                && axis.valueType !== 'Category' && chart.visibleSeries[0].type !== 'Radar') {\n                minorDirection = this.drawAxisMinorLine(axis, tempInterval, minorGirdLine, minorTickLine);\n                minorGirdLine = minorDirection[0];\n                minorTickLine = minorDirection[1];\n            }\n            this.renderTickLine(axis, index, majorTick, minorTickLine, i);\n            this.renderGridLine(axis, index, majorGrid, minorGirdLine, i);\n        }\n    };\n    PolarRadarPanel.prototype.drawAxisMinorLine = function (axis, tempInterval, minorGird, minorTick) {\n        var value = tempInterval;\n        var x;\n        var y;\n        var vector;\n        var range = axis.visibleRange;\n        var direction = [];\n        for (var j = 0; j < axis.minorTicksPerInterval; j++) {\n            value += (axis.valueType === 'DateTime' ? axis.dateTimeInterval : axis.visibleRange.interval) /\n                (axis.minorTicksPerInterval + 1);\n            if (inside(value, range)) {\n                vector = CoefficientToVector(valueToPolarCoefficient(value, axis), this.startAngle);\n                x = this.centerX + this.chart.radius * vector.x;\n                y = this.centerY + this.chart.radius * vector.y;\n                var tickXSize = x + (axis.minorTickLines.height * vector.x * (axis.tickPosition === 'Inside' ? -1 : 1));\n                var tickYSize = y + (axis.minorTickLines.height * vector.y * (axis.tickPosition === 'Inside' ? -1 : 1));\n                minorGird = minorGird.concat('M' + ' ' + this.centerX + ' ' + this.centerY\n                    + 'L ' + x + ' ' + y);\n                minorTick = minorTick.concat('M' + ' ' + x + ' ' + y + 'L' + ' ' + (tickXSize) + ' ' +\n                    (tickYSize));\n            }\n        }\n        direction.push(minorGird);\n        direction.push(minorTick);\n        return direction;\n    };\n    /**\n     * To render the axis label.\n     * @return {void}\n     * @private\n     */\n    //tslint:disable-next-line:max-func-body-length\n    PolarRadarPanel.prototype.drawXAxisLabels = function (axis, index) {\n        this.visibleAxisLabelRect = [];\n        var legendRect;\n        if (this.chart.legendModule) {\n            legendRect = this.chart.legendModule.legendBounds;\n        }\n        var chart = this.chart;\n        var pointX = 0;\n        var pointY = 0;\n        var labelElement = chart.renderer.createGroup({ id: chart.element.id + 'AxisLabels' + index });\n        var options;\n        var vector;\n        var labelText;\n        var firstLabelX;\n        var islabelInside = axis.labelPosition === 'Inside';\n        var padding = 5;\n        var lastLabelX;\n        var label;\n        var textAnchor = '';\n        var isIntersect;\n        var labelRegions = [];\n        var isLabelVisible = [];\n        isLabelVisible[0] = true;\n        var intersectType = axis.labelIntersectAction;\n        var ticksbwtLabel = axis.valueType === 'Category' && axis.labelPlacement === 'BetweenTicks' ? 0.5 : 0;\n        var radius = chart.radius + axis.majorTickLines.height;\n        radius = (islabelInside) ? -radius : radius;\n        for (var i = 0, len = axis.visibleLabels.length; i < len; i++) {\n            isIntersect = false;\n            vector = CoefficientToVector(valueToPolarCoefficient(axis.visibleLabels[i].value + ticksbwtLabel, axis), this.startAngle);\n            if (!isNaN(vector.x) && !isNaN(vector.y)) {\n                pointX = this.centerX + (radius + axis.majorTickLines.height + padding) * vector.x;\n                pointY = this.centerY + (radius + axis.majorTickLines.height + padding) * vector.y;\n                textAnchor = parseFloat(pointX.toFixed(1)) === parseFloat(this.centerX.toFixed(1)) ? 'middle' :\n                    ((pointX < this.centerX && !islabelInside) || (pointX > this.centerX && islabelInside)) ? 'end' : 'start';\n            }\n            label = axis.visibleLabels[i];\n            labelText = label.text;\n            // to trim axis labels based on available size\n            if (axis.enableTrim || intersectType === 'Trim') {\n                var originalText = axis.visibleLabels[i].originalText;\n                var trimText = void 0;\n                var size = void 0;\n                var labelPosition = axis.labelPosition;\n                var chartWidth = chart.availableSize.width;\n                var textLength = originalText.length;\n                for (var i_1 = textLength - 1; i_1 >= 0; --i_1) {\n                    trimText = originalText.substring(0, i_1) + '...';\n                    size = measureText(trimText, axis.labelStyle).width;\n                    if (pointX === chartWidth / 2 ? (pointX - size / 2 >= 0 && pointX + size / 2 <= chartWidth) :\n                        ((labelPosition === 'Outside' && ((pointX >= chartWidth / 2 && pointX + size <= chartWidth) ||\n                            (pointX <= chartWidth / 2 && pointX - size >= 0))) || (labelPosition === 'Inside' &&\n                            (pointX + size <= chartWidth / 2 || pointX - size >= chartWidth / 2)))) {\n                        labelText = i_1 === textLength - 1 ? originalText : trimText;\n                        label.size.width = measureText(labelText, axis.labelStyle).width;\n                        label.text = labelText;\n                        break;\n                    }\n                }\n            }\n            // fix for label style not working in axisLabelRender event issue\n            labelRegions[i] = this.getLabelRegion(pointX, pointY, label, textAnchor);\n            if (i === 0) {\n                firstLabelX = pointX;\n            }\n            else if (i === axis.visibleLabels.length - 1 && axis.valueType !== 'Category') {\n                lastLabelX = measureText(labelText, axis.labelStyle).height;\n                lastLabelX += pointX;\n                labelText = (lastLabelX > firstLabelX) ? '' : labelText;\n            }\n            // Label intersect action (Hide) perform here\n            if (i !== 0 && intersectType === 'Hide') {\n                for (var j = i; j >= 0; j--) {\n                    j = (j === 0) ? 0 : ((j === i) ? (j - 1) : j);\n                    if (isLabelVisible[j] && isOverlap(labelRegions[i], labelRegions[j])) {\n                        isIntersect = true;\n                        isLabelVisible[i] = false;\n                        break;\n                    }\n                    else {\n                        isLabelVisible[i] = true;\n                    }\n                }\n            }\n            if (!isIntersect && legendRect) {\n                isIntersect = isOverlap(labelRegions[i], legendRect);\n                if (isIntersect) {\n                    var width = this.getAvailableSpaceToTrim(legendRect, labelRegions[i]);\n                    if (width > 0) {\n                        labelText = textTrim(width, axis.visibleLabels[i].originalText, axis.labelStyle);\n                        isIntersect = false;\n                    }\n                }\n            }\n            options = new TextOption(chart.element.id + index + '_AxisLabel_' + i, pointX, pointY, textAnchor, labelText, '', 'central');\n            if (isIntersect) {\n                continue; // If the label is intersect, the label render is ignored.\n            }\n            this.visibleAxisLabelRect.push(labelRegions[i]);\n            textElement(chart.renderer, options, label.labelStyle, label.labelStyle.color || chart.themeStyle.axisLabel, labelElement, false, chart.redraw, true, true);\n        }\n        this.element.appendChild(labelElement);\n    };\n    /**\n     * To get available space to trim.\n     * @param legendRect\n     * @param labelRect\n     */\n    PolarRadarPanel.prototype.getAvailableSpaceToTrim = function (legendRect, labelRect) {\n        var legendX1 = legendRect.x;\n        var legendX2 = legendX1 + legendRect.width;\n        var labelX1 = labelRect.x;\n        var labelX2 = labelX1 + labelRect.width;\n        var width = 0;\n        if (labelX1 > legendX1 && labelX1 < legendX2 && labelX2 > legendX2) {\n            width = labelX2 - legendX2;\n        }\n        else if (labelX1 > legendX1 && labelX1 < legendX2 && labelX2 < legendX2) {\n            width = 0;\n        }\n        else if (labelX2 > legendX1 && labelX2 < legendX2 && labelX1 < legendX1) {\n            width = legendX1 - labelX1;\n        }\n        else if (labelX2 > legendX1 && labelX2 > legendX2 && labelX1 < legendX1) {\n            width = legendX1 - labelX1;\n        }\n        return width;\n    };\n    /**\n     * Getting axis label bounds\n     * @param pointX\n     * @param pointY\n     * @param label\n     * @param anchor\n     */\n    PolarRadarPanel.prototype.getLabelRegion = function (pointX, pointY, label, anchor) {\n        if (anchor === 'middle') {\n            pointX -= (label.size.width / 2);\n        }\n        else if (anchor === 'end') {\n            pointX -= label.size.width;\n        }\n        else {\n            pointX = pointX;\n        }\n        pointY -= (label.size.height / 2);\n        return new Rect(pointX, pointY, label.size.width, label.size.height);\n    };\n    PolarRadarPanel.prototype.renderTickLine = function (axis, index, majorTickLine, minorTickLine, gridIndex) {\n        var tickOptions;\n        var chart = this.chart;\n        var direction;\n        var element;\n        if (axis.majorTickLines.width > 0) {\n            element = getElement(chart.element.id + '_MajorTickLine_' + index + '_' + gridIndex);\n            direction = element ? element.getAttribute('d') : null;\n            tickOptions = new PathOption(chart.element.id + '_MajorTickLine_' + index + '_' + gridIndex, 'transparent', axis.majorTickLines.width, axis.majorTickLines.color || chart.themeStyle.majorTickLine, null, null, majorTickLine);\n            /**\n             * I252450\n             * When we click the center of the marker which is plotted in the axis, selection did not work is fixed\n             * Cause: Instead of marker id, axis Tick line id is obtained while clicking\n             * Fix: Pointer events set to none for tick lines\n             */\n            element = chart.renderer.drawPath(tickOptions);\n            this.setPointerEventNone(element);\n            appendChildElement(chart.enableCanvas, chart.yAxisElements, element, chart.redraw, true, 'x', 'y', null, direction);\n        }\n        if (axis.minorTickLines.width > 0) {\n            element = getElement(chart.element.id + '_MinorTickLine_' + index + '_' + gridIndex);\n            direction = element ? element.getAttribute('d') : null;\n            tickOptions = new PathOption(chart.element.id + '_MinorTickLine_' + index + '_' + gridIndex, 'transparent', axis.minorTickLines.width, axis.minorTickLines.color || chart.themeStyle.minorTickLine, null, null, minorTickLine);\n            /**\n             * I252450\n             * When we click the center of the marker which is plotted in the axis, selection did not work is fixed\n             * Cause: Instead of marker id, axis Tick line id is obtained while clicking\n             * Fix: Pointer events set to none for tick lines\n             */\n            element = chart.renderer.drawPath(tickOptions);\n            this.setPointerEventNone(element);\n            appendChildElement(chart.enableCanvas, chart.yAxisElements, element, chart.redraw, true, 'x', 'y', null, direction);\n        }\n    };\n    PolarRadarPanel.prototype.renderGridLine = function (axis, index, majorGrid, minorGird, gridIndex) {\n        var chart = this.chart;\n        var gridOptions;\n        var direction;\n        var element;\n        if (axis.majorGridLines.width > 0) {\n            element = getElement(chart.element.id + '_MajorGridLine_' + index + '_' + gridIndex);\n            direction = element ? element.getAttribute('d') : null;\n            gridOptions = new PathOption(chart.element.id + '_MajorGridLine_' + index + '_' + gridIndex, 'transparent', axis.majorGridLines.width, axis.majorGridLines.color || chart.themeStyle.majorGridLine, null, axis.majorGridLines.dashArray, majorGrid);\n            appendChildElement(chart.enableCanvas, this.element, chart.renderer.drawPath(gridOptions), chart.redraw, true, 'x', 'y', null, direction);\n        }\n        if (axis.minorGridLines.width > 0) {\n            element = getElement(chart.element.id + '_MinorGridLine_' + index + '_' + gridIndex);\n            direction = element ? element.getAttribute('d') : null;\n            gridOptions = new PathOption(chart.element.id + '_MinorGridLine_' + index + '_' + gridIndex, 'transparent', axis.minorGridLines.width, axis.minorGridLines.color || chart.themeStyle.minorGridLine, null, axis.minorGridLines.dashArray, minorGird);\n            appendChildElement(chart.enableCanvas, this.element, chart.renderer.drawPath(gridOptions), chart.redraw, true, 'x', 'y', null, direction);\n        }\n    };\n    PolarRadarPanel.prototype.setPointerEventNone = function (element) {\n        if (element) {\n            element.setAttribute('style', 'pointer-events:none');\n        }\n    };\n    return PolarRadarPanel;\n}(LineBase));\nexport { PolarRadarPanel };\n"],"mappings":"AAAA,IAAIA,SAAS,GAAI,QAAQ,KAAKA,SAAd,IAA6B,YAAY;EACrD,IAAIC,aAAa,GAAG,UAAUC,CAAV,EAAaC,CAAb,EAAgB;IAChCF,aAAa,GAAGG,MAAM,CAACC,cAAP,IACX;MAAEC,SAAS,EAAE;IAAb,aAA6BC,KAA7B,IAAsC,UAAUL,CAAV,EAAaC,CAAb,EAAgB;MAAED,CAAC,CAACI,SAAF,GAAcH,CAAd;IAAkB,CAD/D,IAEZ,UAAUD,CAAV,EAAaC,CAAb,EAAgB;MAAE,KAAK,IAAIK,CAAT,IAAcL,CAAd,EAAiB,IAAIA,CAAC,CAACM,cAAF,CAAiBD,CAAjB,CAAJ,EAAyBN,CAAC,CAACM,CAAD,CAAD,GAAOL,CAAC,CAACK,CAAD,CAAR;IAAc,CAF9E;;IAGA,OAAOP,aAAa,CAACC,CAAD,EAAIC,CAAJ,CAApB;EACH,CALD;;EAMA,OAAO,UAAUD,CAAV,EAAaC,CAAb,EAAgB;IACnBF,aAAa,CAACC,CAAD,EAAIC,CAAJ,CAAb;;IACA,SAASO,EAAT,GAAc;MAAE,KAAKC,WAAL,GAAmBT,CAAnB;IAAuB;;IACvCA,CAAC,CAACU,SAAF,GAAcT,CAAC,KAAK,IAAN,GAAaC,MAAM,CAACS,MAAP,CAAcV,CAAd,CAAb,IAAiCO,EAAE,CAACE,SAAH,GAAeT,CAAC,CAACS,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;EACH,CAJD;AAKH,CAZ2C,EAA5C;;AAaA,SAASI,kBAAT,EAA6BC,MAA7B,EAAqCC,SAArC,EAAgDC,QAAhD,QAAgE,2BAAhE;AACA,SAASC,kBAAT,QAAmC,2BAAnC;AACA,SAASC,YAAT,QAA6B,2BAA7B;AACA,SAASC,IAAT,EAAeC,WAAf,EAA4BC,UAA5B,EAAwCC,UAAxC,EAAoDC,IAApD,QAAgE,0BAAhE;AACA,SAASC,QAAT,QAAyB,qBAAzB;AACA,SAASC,WAAT,EAAsBC,aAAtB,EAAqCC,uBAArC,EAA8DC,mBAA9D,EAAmFC,UAAnF,QAAqG,2BAArG;AACA;AACA;AACA;;AACA,IAAIC,WAAW,GAAG,EAAlB;;AACA,IAAIC,eAAe;AAAG;AAAe,UAAUC,MAAV,EAAkB;EACnDjC,SAAS,CAACgC,eAAD,EAAkBC,MAAlB,CAAT;;EACA,SAASD,eAAT,GAA2B;IACvB,IAAIE,KAAK,GAAGD,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACE,KAAP,CAAa,IAAb,EAAmBC,SAAnB,CAAnB,IAAoD,IAAhE;IACA;;;IACAF,KAAK,CAACG,oBAAN,GAA6B,EAA7B;IACA,OAAOH,KAAP;EACH;EACD;AACJ;AACA;AACA;AACA;;;EACIF,eAAe,CAACpB,SAAhB,CAA0B0B,WAA1B,GAAwC,UAAUC,IAAV,EAAgB;IACpD,IAAIC,KAAK,GAAG,KAAKA,KAAjB;IACA,KAAKC,eAAL,GAAuBF,IAAvB;IACA,KAAKG,cAAL,GAAsB,IAAIlB,IAAJ,CAASe,IAAI,CAACI,CAAd,EAAiBJ,IAAI,CAACK,CAAtB,EAAyBL,IAAI,CAACM,KAA9B,EAAqCN,IAAI,CAACO,MAA1C,CAAtB,CAHoD,CAIpD;;IACA,KAAKC,cAAL,CAAoBP,KAApB,EAA2B,KAAKC,eAAhC;IACA,KAAKO,iBAAL,CAAuBR,KAAvB,EAA8B,KAAKC,eAAnC;IACA,KAAKQ,iBAAL;EACH,CARD;;EASAjB,eAAe,CAACpB,SAAhB,CAA0BmC,cAA1B,GAA2C,UAAUP,KAAV,EAAiBD,IAAjB,EAAuB;IAC9D,KAAKW,gBAAL,CAAsBX,IAAtB;IACA,IAAIY,GAAG,GAAGX,KAAK,CAACY,IAAN,CAAW,CAAX,CAAV;IACA,KAAKC,iBAAL,CAAuBF,GAAvB,EAA4BX,KAA5B,EAAmC,IAAIpB,IAAJ,CAASoB,KAAK,CAACc,aAAN,CAAoBT,KAA7B,EAAoCM,GAAG,CAACI,cAAxC,CAAnC,EAA4FhB,IAA5F;EACH,CAJD;;EAKAP,eAAe,CAACpB,SAAhB,CAA0BoC,iBAA1B,GAA8C,UAAUR,KAAV,EAAiBD,IAAjB,EAAuB;IACjE,KAAKiB,mBAAL,CAAyBjB,IAAzB;IACA,IAAIkB,MAAM,GAAGjB,KAAK,CAACkB,OAAN,CAAc,CAAd,CAAb;IACA,KAAKL,iBAAL,CAAuBI,MAAvB,EAA+BjB,KAA/B,EAAsC,IAAIpB,IAAJ,CAASqC,MAAM,CAACE,aAAhB,EAA+BnB,KAAK,CAACc,aAAN,CAAoBR,MAAnD,CAAtC,EAAkGP,IAAlG;EACH,CAJD;EAKA;AACJ;AACA;AACA;AACA;;;EACIP,eAAe,CAACpB,SAAhB,CAA0ByC,iBAA1B,GAA8C,UAAUO,UAAV,EAAsBpB,KAAtB,EAA6BqB,IAA7B,EAAmCC,QAAnC,EAA6C;IACvF,KAAK,IAAIC,EAAE,GAAG,CAAT,EAAYC,EAAE,GAAGJ,UAAU,CAACK,IAAjC,EAAuCF,EAAE,GAAGC,EAAE,CAACE,MAA/C,EAAuDH,EAAE,EAAzD,EAA6D;MACzD,IAAII,IAAI,GAAGH,EAAE,CAACD,EAAD,CAAb;MACAI,IAAI,CAACC,SAAL,CAAe5B,KAAf;MACA2B,IAAI,CAACE,UAAL,CAAgBC,yBAAhB,CAA0CT,IAA1C,EAAgDM,IAAhD;IACH;EACJ,CAND;EAOA;AACJ;AACA;AACA;AACA;;;EACInC,eAAe,CAACpB,SAAhB,CAA0BqC,iBAA1B,GAA8C,YAAY;IACtD,IAAIT,KAAK,GAAG,KAAKA,KAAjB;IACA,IAAI2B,IAAJ;IACA,IAAII,OAAO,GAAG,CAAd;IACA,KAAKC,OAAL,GAAe,KAAK/B,eAAL,CAAqBI,KAArB,GAA6B,GAA7B,GAAmC,KAAKJ,eAAL,CAAqBE,CAAvE;IACA,KAAK8B,OAAL,GAAe,KAAKhC,eAAL,CAAqBK,MAArB,GAA8B,GAA9B,GAAoC,KAAKL,eAAL,CAAqBG,CAAxE;IACAJ,KAAK,CAACkC,MAAN,GAAeC,IAAI,CAACC,GAAL,CAAS,KAAKnC,eAAL,CAAqBI,KAA9B,EAAqC,KAAKJ,eAAL,CAAqBK,MAA1D,IAAoE,CAApE,GAAwEyB,OAAxE,GACX/B,KAAK,CAACqC,YAAN,CAAmBC,cAAnB,CAAkChC,MADvB,GACgCN,KAAK,CAACqC,YAAN,CAAmBE,YAAnB,CAAgCjC,MAD/E;IAEAN,KAAK,CAACkC,MAAN,GAAgBlC,KAAK,CAACqC,YAAN,CAAmBG,WAAnB,GAAiCxC,KAAK,CAACkC,MAAxC,GAAkD,GAAjE;IACA,KAAKhC,cAAL,CAAoBE,CAApB,GAAwB,KAAK6B,OAAL,GAAejC,KAAK,CAACkC,MAA7C;IACA,KAAKhC,cAAL,CAAoBC,CAApB,GAAwB,KAAK6B,OAAL,GAAehC,KAAK,CAACkC,MAA7C;IACA,KAAKhC,cAAL,CAAoBI,MAApB,GAA6B,IAAIN,KAAK,CAACkC,MAAvC;IACA,KAAKhC,cAAL,CAAoBG,KAApB,GAA4B,IAAIL,KAAK,CAACkC,MAAtC;IACA,KAAKxB,gBAAL,CAAsB,KAAKR,cAA3B;IACAyB,IAAI,GAAG3B,KAAK,CAACyC,YAAb;IACAd,IAAI,CAAC5B,IAAL,GAAY,KAAKG,cAAjB;IACA,KAAKc,mBAAL,CAAyB,KAAKd,cAA9B;IACAyB,IAAI,GAAG3B,KAAK,CAACqC,YAAb;IACAV,IAAI,CAAC5B,IAAL,GAAY,KAAKG,cAAjB;EACH,CAnBD;EAoBA;AACJ;AACA;AACA;AACA;;;EACIV,eAAe,CAACpB,SAAhB,CAA0BsE,OAA1B,GAAoC,YAAY;IAC5C,IAAI1C,KAAK,GAAG,KAAKA,KAAjB;IACAA,KAAK,CAAC2C,YAAN,CAAmBC,IAAnB,CAAwB5C,KAAK,CAACyC,YAA9B;IACA,IAAI9B,GAAG,GAAGX,KAAK,CAACY,IAAN,CAAW,CAAX,CAAV;IACAD,GAAG,CAACc,IAAJ,CAAS,CAAT,IAAczB,KAAK,CAACyC,YAApB;IACAzC,KAAK,CAACY,IAAN,CAAW,CAAX,IAAgBD,GAAhB;IACAX,KAAK,CAAC6C,cAAN,CAAqBD,IAArB,CAA0B5C,KAAK,CAACqC,YAAhC;IACA,IAAIpB,MAAM,GAAGjB,KAAK,CAACkB,OAAN,CAAc,CAAd,CAAb;IACAD,MAAM,CAACQ,IAAP,CAAY,CAAZ,IAAiBzB,KAAK,CAACqC,YAAvB;IACArC,KAAK,CAACkB,OAAN,CAAc,CAAd,IAAmBD,MAAnB;EACH,CAVD;EAWA;AACJ;AACA;AACA;;;EACIzB,eAAe,CAACpB,SAAhB,CAA0BsC,gBAA1B,GAA6C,UAAUX,IAAV,EAAgB;IACzD;IACA,IAAIC,KAAK,GAAG,KAAKA,KAAjB;IACA,IAAIW,GAAG,GAAGX,KAAK,CAACY,IAAN,CAAW,CAAX,CAAV;IACAD,GAAG,CAACI,cAAJ,GAAqBhB,IAAI,CAACO,MAAL,GAAc,CAAnC;IACAK,GAAG,CAACmC,WAAJ,GAAkB/C,IAAI,CAACK,CAAvB;IACAJ,KAAK,CAACY,IAAN,CAAW,CAAX,IAAgBD,GAAhB;EACH,CAPD;EAQA;AACJ;AACA;AACA;;;EACInB,eAAe,CAACpB,SAAhB,CAA0B4C,mBAA1B,GAAgD,UAAUjB,IAAV,EAAgB;IAC5D;IACA,IAAIC,KAAK,GAAG,KAAKA,KAAjB;IACA,IAAIiB,MAAM,GAAGjB,KAAK,CAACkB,OAAN,CAAc,CAAd,CAAb;IACAD,MAAM,CAAC8B,YAAP,GAAsBhD,IAAI,CAACI,CAA3B;IACAc,MAAM,CAACE,aAAP,GAAuBpB,IAAI,CAACM,KAA5B;IACAL,KAAK,CAACkB,OAAN,CAAc,CAAd,IAAmBD,MAAnB;EACH,CAPD;EAQA;AACJ;AACA;AACA;AACA;;;EACIzB,eAAe,CAACpB,SAAhB,CAA0B4E,UAA1B,GAAuC,YAAY;IAC/C,IAAIrB,IAAJ;IACA,IAAI3B,KAAK,GAAG,KAAKA,KAAjB;IACA,KAAKiD,UAAL,GAAkBjD,KAAK,CAACqC,YAAN,CAAmBY,UAArC;IACA,IAAIC,WAAW,GAAGlD,KAAK,CAACmD,QAAN,CAAeC,WAAf,CAA2B;MAAEC,EAAE,EAAErD,KAAK,CAACsD,OAAN,CAAcD,EAAd,GAAmB;IAAzB,CAA3B,CAAlB;IACA,IAAIE,eAAe,GAAGvD,KAAK,CAACmD,QAAN,CAAeC,WAAf,CAA2B;MAAEC,EAAE,EAAErD,KAAK,CAACsD,OAAN,CAAcD,EAAd,GAAmB;IAAzB,CAA3B,CAAtB;;IACA,KAAK,IAAIG,CAAC,GAAG,CAAR,EAAWC,GAAG,GAAGzD,KAAK,CAAC0D,eAAN,CAAsBhC,MAA5C,EAAoD8B,CAAC,GAAGC,GAAxD,EAA6DD,CAAC,EAA9D,EAAkE;MAC9D,KAAKF,OAAL,GAAetD,KAAK,CAACmD,QAAN,CAAeC,WAAf,CAA2B;QAAEC,EAAE,EAAErD,KAAK,CAACsD,OAAN,CAAcD,EAAd,GAAmB,WAAnB,GAAiCG;MAAvC,CAA3B,CAAf;MACA7B,IAAI,GAAG3B,KAAK,CAAC0D,eAAN,CAAsBF,CAAtB,CAAP;;MACA,IAAI7B,IAAI,CAACgC,WAAL,KAAqB,YAAzB,EAAuC;QACnC,IAAIhC,IAAI,CAACiC,cAAL,CAAoBvD,KAApB,GAA4B,CAA5B,IAAiCsB,IAAI,CAACW,cAAL,CAAoBjC,KAApB,GAA4B,CAAjE,EAAoE;UAChE,KAAKwD,iBAAL,CAAuBlC,IAAvB,EAA6B6B,CAA7B;QACH;;QACD,IAAI7B,IAAI,CAACmC,OAAL,IAAgBnC,IAAI,CAACoC,kBAAzB,EAA6C;UACzC,KAAKC,eAAL,CAAqBrC,IAArB,EAA2B6B,CAA3B;QACH;MACJ,CAPD,MAQK;QACD,KAAKS,iBAAL,CAAuBtC,IAAvB,EAA6B6B,CAA7B;;QACA,IAAI7B,IAAI,CAACuC,SAAL,CAAe7D,KAAf,GAAuB,CAA3B,EAA8B;UAC1B,KAAK8D,aAAL,CAAmBxC,IAAnB,EAAyB6B,CAAzB,EAA4B7B,IAAI,CAACyC,UAAjC,EAA6C,CAA7C;QACH;;QACD,IAAIzC,IAAI,CAACmC,OAAL,IAAgBnC,IAAI,CAACoC,kBAAzB,EAA6C;UACzC,KAAKM,eAAL,CAAqB1C,IAArB,EAA2B6B,CAA3B;QACH;MACJ;;MACDN,WAAW,CAACoB,WAAZ,CAAwB,KAAKhB,OAA7B;IACH;;IACDJ,WAAW,CAACoB,WAAZ,CAAwB,KAAKhB,OAA7B;IACA5E,kBAAkB,CAACsB,KAAK,CAACuE,YAAP,EAAqBvE,KAAK,CAACwE,SAA3B,EAAsCtB,WAAtC,EAAmDlD,KAAK,CAACyE,MAAzD,CAAlB;IACA,OAAOlB,eAAP;EACH,CA/BD;;EAgCA/D,eAAe,CAACpB,SAAhB,CAA0B+F,aAA1B,GAA0C,UAAUxC,IAAV,EAAgB+C,KAAhB,EAAuBC,KAAvB,EAA8BC,KAA9B,EAAqC;IAC3E,IAAI5E,KAAK,GAAG,KAAKA,KAAjB;IACA,IAAI6E,WAAW,GAAG,EAAlB;IACA,IAAIC,MAAM,GAAGzF,mBAAmB,CAACD,uBAAuB,CAACuC,IAAI,CAACoD,aAAL,CAAmB,CAAnB,EAAsBC,KAAvB,EAA8BrD,IAA9B,CAAxB,EAA6D,KAAKsB,UAAlE,CAAhC;IACA,IAAIgC,QAAQ,GAAG,OAAO,KAAKjD,OAAZ,GAAsB,GAAtB,GAA4B,KAAKC,OAAjC,GAA2C,IAA3C,IACV,KAAKD,OAAL,GAAehC,KAAK,CAACkC,MAAN,GAAe4C,MAAM,CAAC3E,CAD3B,IACgC,GADhC,IACuC,KAAK8B,OAAL,GAAejC,KAAK,CAACkC,MAAN,GAAe4C,MAAM,CAAC1E,CAD5E,CAAf;IAEAyE,WAAW,GAAG;MACV,MAAM7E,KAAK,CAACsD,OAAN,CAAcD,EAAd,GAAmB,WAAnB,GAAiCqB,KAD7B;MAEV,KAAKO,QAFK;MAGV,oBAAoBtD,IAAI,CAACuC,SAAL,CAAegB,SAHzB;MAIV,gBAAgBvD,IAAI,CAACuC,SAAL,CAAe7D,KAJrB;MAKV,UAAUsB,IAAI,CAACuC,SAAL,CAAeiB,KAAf,IAAwBnF,KAAK,CAACoF,UAAN,CAAiBH;IALzC,CAAd;IAOA;AACR;AACA;AACA;AACA;AACA;;IACQ,IAAI3B,OAAO,GAAGtD,KAAK,CAACmD,QAAN,CAAekC,QAAf,CAAwBR,WAAxB,CAAd;IACA,KAAKS,mBAAL,CAAyBhC,OAAzB;IACAtD,KAAK,CAACuF,aAAN,CAAoBjB,WAApB,CAAgChB,OAAhC;EACH,CAtBD;;EAuBA9D,eAAe,CAACpB,SAAhB,CAA0BiG,eAA1B,GAA4C,UAAU1C,IAAV,EAAgB+C,KAAhB,EAAuB;IAC/D,IAAI1E,KAAK,GAAG,KAAKA,KAAjB;IACA,IAAIwF,WAAJ;IACA,IAAIC,OAAJ;IACA,IAAIC,MAAM,GAAG,CAAb;IACA,IAAIC,MAAM,GAAG,CAAb;IACA,IAAIb,MAAJ;IACA,IAAIc,KAAK,GAAG,KAAK3C,UAAL,GAAkB,CAAlB,GAAsB,KAAKA,UAAL,GAAkB,GAAxC,GAA8C,KAAKA,UAA/D;IACA,IAAI4C,MAAM,GAAG,QAAb;IACA,IAAI3D,MAAJ;IACA,IAAIH,OAAO,GAAG,CAAd;IACA,IAAI+D,WAAJ;IACA,IAAIC,YAAY,GAAG,EAAnB;IACA,IAAIC,cAAc,GAAG,EAArB;IACAA,cAAc,CAAC,CAAD,CAAd,GAAoB,IAApB;IACA,IAAIC,aAAa,GAAGtE,IAAI,CAACuE,oBAAzB;IACA,IAAIC,YAAY,GAAGnG,KAAK,CAACmD,QAAN,CAAeC,WAAf,CAA2B;MAAEC,EAAE,EAAErD,KAAK,CAACsD,OAAN,CAAcD,EAAd,GAAmB,YAAnB,GAAkCqB;IAAxC,CAA3B,CAAnB;IACAI,MAAM,GAAGzF,mBAAmB,CAACD,uBAAuB,CAACuC,IAAI,CAACoD,aAAL,CAAmB,CAAnB,EAAsBC,KAAvB,EAA8BrD,IAA9B,CAAxB,EAA6D,KAAKsB,UAAlE,CAA5B;;IACA,KAAK,IAAIO,CAAC,GAAG,CAAR,EAAWC,GAAG,GAAG9B,IAAI,CAACoD,aAAL,CAAmBrD,MAAzC,EAAiD8B,CAAC,GAAGC,GAArD,EAA0DD,CAAC,EAA3D,EAA+D;MAC3DsC,WAAW,GAAG,KAAd;MACA5D,MAAM,GAAGlC,KAAK,CAACkC,MAAN,GAAe5D,kBAAkB,CAACqD,IAAI,CAACoD,aAAL,CAAmBvB,CAAnB,EAAsBwB,KAAvB,EAA8BrD,IAA9B,CAA1C;MACA6D,WAAW,GAAG7D,IAAI,CAACoD,aAAL,CAAmBvB,CAAnB,EAAsBnC,IAApC;MACAa,MAAM,GAAGlC,KAAK,CAACkC,MAAN,GAAe5D,kBAAkB,CAACqD,IAAI,CAACoD,aAAL,CAAmBvB,CAAnB,EAAsBwB,KAAvB,EAA8BrD,IAA9B,CAA1C;MACA+D,MAAM,GAAI,KAAK1D,OAAL,GAAeE,MAAM,GAAG4C,MAAM,CAAC3E,CAAhC,GAAsC,CAACwB,IAAI,CAACW,cAAL,CAAoBhC,MAApB,GAA6BkF,WAAW,CAACnF,KAAZ,GAAoB,CAAjD,GAAqD0B,OAAO,GAAG,CAAhE,IACxCI,IAAI,CAACiE,GAAL,CAASR,KAAK,GAAGzD,IAAI,CAACkE,EAAb,GAAkB,GAA3B,CADwC,IACJ1E,IAAI,CAAC2E,aAAL,KAAuB,QAAvB,GAAkC,CAAlC,GAAsC,CAAC,CADnC,CAA/C;MAEAX,MAAM,GAAI,KAAK1D,OAAL,GAAeC,MAAM,GAAG4C,MAAM,CAAC1E,CAAhC,GAAsC,CAACuB,IAAI,CAACW,cAAL,CAAoBhC,MAApB,GAA6BkF,WAAW,CAAClF,MAAZ,GAAqB,CAAnD,IACxC6B,IAAI,CAACoE,GAAL,CAASX,KAAK,GAAGzD,IAAI,CAACkE,EAAb,GAAkB,GAA3B,CADwC,IACJ1E,IAAI,CAAC2E,aAAL,KAAuB,QAAvB,GAAkC,CAAlC,GAAsC,CAAC,CADnC,CAA/C;MAEAX,MAAM,IAAKH,WAAW,CAAClF,MAAZ,GAAqB,CAAhC;MACAyF,YAAY,CAACvC,CAAD,CAAZ,GAAkB,KAAKgD,cAAL,CAAoBd,MAApB,EAA4BC,MAA5B,EAAoChE,IAAI,CAACoD,aAAL,CAAmBvB,CAAnB,CAApC,EAA2DqC,MAA3D,CAAlB;;MACA,IAAIrC,CAAC,KAAK,CAAN,IAAWyC,aAAa,KAAK,MAAjC,EAAyC;QACrC,KAAK,IAAIQ,CAAC,GAAGjD,CAAb,EAAgBiD,CAAC,IAAI,CAArB,EAAwBA,CAAC,EAAzB,EAA6B;UACzBA,CAAC,GAAIA,CAAC,KAAK,CAAP,GAAY,CAAZ,GAAiBA,CAAC,KAAKjD,CAAP,GAAaiD,CAAC,GAAG,CAAjB,GAAsBA,CAA1C;;UACA,IAAIT,cAAc,CAACS,CAAD,CAAd,IAAqBjI,SAAS,CAACuH,YAAY,CAACvC,CAAD,CAAb,EAAkBuC,YAAY,CAACU,CAAD,CAA9B,CAAlC,EAAsE;YAClEX,WAAW,GAAG,IAAd;YACAE,cAAc,CAACxC,CAAD,CAAd,GAAoB,KAApB;YACA;UACH,CAJD,MAKK;YACDwC,cAAc,CAACxC,CAAD,CAAd,GAAoB,IAApB;UACH;QACJ;;QACD,IAAIsC,WAAJ,EAAiB;UACb,SADa,CACH;QACb,CAdoC,CAerC;;;QACA,KAAK,IAAIvE,EAAE,GAAG,CAAT,EAAYC,EAAE,GAAG,KAAK3B,oBAA3B,EAAiD0B,EAAE,GAAGC,EAAE,CAACE,MAAzD,EAAiEH,EAAE,EAAnE,EAAuE;UACnE,IAAIxB,IAAI,GAAGyB,EAAE,CAACD,EAAD,CAAb;;UACA,IAAI/C,SAAS,CAACuH,YAAY,CAACvC,CAAD,CAAb,EAAkBzD,IAAlB,CAAb,EAAsC;YAClC+F,WAAW,GAAG,IAAd;YACA;UACH;QACJ;MACJ;;MACD,IAAIA,WAAJ,EAAiB;QACb;MACH;;MACD,KAAKjG,oBAAL,CAA0B+C,IAA1B,CAA+BmD,YAAY,CAACvC,CAAD,CAA3C;MACAiC,OAAO,GAAG,IAAI3G,UAAJ,CAAekB,KAAK,CAACsD,OAAN,CAAcD,EAAd,GAAmBqB,KAAnB,GAA2B,aAA3B,GAA2ClB,CAA1D,EAA6DkC,MAA7D,EAAqEC,MAArE,EAA6EE,MAA7E,EAAqFlE,IAAI,CAACoD,aAAL,CAAmBvB,CAAnB,EAAsBkD,IAA3G,CAAV;MACAxH,WAAW,CAACc,KAAK,CAACmD,QAAP,EAAiBsC,OAAjB,EAA0B9D,IAAI,CAACgF,UAA/B,EAA2ChF,IAAI,CAACgF,UAAL,CAAgBxB,KAAhB,IAAyBnF,KAAK,CAACoF,UAAN,CAAiBwB,SAArF,EAAgGT,YAAhG,EAA8G,KAA9G,EAAqHnG,KAAK,CAACyE,MAA3H,EAAmI,IAAnI,EAAyI,IAAzI,CAAX;IACH;;IACDzE,KAAK,CAACuF,aAAN,CAAoBjB,WAApB,CAAgC6B,YAAhC;EACH,CA7DD;;EA8DA3G,eAAe,CAACpB,SAAhB,CAA0B6F,iBAA1B,GAA8C,UAAUtC,IAAV,EAAgB+C,KAAhB,EAAuB;IACjE,IAAI1E,KAAK,GAAG,KAAKA,KAAjB;IACA,IAAIyF,OAAJ;IACA,IAAIvD,MAAJ;IACA,IAAI2E,SAAS,GAAG,EAAhB;IACA,IAAIC,SAAS,GAAG,EAAhB;IACA,IAAIhC,MAAJ;IACA,IAAIiC,OAAJ;IACA,IAAInB,KAAK,GAAG,KAAK3C,UAAL,GAAkB,CAAlB,GAAsB,KAAKA,UAAL,GAAkB,GAAxC,GAA8C,KAAKA,UAA/D;IACA,IAAIlD,IAAI,GAAG4B,IAAI,CAAC5B,IAAhB;IACA,IAAIiH,EAAJ;IACA,IAAIC,EAAJ;IACA,IAAIC,EAAJ;IACA,IAAIC,EAAJ;IACA,IAAIC,MAAM,GAAG;MACTjC,KAAK,EAAExD,IAAI,CAACiC,cAAL,CAAoBuB,KAApB,IAA6BnF,KAAK,CAACoF,UAAN,CAAiBiC,aAD5C;MAEThH,KAAK,EAAEsB,IAAI,CAACiC,cAAL,CAAoBvD;IAFlB,CAAb;IAIA,IAAIiH,aAAJ;IACA,IAAIhE,OAAJ;;IACA,IAAI3B,IAAI,CAACiC,cAAL,CAAoBvD,KAApB,GAA4B,CAAhC,EAAmC;MAC/B,IAAIL,KAAK,CAACuH,aAAN,CAAoB,CAApB,EAAuBC,IAAvB,KAAgC,OAApC,EAA6C;QACzC,KAAK,IAAIf,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG9E,IAAI,CAACoD,aAAL,CAAmBrD,MAAvC,EAA+C+E,CAAC,EAAhD,EAAoD;UAChDnD,OAAO,GAAGhE,UAAU,CAACU,KAAK,CAACsD,OAAN,CAAcD,EAAd,GAAmB,iBAAnB,GAAuCqB,KAAvC,GAA+C,GAA/C,GAAqD+B,CAAtD,CAApB;UACAa,aAAa,GAAGhE,OAAO,GAAGA,OAAO,CAACmE,YAAR,CAAqB,GAArB,CAAH,GAA+B,IAAtD;UACAvF,MAAM,GAAGlC,KAAK,CAACkC,MAAN,GAAe5D,kBAAkB,CAACqD,IAAI,CAACoD,aAAL,CAAmB0B,CAAnB,EAAsBzB,KAAvB,EAA8BrD,IAA9B,CAA1C;UACA8D,OAAO,GAAG,IAAI9G,YAAJ,CAAiBqB,KAAK,CAACsD,OAAN,CAAcD,EAAd,GAAmB,iBAAnB,GAAuCqB,KAAvC,GAA+C,GAA/C,GAAqD+B,CAAtE,EAAyE,aAAzE,EAAwFW,MAAxF,EAAgGzF,IAAI,CAACiC,cAAL,CAAoBvD,KAApH,EAA2H,KAAK2B,OAAhI,EAAyI,KAAKC,OAA9I,EAAuJC,MAAvJ,CAAV;UACAxD,kBAAkB,CAACsB,KAAK,CAACuE,YAAP,EAAqB,KAAKjB,OAA1B,EAAmCtD,KAAK,CAACmD,QAAN,CAAeuE,UAAf,CAA0BjC,OAA1B,CAAnC,EAAuEzF,KAAK,CAACyE,MAA7E,EAAqF,IAArF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,IAAItF,aAAJ,CAAkB,CAACmI,aAAnB,EAAkC,CAACA,aAAnC,CAArG,EAAwJ,IAAxJ,EAA8J,IAA9J,CAAlB;QACH;;QACD,IAAIpF,MAAM,KAAKlC,KAAK,CAACkC,MAArB,EAA6B;UACzBuD,OAAO,GAAG,IAAI9G,YAAJ,CAAiBqB,KAAK,CAACsD,OAAN,CAAcD,EAAd,GAAmB,iBAAnB,GAAuCqB,KAAvC,GAA+C,GAA/C,GAAqD/C,IAAI,CAACoD,aAAL,CAAmBrD,MAAxE,GAAiF,CAAlG,EAAqG,aAArG,EAAoH0F,MAApH,EAA4HzF,IAAI,CAACiC,cAAL,CAAoBvD,KAAhJ,EAAuJ,KAAK2B,OAA5J,EAAqK,KAAKC,OAA1K,EAAmLjC,KAAK,CAACkC,MAAzL,CAAV;UACAxD,kBAAkB,CAACsB,KAAK,CAACuE,YAAP,EAAqB,KAAKjB,OAA1B,EAAmCtD,KAAK,CAACmD,QAAN,CAAeuE,UAAf,CAA0BjC,OAA1B,CAAnC,EAAuEzF,KAAK,CAACyE,MAA7E,EAAqF,IAArF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,IAAItF,aAAJ,CAAkB,CAACmI,aAAnB,EAAkC,CAACA,aAAnC,CAArG,EAAwJ,IAAxJ,EAA8J,IAA9J,CAAlB;QACH;MACJ,CAZD,MAaK;QACD,KAAK,IAAIb,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG9E,IAAI,CAACoD,aAAL,CAAmBrD,MAAvC,EAA+C+E,CAAC,EAAhD,EAAoD;UAChDvE,MAAM,GAAGlC,KAAK,CAACkC,MAAN,GAAe5D,kBAAkB,CAACqD,IAAI,CAACoD,aAAL,CAAmB0B,CAAnB,EAAsBzB,KAAvB,EAA8BrD,IAA9B,CAA1C;UACAmF,SAAS,GAAG,KAAKa,eAAL,CAAqBzF,MAArB,EAA6B,EAA7B,EAAiClC,KAAjC,CAAZ;UACAsD,OAAO,GAAGhE,UAAU,CAACU,KAAK,CAACsD,OAAN,CAAcD,EAAd,GAAmB,iBAAnB,GAAuCqB,KAAvC,GAA+C,GAA/C,GAAqD+B,CAAtD,CAApB;UACAa,aAAa,GAAGhE,OAAO,GAAGA,OAAO,CAACmE,YAAR,CAAqB,GAArB,CAAH,GAA+B,IAAtD;UACAhC,OAAO,GAAG,IAAI1G,UAAJ,CAAeiB,KAAK,CAACsD,OAAN,CAAcD,EAAd,GAAmB,iBAAnB,GAAuCqB,KAAvC,GAA+C,GAA/C,GAAqD+B,CAApE,EAAuE,aAAvE,EAAsF9E,IAAI,CAACiC,cAAL,CAAoBvD,KAA1G,EAAiHsB,IAAI,CAACiC,cAAL,CAAoBuB,KAApB,IAA6BnF,KAAK,CAACoF,UAAN,CAAiBiC,aAA/J,EAA8K,IAA9K,EAAoL,IAApL,EAA0LP,SAA1L,CAAV;UACApI,kBAAkB,CAACsB,KAAK,CAACuE,YAAP,EAAqB,KAAKjB,OAA1B,EAAmCtD,KAAK,CAACmD,QAAN,CAAekC,QAAf,CAAwBI,OAAxB,CAAnC,EAAqEzF,KAAK,CAACyE,MAA3E,EAAmF,IAAnF,EAAyF,GAAzF,EAA8F,GAA9F,EAAmG,IAAnG,EAAyG6C,aAAzG,EAAwH,IAAxH,CAAlB;QACH;;QACD,IAAIpF,MAAM,KAAKlC,KAAK,CAACkC,MAArB,EAA6B;UACzB4E,SAAS,GAAG,KAAKa,eAAL,CAAqB3H,KAAK,CAACkC,MAA3B,EAAmC,EAAnC,EAAuClC,KAAvC,CAAZ;UACAsD,OAAO,GAAGhE,UAAU,CAACU,KAAK,CAACsD,OAAN,CAAcD,EAAd,GAAmB,iBAAnB,GAAuCqB,KAAvC,GAA+C,GAA/C,GAAqD/C,IAAI,CAACoD,aAAL,CAAmBrD,MAAzE,CAApB;UACA4F,aAAa,GAAGhE,OAAO,GAAGA,OAAO,CAACmE,YAAR,CAAqB,GAArB,CAAH,GAA+B,IAAtD;UACAhC,OAAO,GAAG,IAAI1G,UAAJ,CAAeiB,KAAK,CAACsD,OAAN,CAAcD,EAAd,GAAmB,iBAAnB,GAAuCqB,KAAvC,GAA+C,GAA/C,GAAqD/C,IAAI,CAACoD,aAAL,CAAmBrD,MAAvF,EAA+F,aAA/F,EAA8GC,IAAI,CAACiC,cAAL,CAAoBvD,KAAlI,EAAyIsB,IAAI,CAACiC,cAAL,CAAoBuB,KAApB,IAA6BnF,KAAK,CAACoF,UAAN,CAAiBiC,aAAvL,EAAsM,IAAtM,EAA4M,IAA5M,EAAkNP,SAAlN,CAAV;UACApI,kBAAkB,CAACsB,KAAK,CAACuE,YAAP,EAAqB,KAAKjB,OAA1B,EAAmCtD,KAAK,CAACmD,QAAN,CAAekC,QAAf,CAAwBI,OAAxB,CAAnC,EAAqEzF,KAAK,CAACyE,MAA3E,EAAmF,IAAnF,EAAyF,GAAzF,EAA8F,GAA9F,EAAmG,IAAnG,EAAyG6C,aAAzG,EAAwH,IAAxH,CAAlB;QACH;MACJ;IACJ;;IACD,IAAI3F,IAAI,CAACW,cAAL,CAAoBjC,KAApB,GAA4B,CAAhC,EAAmC;MAC/ByE,MAAM,GAAGzF,mBAAmB,CAACD,uBAAuB,CAACuC,IAAI,CAACoD,aAAL,CAAmB,CAAnB,EAAsBC,KAAvB,EAA8BrD,IAA9B,CAAxB,EAA6D,KAAKsB,UAAlE,CAA5B;;MACA,KAAK,IAAIO,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG7B,IAAI,CAACoD,aAAL,CAAmBrD,MAAvC,EAA+C8B,CAAC,EAAhD,EAAoD;QAChDtB,MAAM,GAAGlC,KAAK,CAACkC,MAAN,GAAe5D,kBAAkB,CAACqD,IAAI,CAACoD,aAAL,CAAmBvB,CAAnB,EAAsBwB,KAAvB,EAA8BrD,IAA9B,CAA1C;QACAqF,EAAE,GAAG,KAAKhF,OAAL,GAAeE,MAAM,GAAG4C,MAAM,CAAC3E,CAApC;QACA8G,EAAE,GAAG,KAAKhF,OAAL,GAAeC,MAAM,GAAG4C,MAAM,CAAC1E,CAApC;QACA8G,EAAE,GAAGF,EAAE,GAAIrF,IAAI,CAACW,cAAL,CAAoBhC,MAApB,GAA8B6B,IAAI,CAACiE,GAAL,CAASR,KAAK,GAAGzD,IAAI,CAACkE,EAAb,GAAkB,GAA3B,CAA9B,IAAkE1E,IAAI,CAACiG,YAAL,KAAsB,QAAtB,GAAiC,CAAjC,GAAqC,CAAC,CAAxG,CAAX;QACAT,EAAE,GAAGF,EAAE,GAAItF,IAAI,CAACW,cAAL,CAAoBhC,MAApB,GAA8B6B,IAAI,CAACoE,GAAL,CAASX,KAAK,GAAGzD,IAAI,CAACkE,EAAb,GAAkB,GAA3B,CAA9B,IAAkE1E,IAAI,CAACiG,YAAL,KAAsB,QAAtB,GAAiC,CAAjC,GAAqC,CAAC,CAAxG,CAAX;QACAf,SAAS,GAAG,OAAOG,EAAP,GAAY,GAAZ,GAAkBC,EAAlB,GAAuB,KAAvB,GAA+BC,EAA/B,GAAoC,GAApC,GAA0CC,EAAtD;QACA,KAAKU,cAAL,CAAoBlG,IAApB,EAA0B+C,KAA1B,EAAiCmC,SAAjC,EAA4C,EAA5C,EAAgDrD,CAAhD;MACH;IACJ;EACJ,CAhED;;EAiEAhE,eAAe,CAACpB,SAAhB,CAA0BuJ,eAA1B,GAA4C,UAAUzF,MAAV,EAAkB4E,SAAlB,EAA6B9G,KAA7B,EAAoC;IAC5E,IAAI8E,MAAJ;IACA,IAAIiC,OAAJ;IACA,IAAIC,EAAJ;IACA,IAAIC,EAAJ;IACA,IAAIC,EAAJ;IACA,IAAIC,EAAJ;;IACA,KAAK,IAAI3D,CAAC,GAAG,CAAR,EAAWC,GAAG,GAAGzD,KAAK,CAACqC,YAAN,CAAmB0C,aAAnB,CAAiCrD,MAAvD,EAA+D8B,CAAC,GAAGC,GAAnE,EAAwED,CAAC,EAAzE,EAA6E;MACzEsB,MAAM,GAAGzF,mBAAmB,CAACD,uBAAuB,CAACY,KAAK,CAACqC,YAAN,CAAmB0C,aAAnB,CAAiCvB,CAAjC,EAAoCwB,KAArC,EAA4ChF,KAAK,CAACqC,YAAlD,CAAxB,EAAyF,KAAKY,UAA9F,CAA5B;;MACA,IAAIO,CAAC,GAAG,CAAJ,GAAQC,GAAZ,EAAiB;QACbsD,OAAO,GAAG1H,mBAAmB,CAACD,uBAAuB,CAACY,KAAK,CAACqC,YAAN,CAAmB0C,aAAnB,CAAiCvB,CAAC,GAAG,CAArC,EAAwCwB,KAAzC,EAAgDhF,KAAK,CAACqC,YAAtD,CAAxB,EAA6F,KAAKY,UAAlG,CAA7B;MACH,CAFD,MAGK;QACD8D,OAAO,GAAG1H,mBAAmB,CAACD,uBAAuB,CAACY,KAAK,CAACqC,YAAN,CAAmB0C,aAAnB,CAAiC,CAAjC,EAAoCC,KAArC,EAA4ChF,KAAK,CAACqC,YAAlD,CAAxB,EAAyF,KAAKY,UAA9F,CAA7B;MACH;;MACD+D,EAAE,GAAG,KAAKhF,OAAL,GAAeE,MAAM,GAAG4C,MAAM,CAAC3E,CAApC;MACA8G,EAAE,GAAG,KAAKhF,OAAL,GAAeC,MAAM,GAAG4C,MAAM,CAAC1E,CAApC;MACA8G,EAAE,GAAG,KAAKlF,OAAL,GAAeE,MAAM,GAAG6E,OAAO,CAAC5G,CAArC;MACAgH,EAAE,GAAG,KAAKlF,OAAL,GAAeC,MAAM,GAAG6E,OAAO,CAAC3G,CAArC;MACA0G,SAAS,GAAGA,SAAS,CAACgB,MAAV,CAAiB,CAACtE,CAAC,GAAG,IAAH,GAAU,IAAZ,IAAoB,GAApB,GAA0BwD,EAA1B,GAA+B,GAA/B,GAAqCC,EAArC,GAA0C,GAA1C,GAAgD,IAAhD,GAAuD,GAAvD,GAA6DC,EAA7D,GAAkE,GAAlE,GAAwEC,EAAxE,GAA6E,GAA9F,CAAZ;IACH;;IACD,OAAOL,SAAP;EACH,CAtBD;;EAuBAtH,eAAe,CAACpB,SAAhB,CAA0ByF,iBAA1B,GAA8C,UAAUlC,IAAV,EAAgB+C,KAAhB,EAAuB;IACjE,IAAI1E,KAAK,GAAG,KAAKA,KAAjB;IACA,IAAI+H,YAAJ;IACA,IAAIjD,MAAJ;IACA,IAAIgC,SAAS,GAAG,EAAhB;IACA,IAAID,SAAS,GAAG,EAAhB;IACA,IAAImB,aAAa,GAAG,EAApB;IACA,IAAIC,aAAa,GAAG,EAApB;IACA,IAAIjB,EAAE,GAAG,KAAKhF,OAAd;IACA,IAAIkF,EAAJ;IACA,IAAID,EAAE,GAAG,KAAKhF,OAAd;IACA,IAAIkF,EAAJ;IACA,IAAIe,cAAJ;IACA,IAAIC,QAAQ,GAAGxG,IAAI,CAACW,cAAL,CAAoBhC,MAAnC;IACA,IAAIP,IAAI,GAAG4B,IAAI,CAAC5B,IAAhB;IACA,IAAI2B,MAAM,GAAGC,IAAI,CAACoD,aAAL,CAAmBrD,MAAhC,CAfiE,CAgBjE;;IACA,KAAK,IAAI8B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG9B,MAApB,EAA4B8B,CAAC,EAA7B,EAAiC;MAC7BuE,YAAY,GAAGpG,IAAI,CAACoD,aAAL,CAAmBvB,CAAnB,EAAsBwB,KAArC;MACAF,MAAM,GAAGzF,mBAAmB,CAACD,uBAAuB,CAACuC,IAAI,CAACoD,aAAL,CAAmBvB,CAAnB,EAAsBwB,KAAvB,EAA8BrD,IAA9B,CAAxB,EAA6D,KAAKsB,UAAlE,CAA5B;MACAiE,EAAE,GAAG,KAAKlF,OAAL,GAAehC,KAAK,CAACkC,MAAN,GAAe4C,MAAM,CAAC3E,CAA1C;MACAgH,EAAE,GAAG,KAAKlF,OAAL,GAAejC,KAAK,CAACkC,MAAN,GAAe4C,MAAM,CAAC1E,CAA1C;MACA,IAAIgI,IAAI,GAAGlB,EAAE,GAAIvF,IAAI,CAACW,cAAL,CAAoBhC,MAApB,GAA6BwE,MAAM,CAAC3E,CAApC,IAAyCwB,IAAI,CAACiG,YAAL,KAAsB,QAAtB,GAAiC,CAAC,CAAlC,GAAsC,CAA/E,CAAjB;MACA,IAAIS,IAAI,GAAGlB,EAAE,GAAIxF,IAAI,CAACW,cAAL,CAAoBhC,MAApB,GAA6BwE,MAAM,CAAC1E,CAApC,IAAyCuB,IAAI,CAACiG,YAAL,KAAsB,QAAtB,GAAiC,CAAC,CAAlC,GAAsC,CAA/E,CAAjB;MACAd,SAAS,GAAG,OAAOE,EAAP,GAAY,GAAZ,GAAkBC,EAAlB,GAAuB,GAAvB,GAA6B,IAA7B,GAAoCC,EAApC,GAAyC,GAAzC,GAA+CC,EAA3D;MACAN,SAAS,GAAG,OAAOK,EAAP,GAAY,GAAZ,GAAkBC,EAAlB,GAAuB,KAAvB,GAA+BiB,IAA/B,GAAsC,GAAtC,GAA4CC,IAAxD;;MACA,IAAI1G,IAAI,CAAC2G,qBAAL,GAA6B,CAA7B,KAAmC3G,IAAI,CAAC4G,cAAL,CAAoBlI,KAApB,GAA4B,CAA5B,IAAiCsB,IAAI,CAAC6G,cAAL,CAAoBnI,KAApB,GAA4B,CAAhG,KACGsB,IAAI,CAAC8G,SAAL,KAAmB,UADtB,IACoCzI,KAAK,CAACuH,aAAN,CAAoB,CAApB,EAAuBC,IAAvB,KAAgC,OADxE,EACiF;QAC7EU,cAAc,GAAG,KAAKQ,iBAAL,CAAuB/G,IAAvB,EAA6BoG,YAA7B,EAA2CC,aAA3C,EAA0DC,aAA1D,CAAjB;QACAD,aAAa,GAAGE,cAAc,CAAC,CAAD,CAA9B;QACAD,aAAa,GAAGC,cAAc,CAAC,CAAD,CAA9B;MACH;;MACD,KAAKL,cAAL,CAAoBlG,IAApB,EAA0B+C,KAA1B,EAAiCmC,SAAjC,EAA4CoB,aAA5C,EAA2DzE,CAA3D;MACA,KAAKmF,cAAL,CAAoBhH,IAApB,EAA0B+C,KAA1B,EAAiCoC,SAAjC,EAA4CkB,aAA5C,EAA2DxE,CAA3D;IACH;EACJ,CAnCD;;EAoCAhE,eAAe,CAACpB,SAAhB,CAA0BsK,iBAA1B,GAA8C,UAAU/G,IAAV,EAAgBoG,YAAhB,EAA8Ba,SAA9B,EAAyCC,SAAzC,EAAoD;IAC9F,IAAI7D,KAAK,GAAG+C,YAAZ;IACA,IAAI5H,CAAJ;IACA,IAAIC,CAAJ;IACA,IAAI0E,MAAJ;IACA,IAAIgE,KAAK,GAAGnH,IAAI,CAACoH,YAAjB;IACA,IAAIC,SAAS,GAAG,EAAhB;;IACA,KAAK,IAAIvC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG9E,IAAI,CAAC2G,qBAAzB,EAAgD7B,CAAC,EAAjD,EAAqD;MACjDzB,KAAK,IAAI,CAACrD,IAAI,CAAC8G,SAAL,KAAmB,UAAnB,GAAgC9G,IAAI,CAACsH,gBAArC,GAAwDtH,IAAI,CAACoH,YAAL,CAAkBG,QAA3E,KACJvH,IAAI,CAAC2G,qBAAL,GAA6B,CADzB,CAAT;;MAEA,IAAI/J,MAAM,CAACyG,KAAD,EAAQ8D,KAAR,CAAV,EAA0B;QACtBhE,MAAM,GAAGzF,mBAAmB,CAACD,uBAAuB,CAAC4F,KAAD,EAAQrD,IAAR,CAAxB,EAAuC,KAAKsB,UAA5C,CAA5B;QACA9C,CAAC,GAAG,KAAK6B,OAAL,GAAe,KAAKhC,KAAL,CAAWkC,MAAX,GAAoB4C,MAAM,CAAC3E,CAA9C;QACAC,CAAC,GAAG,KAAK6B,OAAL,GAAe,KAAKjC,KAAL,CAAWkC,MAAX,GAAoB4C,MAAM,CAAC1E,CAA9C;QACA,IAAI+I,SAAS,GAAGhJ,CAAC,GAAIwB,IAAI,CAAC6G,cAAL,CAAoBlI,MAApB,GAA6BwE,MAAM,CAAC3E,CAApC,IAAyCwB,IAAI,CAACiG,YAAL,KAAsB,QAAtB,GAAiC,CAAC,CAAlC,GAAsC,CAA/E,CAArB;QACA,IAAIwB,SAAS,GAAGhJ,CAAC,GAAIuB,IAAI,CAAC6G,cAAL,CAAoBlI,MAApB,GAA6BwE,MAAM,CAAC1E,CAApC,IAAyCuB,IAAI,CAACiG,YAAL,KAAsB,QAAtB,GAAiC,CAAC,CAAlC,GAAsC,CAA/E,CAArB;QACAgB,SAAS,GAAGA,SAAS,CAACd,MAAV,CAAiB,MAAM,GAAN,GAAY,KAAK9F,OAAjB,GAA2B,GAA3B,GAAiC,KAAKC,OAAtC,GACvB,IADuB,GAChB9B,CADgB,GACZ,GADY,GACNC,CADX,CAAZ;QAEAyI,SAAS,GAAGA,SAAS,CAACf,MAAV,CAAiB,MAAM,GAAN,GAAY3H,CAAZ,GAAgB,GAAhB,GAAsBC,CAAtB,GAA0B,GAA1B,GAAgC,GAAhC,GAAuC+I,SAAvC,GAAoD,GAApD,GACxBC,SADO,CAAZ;MAEH;IACJ;;IACDJ,SAAS,CAACpG,IAAV,CAAegG,SAAf;IACAI,SAAS,CAACpG,IAAV,CAAeiG,SAAf;IACA,OAAOG,SAAP;EACH,CAzBD;EA0BA;AACJ;AACA;AACA;AACA;EACI;;;EACAxJ,eAAe,CAACpB,SAAhB,CAA0B4F,eAA1B,GAA4C,UAAUrC,IAAV,EAAgB+C,KAAhB,EAAuB;IAC/D,KAAK7E,oBAAL,GAA4B,EAA5B;IACA,IAAIwJ,UAAJ;;IACA,IAAI,KAAKrJ,KAAL,CAAWsJ,YAAf,EAA6B;MACzBD,UAAU,GAAG,KAAKrJ,KAAL,CAAWsJ,YAAX,CAAwBC,YAArC;IACH;;IACD,IAAIvJ,KAAK,GAAG,KAAKA,KAAjB;IACA,IAAI0F,MAAM,GAAG,CAAb;IACA,IAAIC,MAAM,GAAG,CAAb;IACA,IAAIQ,YAAY,GAAGnG,KAAK,CAACmD,QAAN,CAAeC,WAAf,CAA2B;MAAEC,EAAE,EAAErD,KAAK,CAACsD,OAAN,CAAcD,EAAd,GAAmB,YAAnB,GAAkCqB;IAAxC,CAA3B,CAAnB;IACA,IAAIe,OAAJ;IACA,IAAIX,MAAJ;IACA,IAAI0E,SAAJ;IACA,IAAIC,WAAJ;IACA,IAAIC,aAAa,GAAG/H,IAAI,CAAC2E,aAAL,KAAuB,QAA3C;IACA,IAAIvE,OAAO,GAAG,CAAd;IACA,IAAI4H,UAAJ;IACA,IAAIC,KAAJ;IACA,IAAIC,UAAU,GAAG,EAAjB;IACA,IAAI/D,WAAJ;IACA,IAAIC,YAAY,GAAG,EAAnB;IACA,IAAIC,cAAc,GAAG,EAArB;IACAA,cAAc,CAAC,CAAD,CAAd,GAAoB,IAApB;IACA,IAAIC,aAAa,GAAGtE,IAAI,CAACuE,oBAAzB;IACA,IAAI4D,aAAa,GAAGnI,IAAI,CAAC8G,SAAL,KAAmB,UAAnB,IAAiC9G,IAAI,CAACoI,cAAL,KAAwB,cAAzD,GAA0E,GAA1E,GAAgF,CAApG;IACA,IAAI7H,MAAM,GAAGlC,KAAK,CAACkC,MAAN,GAAeP,IAAI,CAACW,cAAL,CAAoBhC,MAAhD;IACA4B,MAAM,GAAIwH,aAAD,GAAkB,CAACxH,MAAnB,GAA4BA,MAArC;;IACA,KAAK,IAAIsB,CAAC,GAAG,CAAR,EAAWC,GAAG,GAAG9B,IAAI,CAACoD,aAAL,CAAmBrD,MAAzC,EAAiD8B,CAAC,GAAGC,GAArD,EAA0DD,CAAC,EAA3D,EAA+D;MAC3DsC,WAAW,GAAG,KAAd;MACAhB,MAAM,GAAGzF,mBAAmB,CAACD,uBAAuB,CAACuC,IAAI,CAACoD,aAAL,CAAmBvB,CAAnB,EAAsBwB,KAAtB,GAA8B8E,aAA/B,EAA8CnI,IAA9C,CAAxB,EAA6E,KAAKsB,UAAlF,CAA5B;;MACA,IAAI,CAAC+G,KAAK,CAAClF,MAAM,CAAC3E,CAAR,CAAN,IAAoB,CAAC6J,KAAK,CAAClF,MAAM,CAAC1E,CAAR,CAA9B,EAA0C;QACtCsF,MAAM,GAAG,KAAK1D,OAAL,GAAe,CAACE,MAAM,GAAGP,IAAI,CAACW,cAAL,CAAoBhC,MAA7B,GAAsCyB,OAAvC,IAAkD+C,MAAM,CAAC3E,CAAjF;QACAwF,MAAM,GAAG,KAAK1D,OAAL,GAAe,CAACC,MAAM,GAAGP,IAAI,CAACW,cAAL,CAAoBhC,MAA7B,GAAsCyB,OAAvC,IAAkD+C,MAAM,CAAC1E,CAAjF;QACAyJ,UAAU,GAAGI,UAAU,CAACvE,MAAM,CAACwE,OAAP,CAAe,CAAf,CAAD,CAAV,KAAkCD,UAAU,CAAC,KAAKjI,OAAL,CAAakI,OAAb,CAAqB,CAArB,CAAD,CAA5C,GAAwE,QAAxE,GACPxE,MAAM,GAAG,KAAK1D,OAAd,IAAyB,CAAC0H,aAA3B,IAA8ChE,MAAM,GAAG,KAAK1D,OAAd,IAAyB0H,aAAxE,GAA0F,KAA1F,GAAkG,OADtG;MAEH;;MACDE,KAAK,GAAGjI,IAAI,CAACoD,aAAL,CAAmBvB,CAAnB,CAAR;MACAgG,SAAS,GAAGI,KAAK,CAAClD,IAAlB,CAV2D,CAW3D;;MACA,IAAI/E,IAAI,CAACwI,UAAL,IAAmBlE,aAAa,KAAK,MAAzC,EAAiD;QAC7C,IAAImE,YAAY,GAAGzI,IAAI,CAACoD,aAAL,CAAmBvB,CAAnB,EAAsB4G,YAAzC;QACA,IAAIC,QAAQ,GAAG,KAAK,CAApB;QACA,IAAIhJ,IAAI,GAAG,KAAK,CAAhB;QACA,IAAIiF,aAAa,GAAG3E,IAAI,CAAC2E,aAAzB;QACA,IAAIgE,UAAU,GAAGtK,KAAK,CAACc,aAAN,CAAoBT,KAArC;QACA,IAAIkK,UAAU,GAAGH,YAAY,CAAC1I,MAA9B;;QACA,KAAK,IAAI8I,GAAG,GAAGD,UAAU,GAAG,CAA5B,EAA+BC,GAAG,IAAI,CAAtC,EAAyC,EAAEA,GAA3C,EAAgD;UAC5CH,QAAQ,GAAGD,YAAY,CAACK,SAAb,CAAuB,CAAvB,EAA0BD,GAA1B,IAAiC,KAA5C;UACAnJ,IAAI,GAAGxC,WAAW,CAACwL,QAAD,EAAW1I,IAAI,CAACgF,UAAhB,CAAX,CAAuCtG,KAA9C;;UACA,IAAIqF,MAAM,KAAK4E,UAAU,GAAG,CAAxB,GAA6B5E,MAAM,GAAGrE,IAAI,GAAG,CAAhB,IAAqB,CAArB,IAA0BqE,MAAM,GAAGrE,IAAI,GAAG,CAAhB,IAAqBiJ,UAA5E,GACEhE,aAAa,KAAK,SAAlB,KAAiCZ,MAAM,IAAI4E,UAAU,GAAG,CAAvB,IAA4B5E,MAAM,GAAGrE,IAAT,IAAiBiJ,UAA9C,IAC7B5E,MAAM,IAAI4E,UAAU,GAAG,CAAvB,IAA4B5E,MAAM,GAAGrE,IAAT,IAAiB,CADhD,CAAD,IAC0DiF,aAAa,KAAK,QAAlB,KACtDZ,MAAM,GAAGrE,IAAT,IAAiBiJ,UAAU,GAAG,CAA9B,IAAmC5E,MAAM,GAAGrE,IAAT,IAAiBiJ,UAAU,GAAG,CADX,CAF/D,EAGgF;YAC5Ed,SAAS,GAAGgB,GAAG,KAAKD,UAAU,GAAG,CAArB,GAAyBH,YAAzB,GAAwCC,QAApD;YACAT,KAAK,CAACvI,IAAN,CAAWhB,KAAX,GAAmBxB,WAAW,CAAC2K,SAAD,EAAY7H,IAAI,CAACgF,UAAjB,CAAX,CAAwCtG,KAA3D;YACAuJ,KAAK,CAAClD,IAAN,GAAa8C,SAAb;YACA;UACH;QACJ;MACJ,CAhC0D,CAiC3D;;;MACAzD,YAAY,CAACvC,CAAD,CAAZ,GAAkB,KAAKgD,cAAL,CAAoBd,MAApB,EAA4BC,MAA5B,EAAoCiE,KAApC,EAA2CC,UAA3C,CAAlB;;MACA,IAAIrG,CAAC,KAAK,CAAV,EAAa;QACTiG,WAAW,GAAG/D,MAAd;MACH,CAFD,MAGK,IAAIlC,CAAC,KAAK7B,IAAI,CAACoD,aAAL,CAAmBrD,MAAnB,GAA4B,CAAlC,IAAuCC,IAAI,CAAC8G,SAAL,KAAmB,UAA9D,EAA0E;QAC3EkB,UAAU,GAAG9K,WAAW,CAAC2K,SAAD,EAAY7H,IAAI,CAACgF,UAAjB,CAAX,CAAwCrG,MAArD;QACAqJ,UAAU,IAAIjE,MAAd;QACA8D,SAAS,GAAIG,UAAU,GAAGF,WAAd,GAA6B,EAA7B,GAAkCD,SAA9C;MACH,CA1C0D,CA2C3D;;;MACA,IAAIhG,CAAC,KAAK,CAAN,IAAWyC,aAAa,KAAK,MAAjC,EAAyC;QACrC,KAAK,IAAIQ,CAAC,GAAGjD,CAAb,EAAgBiD,CAAC,IAAI,CAArB,EAAwBA,CAAC,EAAzB,EAA6B;UACzBA,CAAC,GAAIA,CAAC,KAAK,CAAP,GAAY,CAAZ,GAAkBA,CAAC,KAAKjD,CAAP,GAAaiD,CAAC,GAAG,CAAjB,GAAsBA,CAA3C;;UACA,IAAIT,cAAc,CAACS,CAAD,CAAd,IAAqBjI,SAAS,CAACuH,YAAY,CAACvC,CAAD,CAAb,EAAkBuC,YAAY,CAACU,CAAD,CAA9B,CAAlC,EAAsE;YAClEX,WAAW,GAAG,IAAd;YACAE,cAAc,CAACxC,CAAD,CAAd,GAAoB,KAApB;YACA;UACH,CAJD,MAKK;YACDwC,cAAc,CAACxC,CAAD,CAAd,GAAoB,IAApB;UACH;QACJ;MACJ;;MACD,IAAI,CAACsC,WAAD,IAAgBuD,UAApB,EAAgC;QAC5BvD,WAAW,GAAGtH,SAAS,CAACuH,YAAY,CAACvC,CAAD,CAAb,EAAkB6F,UAAlB,CAAvB;;QACA,IAAIvD,WAAJ,EAAiB;UACb,IAAIzF,KAAK,GAAG,KAAKqK,uBAAL,CAA6BrB,UAA7B,EAAyCtD,YAAY,CAACvC,CAAD,CAArD,CAAZ;;UACA,IAAInD,KAAK,GAAG,CAAZ,EAAe;YACXmJ,SAAS,GAAG/K,QAAQ,CAAC4B,KAAD,EAAQsB,IAAI,CAACoD,aAAL,CAAmBvB,CAAnB,EAAsB4G,YAA9B,EAA4CzI,IAAI,CAACgF,UAAjD,CAApB;YACAb,WAAW,GAAG,KAAd;UACH;QACJ;MACJ;;MACDL,OAAO,GAAG,IAAI3G,UAAJ,CAAekB,KAAK,CAACsD,OAAN,CAAcD,EAAd,GAAmBqB,KAAnB,GAA2B,aAA3B,GAA2ClB,CAA1D,EAA6DkC,MAA7D,EAAqEC,MAArE,EAA6EkE,UAA7E,EAAyFL,SAAzF,EAAoG,EAApG,EAAwG,SAAxG,CAAV;;MACA,IAAI1D,WAAJ,EAAiB;QACb,SADa,CACH;MACb;;MACD,KAAKjG,oBAAL,CAA0B+C,IAA1B,CAA+BmD,YAAY,CAACvC,CAAD,CAA3C;MACAtE,WAAW,CAACc,KAAK,CAACmD,QAAP,EAAiBsC,OAAjB,EAA0BmE,KAAK,CAACjD,UAAhC,EAA4CiD,KAAK,CAACjD,UAAN,CAAiBxB,KAAjB,IAA0BnF,KAAK,CAACoF,UAAN,CAAiBwB,SAAvF,EAAkGT,YAAlG,EAAgH,KAAhH,EAAuHnG,KAAK,CAACyE,MAA7H,EAAqI,IAArI,EAA2I,IAA3I,CAAX;IACH;;IACD,KAAKnB,OAAL,CAAagB,WAAb,CAAyB6B,YAAzB;EACH,CAtGD;EAuGA;AACJ;AACA;AACA;AACA;;;EACI3G,eAAe,CAACpB,SAAhB,CAA0BsM,uBAA1B,GAAoD,UAAUrB,UAAV,EAAsBsB,SAAtB,EAAiC;IACjF,IAAIC,QAAQ,GAAGvB,UAAU,CAAClJ,CAA1B;IACA,IAAI0K,QAAQ,GAAGD,QAAQ,GAAGvB,UAAU,CAAChJ,KAArC;IACA,IAAIyK,OAAO,GAAGH,SAAS,CAACxK,CAAxB;IACA,IAAI4K,OAAO,GAAGD,OAAO,GAAGH,SAAS,CAACtK,KAAlC;IACA,IAAIA,KAAK,GAAG,CAAZ;;IACA,IAAIyK,OAAO,GAAGF,QAAV,IAAsBE,OAAO,GAAGD,QAAhC,IAA4CE,OAAO,GAAGF,QAA1D,EAAoE;MAChExK,KAAK,GAAG0K,OAAO,GAAGF,QAAlB;IACH,CAFD,MAGK,IAAIC,OAAO,GAAGF,QAAV,IAAsBE,OAAO,GAAGD,QAAhC,IAA4CE,OAAO,GAAGF,QAA1D,EAAoE;MACrExK,KAAK,GAAG,CAAR;IACH,CAFI,MAGA,IAAI0K,OAAO,GAAGH,QAAV,IAAsBG,OAAO,GAAGF,QAAhC,IAA4CC,OAAO,GAAGF,QAA1D,EAAoE;MACrEvK,KAAK,GAAGuK,QAAQ,GAAGE,OAAnB;IACH,CAFI,MAGA,IAAIC,OAAO,GAAGH,QAAV,IAAsBG,OAAO,GAAGF,QAAhC,IAA4CC,OAAO,GAAGF,QAA1D,EAAoE;MACrEvK,KAAK,GAAGuK,QAAQ,GAAGE,OAAnB;IACH;;IACD,OAAOzK,KAAP;EACH,CAnBD;EAoBA;AACJ;AACA;AACA;AACA;AACA;AACA;;;EACIb,eAAe,CAACpB,SAAhB,CAA0BoI,cAA1B,GAA2C,UAAUd,MAAV,EAAkBC,MAAlB,EAA0BiE,KAA1B,EAAiC/D,MAAjC,EAAyC;IAChF,IAAIA,MAAM,KAAK,QAAf,EAAyB;MACrBH,MAAM,IAAKkE,KAAK,CAACvI,IAAN,CAAWhB,KAAX,GAAmB,CAA9B;IACH,CAFD,MAGK,IAAIwF,MAAM,KAAK,KAAf,EAAsB;MACvBH,MAAM,IAAIkE,KAAK,CAACvI,IAAN,CAAWhB,KAArB;IACH,CAFI,MAGA;MACDqF,MAAM,GAAGA,MAAT;IACH;;IACDC,MAAM,IAAKiE,KAAK,CAACvI,IAAN,CAAWf,MAAX,GAAoB,CAA/B;IACA,OAAO,IAAItB,IAAJ,CAAS0G,MAAT,EAAiBC,MAAjB,EAAyBiE,KAAK,CAACvI,IAAN,CAAWhB,KAApC,EAA2CuJ,KAAK,CAACvI,IAAN,CAAWf,MAAtD,CAAP;EACH,CAZD;;EAaAd,eAAe,CAACpB,SAAhB,CAA0ByJ,cAA1B,GAA2C,UAAUlG,IAAV,EAAgB+C,KAAhB,EAAuBsG,aAAvB,EAAsC/C,aAAtC,EAAqDgD,SAArD,EAAgE;IACvG,IAAIC,WAAJ;IACA,IAAIlL,KAAK,GAAG,KAAKA,KAAjB;IACA,IAAIgJ,SAAJ;IACA,IAAI1F,OAAJ;;IACA,IAAI3B,IAAI,CAACW,cAAL,CAAoBjC,KAApB,GAA4B,CAAhC,EAAmC;MAC/BiD,OAAO,GAAGhE,UAAU,CAACU,KAAK,CAACsD,OAAN,CAAcD,EAAd,GAAmB,iBAAnB,GAAuCqB,KAAvC,GAA+C,GAA/C,GAAqDuG,SAAtD,CAApB;MACAjC,SAAS,GAAG1F,OAAO,GAAGA,OAAO,CAACmE,YAAR,CAAqB,GAArB,CAAH,GAA+B,IAAlD;MACAyD,WAAW,GAAG,IAAInM,UAAJ,CAAeiB,KAAK,CAACsD,OAAN,CAAcD,EAAd,GAAmB,iBAAnB,GAAuCqB,KAAvC,GAA+C,GAA/C,GAAqDuG,SAApE,EAA+E,aAA/E,EAA8FtJ,IAAI,CAACW,cAAL,CAAoBjC,KAAlH,EAAyHsB,IAAI,CAACW,cAAL,CAAoB6C,KAApB,IAA6BnF,KAAK,CAACoF,UAAN,CAAiB4F,aAAvK,EAAsL,IAAtL,EAA4L,IAA5L,EAAkMA,aAAlM,CAAd;MACA;AACZ;AACA;AACA;AACA;AACA;;MACY1H,OAAO,GAAGtD,KAAK,CAACmD,QAAN,CAAekC,QAAf,CAAwB6F,WAAxB,CAAV;MACA,KAAK5F,mBAAL,CAAyBhC,OAAzB;MACA5E,kBAAkB,CAACsB,KAAK,CAACuE,YAAP,EAAqBvE,KAAK,CAACuF,aAA3B,EAA0CjC,OAA1C,EAAmDtD,KAAK,CAACyE,MAAzD,EAAiE,IAAjE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,IAAjF,EAAuFuE,SAAvF,CAAlB;IACH;;IACD,IAAIrH,IAAI,CAAC6G,cAAL,CAAoBnI,KAApB,GAA4B,CAAhC,EAAmC;MAC/BiD,OAAO,GAAGhE,UAAU,CAACU,KAAK,CAACsD,OAAN,CAAcD,EAAd,GAAmB,iBAAnB,GAAuCqB,KAAvC,GAA+C,GAA/C,GAAqDuG,SAAtD,CAApB;MACAjC,SAAS,GAAG1F,OAAO,GAAGA,OAAO,CAACmE,YAAR,CAAqB,GAArB,CAAH,GAA+B,IAAlD;MACAyD,WAAW,GAAG,IAAInM,UAAJ,CAAeiB,KAAK,CAACsD,OAAN,CAAcD,EAAd,GAAmB,iBAAnB,GAAuCqB,KAAvC,GAA+C,GAA/C,GAAqDuG,SAApE,EAA+E,aAA/E,EAA8FtJ,IAAI,CAAC6G,cAAL,CAAoBnI,KAAlH,EAAyHsB,IAAI,CAAC6G,cAAL,CAAoBrD,KAApB,IAA6BnF,KAAK,CAACoF,UAAN,CAAiB6C,aAAvK,EAAsL,IAAtL,EAA4L,IAA5L,EAAkMA,aAAlM,CAAd;MACA;AACZ;AACA;AACA;AACA;AACA;;MACY3E,OAAO,GAAGtD,KAAK,CAACmD,QAAN,CAAekC,QAAf,CAAwB6F,WAAxB,CAAV;MACA,KAAK5F,mBAAL,CAAyBhC,OAAzB;MACA5E,kBAAkB,CAACsB,KAAK,CAACuE,YAAP,EAAqBvE,KAAK,CAACuF,aAA3B,EAA0CjC,OAA1C,EAAmDtD,KAAK,CAACyE,MAAzD,EAAiE,IAAjE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,IAAjF,EAAuFuE,SAAvF,CAAlB;IACH;EACJ,CAjCD;;EAkCAxJ,eAAe,CAACpB,SAAhB,CAA0BuK,cAA1B,GAA2C,UAAUhH,IAAV,EAAgB+C,KAAhB,EAAuBoC,SAAvB,EAAkC8B,SAAlC,EAA6CqC,SAA7C,EAAwD;IAC/F,IAAIjL,KAAK,GAAG,KAAKA,KAAjB;IACA,IAAImL,WAAJ;IACA,IAAInC,SAAJ;IACA,IAAI1F,OAAJ;;IACA,IAAI3B,IAAI,CAACiC,cAAL,CAAoBvD,KAApB,GAA4B,CAAhC,EAAmC;MAC/BiD,OAAO,GAAGhE,UAAU,CAACU,KAAK,CAACsD,OAAN,CAAcD,EAAd,GAAmB,iBAAnB,GAAuCqB,KAAvC,GAA+C,GAA/C,GAAqDuG,SAAtD,CAApB;MACAjC,SAAS,GAAG1F,OAAO,GAAGA,OAAO,CAACmE,YAAR,CAAqB,GAArB,CAAH,GAA+B,IAAlD;MACA0D,WAAW,GAAG,IAAIpM,UAAJ,CAAeiB,KAAK,CAACsD,OAAN,CAAcD,EAAd,GAAmB,iBAAnB,GAAuCqB,KAAvC,GAA+C,GAA/C,GAAqDuG,SAApE,EAA+E,aAA/E,EAA8FtJ,IAAI,CAACiC,cAAL,CAAoBvD,KAAlH,EAAyHsB,IAAI,CAACiC,cAAL,CAAoBuB,KAApB,IAA6BnF,KAAK,CAACoF,UAAN,CAAiBiC,aAAvK,EAAsL,IAAtL,EAA4L1F,IAAI,CAACiC,cAAL,CAAoBsB,SAAhN,EAA2N4B,SAA3N,CAAd;MACApI,kBAAkB,CAACsB,KAAK,CAACuE,YAAP,EAAqB,KAAKjB,OAA1B,EAAmCtD,KAAK,CAACmD,QAAN,CAAekC,QAAf,CAAwB8F,WAAxB,CAAnC,EAAyEnL,KAAK,CAACyE,MAA/E,EAAuF,IAAvF,EAA6F,GAA7F,EAAkG,GAAlG,EAAuG,IAAvG,EAA6GuE,SAA7G,CAAlB;IACH;;IACD,IAAIrH,IAAI,CAAC4G,cAAL,CAAoBlI,KAApB,GAA4B,CAAhC,EAAmC;MAC/BiD,OAAO,GAAGhE,UAAU,CAACU,KAAK,CAACsD,OAAN,CAAcD,EAAd,GAAmB,iBAAnB,GAAuCqB,KAAvC,GAA+C,GAA/C,GAAqDuG,SAAtD,CAApB;MACAjC,SAAS,GAAG1F,OAAO,GAAGA,OAAO,CAACmE,YAAR,CAAqB,GAArB,CAAH,GAA+B,IAAlD;MACA0D,WAAW,GAAG,IAAIpM,UAAJ,CAAeiB,KAAK,CAACsD,OAAN,CAAcD,EAAd,GAAmB,iBAAnB,GAAuCqB,KAAvC,GAA+C,GAA/C,GAAqDuG,SAApE,EAA+E,aAA/E,EAA8FtJ,IAAI,CAAC4G,cAAL,CAAoBlI,KAAlH,EAAyHsB,IAAI,CAAC4G,cAAL,CAAoBpD,KAApB,IAA6BnF,KAAK,CAACoF,UAAN,CAAiBgG,aAAvK,EAAsL,IAAtL,EAA4LzJ,IAAI,CAAC4G,cAAL,CAAoBrD,SAAhN,EAA2N0D,SAA3N,CAAd;MACAlK,kBAAkB,CAACsB,KAAK,CAACuE,YAAP,EAAqB,KAAKjB,OAA1B,EAAmCtD,KAAK,CAACmD,QAAN,CAAekC,QAAf,CAAwB8F,WAAxB,CAAnC,EAAyEnL,KAAK,CAACyE,MAA/E,EAAuF,IAAvF,EAA6F,GAA7F,EAAkG,GAAlG,EAAuG,IAAvG,EAA6GuE,SAA7G,CAAlB;IACH;EACJ,CAjBD;;EAkBAxJ,eAAe,CAACpB,SAAhB,CAA0BkH,mBAA1B,GAAgD,UAAUhC,OAAV,EAAmB;IAC/D,IAAIA,OAAJ,EAAa;MACTA,OAAO,CAAC+H,YAAR,CAAqB,OAArB,EAA8B,qBAA9B;IACH;EACJ,CAJD;;EAKA,OAAO7L,eAAP;AACH,CAjlBoC,CAilBnCP,QAjlBmC,CAArC;;AAklBA,SAASO,eAAT"},"metadata":{},"sourceType":"module"}