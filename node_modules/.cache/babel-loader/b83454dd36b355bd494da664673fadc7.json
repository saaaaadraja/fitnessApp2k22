{"ast":null,"code":"import { print as printWindow, createElement, isNullOrUndefined, Browser } from '@syncfusion/ej2-base';\nimport { SvgRenderer } from '@syncfusion/ej2-svg-base';\nimport { getElement, removeElement } from '../utils/helper';\nimport { beforePrint, afterExport } from '../model/constants';\nimport { PdfPageOrientation, PdfDocument, PdfBitmap, SizeF, PdfStandardFont, PdfPageTemplateElement, PdfSolidBrush, PdfColor } from '@syncfusion/ej2-pdf-export';\n\nvar ExportUtils =\n/** @class */\nfunction () {\n  /**\n   * Constructor for chart and accumulation annotation\n   * @param control\n   */\n  function ExportUtils(control) {\n    this.control = control;\n  }\n  /**\n   * To print the accumulation and chart elements\n   * @param elements\n   */\n\n\n  ExportUtils.prototype.print = function (elements) {\n    this.printWindow = window.open('', 'print', 'height=' + window.outerHeight + ',width=' + window.outerWidth + ',tabbar=no');\n    this.printWindow.moveTo(0, 0);\n    this.printWindow.resizeTo(screen.availWidth, screen.availHeight);\n    var argsData = {\n      cancel: false,\n      htmlContent: this.getHTMLContent(elements),\n      name: beforePrint\n    };\n    this.control.trigger(beforePrint, argsData);\n\n    if (!argsData.cancel) {\n      printWindow(argsData.htmlContent, this.printWindow);\n    }\n  };\n  /**\n   * To get the html string of the chart and accumulation\n   * @param elements\n   * @private\n   */\n\n\n  ExportUtils.prototype.getHTMLContent = function (elements) {\n    var div = createElement('div');\n\n    if (elements) {\n      if (elements instanceof Array) {\n        for (var j = 0; j < elements.length; j++) {\n          var value = elements[j];\n          div.appendChild(getElement(value).cloneNode(true));\n        }\n      } else if (elements instanceof Element) {\n        div.appendChild(elements.cloneNode(true));\n      } else {\n        div.appendChild(getElement(elements).cloneNode(true));\n      }\n    } else {\n      div.appendChild(this.control.element.cloneNode(true));\n    }\n\n    return div;\n  };\n  /**\n   * To export the file as image/svg format\n   * @param type\n   * @param fileName\n   */\n\n\n  ExportUtils.prototype.export = function (type, fileName, orientation, controls, width, height, isVertical, header, footer) {\n    var _this = this;\n\n    var controlValue = this.getControlsValue(controls, isVertical);\n    width = width ? width : controlValue.width;\n    height = height ? height : controlValue.height;\n    var element = this.control.svgObject;\n    var isCanvas = this.control.enableCanvas;\n    var image;\n\n    if (!isCanvas) {\n      element = createElement('canvas', {\n        id: 'ej2-canvas',\n        attrs: {\n          'width': width.toString(),\n          'height': height.toString()\n        }\n      });\n    }\n\n    var isDownload = !(Browser.userAgent.toString().indexOf('HeadlessChrome') > -1);\n    orientation = isNullOrUndefined(orientation) ? PdfPageOrientation.Landscape : orientation;\n    var svgData = '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">' + controlValue.svg.outerHTML + '</svg>';\n    var url = window.URL.createObjectURL(new Blob(type === 'SVG' ? [svgData] : [new XMLSerializer().serializeToString(controlValue.svg)], {\n      type: 'image/svg+xml'\n    }));\n\n    if (type === 'SVG') {\n      if (Browser.info.name === 'msie') {\n        var svg = new Blob([new XMLSerializer().serializeToString(controlValue.svg)], {\n          type: 'application/octet-stream'\n        });\n        window.navigator.msSaveOrOpenBlob(svg, fileName + '.' + type.toLocaleLowerCase());\n      } else {\n        this.triggerDownload(fileName, type, url, isDownload);\n      }\n    } else if (Browser.info.name === 'msie') {\n      var canvas = element;\n\n      if (!isCanvas) {\n        canvas = this.createCanvas();\n      }\n\n      image = canvas.toDataURL();\n\n      if (type === 'PDF') {\n        this.exportPdf(canvas, orientation, width, height, isDownload, fileName, header, footer);\n      } else {\n        this.doexport(type, image, fileName);\n      }\n    } else {\n      var image_1 = new Image();\n      var ctx_1 = element.getContext('2d');\n\n      image_1.onload = function () {\n        ctx_1.drawImage(image_1, 0, 0);\n        window.URL.revokeObjectURL(url);\n\n        if (type === 'PDF') {\n          _this.exportPdf(element, orientation, width, height, isDownload, fileName, header, footer);\n        } else {\n          if (window.navigator.msSaveOrOpenBlob) {\n            window.navigator.msSaveOrOpenBlob(element.msToBlob(), fileName + '.' + type.toLocaleLowerCase());\n          } else {\n            _this.triggerDownload(fileName, type, element.toDataURL('image/' + type.toLowerCase()), isDownload);\n          }\n        }\n      };\n\n      image_1.src = url;\n    }\n\n    if (!isCanvas) {\n      removeElement(document.getElementById(this.control.element.id + '_canvas'));\n    }\n  };\n  /**\n   * To get data url for charts.\n   */\n\n\n  ExportUtils.prototype.getDataUrl = function (chart) {\n    var controlValue = this.getControlsValue([chart]);\n    var element = this.control.svgObject;\n    var isCanvas = this.control.enableCanvas;\n\n    if (!isCanvas) {\n      element = createElement('canvas', {\n        id: 'ej2-canvas',\n        attrs: {\n          'width': controlValue.width.toString(),\n          'height': controlValue.height.toString()\n        }\n      });\n    }\n\n    var url = window.URL.createObjectURL(new Blob([new XMLSerializer().serializeToString(controlValue.svg)], {\n      type: 'image/svg+xml'\n    }));\n\n    if (Browser.info.name === 'msie') {\n      var canvas = element;\n\n      if (!isCanvas) {\n        canvas = this.createCanvas();\n      }\n\n      var argsData = {\n        name: afterExport,\n        cancel: false,\n        dataUrl: element.toDataURL('image/png')\n      };\n      chart.trigger(afterExport, argsData);\n      return {\n        element: canvas,\n        dataUrl: canvas.toDataURL()\n      };\n    } else {\n      var image_2 = new Image();\n      var ctx_2 = element.getContext('2d');\n\n      image_2.onload = function () {\n        ctx_2.drawImage(image_2, 0, 0);\n        window.URL.revokeObjectURL(url);\n        var argsData = {\n          name: afterExport,\n          cancel: false,\n          dataUrl: element.toDataURL('image/png')\n        };\n        chart.trigger(afterExport, argsData);\n        return argsData.dataUrl;\n      };\n\n      image_2.src = url;\n      return {\n        element: element,\n        blobUrl: url\n      };\n    }\n  };\n  /**\n   * To trigger the download element\n   * @param fileName\n   * @param type\n   * @param url\n   */\n\n\n  ExportUtils.prototype.triggerDownload = function (fileName, type, url, isDownload) {\n    createElement('a', {\n      attrs: {\n        'download': fileName + '.' + type.toLocaleLowerCase(),\n        'href': url\n      }\n    }).dispatchEvent(new MouseEvent(isDownload ? 'click' : 'move', {\n      view: window,\n      bubbles: false,\n      cancelable: true\n    }));\n  };\n  /**\n   * To get the maximum size value\n   * @param controls\n   * @param name\n   */\n  // tslint:disable-next-line:max-line-length\n\n\n  ExportUtils.prototype.getControlsValue = function (controls, isVertical) {\n    var width = 0;\n    var height = 0;\n    var content = '';\n    var isCanvas = this.control.enableCanvas;\n    var svgObject = new SvgRenderer('').createSvg({\n      id: 'Svg_Export_Element',\n      width: 200,\n      height: 200\n    });\n    controls.map(function (control) {\n      var svg = control.svgObject.cloneNode(true);\n      var groupEle = control.renderer.createGroup({\n        style: isNullOrUndefined(isVertical) || isVertical ? 'transform: translateY(' + height + 'px)' : 'transform: translateX(' + width + 'px)'\n      });\n\n      if (!isCanvas) {\n        groupEle.appendChild(svg);\n      }\n\n      width = isNullOrUndefined(isVertical) || isVertical ? Math.max(control.availableSize.width, width) : width + control.availableSize.width;\n      height = isNullOrUndefined(isVertical) || isVertical ? height + control.availableSize.height : Math.max(control.availableSize.height, height);\n      content += control.svgObject.outerHTML;\n\n      if (!isCanvas) {\n        svgObject.appendChild(groupEle);\n      }\n    });\n\n    if (!isCanvas) {\n      svgObject.setAttribute('width', width + '');\n      svgObject.setAttribute('height', height + '');\n    }\n\n    return {\n      'width': width,\n      'height': height,\n      'svg': svgObject\n    };\n  };\n\n  ExportUtils.prototype.createCanvas = function () {\n    var chart = this.control;\n    this.canvasRender(true, chart);\n    var canvas = chart.svgObject;\n    this.canvasRender(false, chart);\n    return canvas;\n  };\n  /**\n   * To convert svg chart into canvas chart to fix export issue in IE\n   * We cant export svg to other formats in IE\n   */\n  // tslint:disable:no-string-literal\n\n\n  ExportUtils.prototype.canvasRender = function (enableCanvas, chart) {\n    chart.enableCanvas = enableCanvas;\n    chart['preRender']();\n    chart['render']();\n  }; // tslint:disable-next-line:max-line-length\n\n\n  ExportUtils.prototype.exportPdf = function (element, orientation, width, height, isDownload, fileName, header, footer) {\n    var document = new PdfDocument();\n    var margin = document.pageSettings.margins;\n    var pdfDefaultWidth = document.pageSettings.width;\n    var pdfDefaultHeight = document.pageSettings.height;\n    var exactWidth;\n    var exactHeight;\n    var imageString = element.toDataURL('image/jpeg').replace('image/jpeg', 'image/octet-stream');\n    document.pageSettings.orientation = orientation;\n    exactWidth = pdfDefaultWidth < width ? width + margin.left + margin.right : pdfDefaultWidth;\n    exactHeight = pdfDefaultHeight < height ? height + margin.top + margin.bottom : pdfDefaultHeight;\n\n    if (header !== undefined) {\n      var font = new PdfStandardFont(1, header.fontSize || 15);\n      var pdfHeader = new PdfPageTemplateElement(exactWidth, 40); // tslint:disable-next-line:max-line-length\n\n      pdfHeader.graphics.drawString(header.content + '', font, null, new PdfSolidBrush(new PdfColor(0, 0, 0)), header.x, header.y, null);\n      document.template.top = pdfHeader;\n    }\n\n    if (footer !== undefined) {\n      var font = new PdfStandardFont(1, footer.fontSize || 15);\n      var pdfFooter = new PdfPageTemplateElement(exactWidth, 40); // tslint:disable-next-line:max-line-length\n\n      pdfFooter.graphics.drawString(footer.content + '', font, null, new PdfSolidBrush(new PdfColor(0, 0, 0)), footer.x, footer.y, null);\n      document.template.bottom = pdfFooter;\n    }\n\n    document.pageSettings.size = new SizeF(exactWidth, exactHeight);\n    imageString = imageString.slice(imageString.indexOf(',') + 1);\n    document.pages.add().graphics.drawImage(new PdfBitmap(imageString), 0, 0, width, height);\n\n    if (isDownload) {\n      document.save(fileName + '.pdf');\n      document.destroy();\n    }\n  };\n\n  ExportUtils.prototype.doexport = function (type, image, fileName) {\n    var images = [];\n    var fileType = type || 'JPG';\n    images = [image];\n    this.exportImage(images, fileName, fileType, image);\n  };\n\n  ExportUtils.prototype.exportImage = function (images, fileName, fileType, image) {\n    var buffers = [];\n    var length = !(images instanceof HTMLElement) ? images.length : 0;\n\n    for (var g = 0; g < length; g++) {\n      image = images[g];\n      image = image.replace(/^data:[a-z]*;,/, '');\n      var image1 = image.split(',');\n      var byteString = atob(image1[1]);\n      var buffer = new ArrayBuffer(byteString.length);\n      var intArray = new Uint8Array(buffer);\n\n      for (var i = 0; i < byteString.length; i++) {\n        intArray[i] = byteString.charCodeAt(i);\n      }\n\n      buffers.push(buffer);\n    }\n\n    for (var j = 0; j < buffers.length; j++) {\n      var b = new Blob([buffers[j]], {\n        type: 'application/octet-stream'\n      });\n\n      if (Browser.info.name === 'msie') {\n        window.navigator.msSaveOrOpenBlob(b, fileName + '.' + fileType.toLocaleLowerCase());\n      }\n    }\n  };\n\n  return ExportUtils;\n}();\n\nexport { ExportUtils };","map":{"version":3,"names":["print","printWindow","createElement","isNullOrUndefined","Browser","SvgRenderer","getElement","removeElement","beforePrint","afterExport","PdfPageOrientation","PdfDocument","PdfBitmap","SizeF","PdfStandardFont","PdfPageTemplateElement","PdfSolidBrush","PdfColor","ExportUtils","control","prototype","elements","window","open","outerHeight","outerWidth","moveTo","resizeTo","screen","availWidth","availHeight","argsData","cancel","htmlContent","getHTMLContent","name","trigger","div","Array","j","length","value","appendChild","cloneNode","Element","element","export","type","fileName","orientation","controls","width","height","isVertical","header","footer","_this","controlValue","getControlsValue","svgObject","isCanvas","enableCanvas","image","id","attrs","toString","isDownload","userAgent","indexOf","Landscape","svgData","svg","outerHTML","url","URL","createObjectURL","Blob","XMLSerializer","serializeToString","info","navigator","msSaveOrOpenBlob","toLocaleLowerCase","triggerDownload","canvas","createCanvas","toDataURL","exportPdf","doexport","image_1","Image","ctx_1","getContext","onload","drawImage","revokeObjectURL","msToBlob","toLowerCase","src","document","getElementById","getDataUrl","chart","dataUrl","image_2","ctx_2","blobUrl","dispatchEvent","MouseEvent","view","bubbles","cancelable","content","createSvg","map","groupEle","renderer","createGroup","style","Math","max","availableSize","setAttribute","canvasRender","margin","pageSettings","margins","pdfDefaultWidth","pdfDefaultHeight","exactWidth","exactHeight","imageString","replace","left","right","top","bottom","undefined","font","fontSize","pdfHeader","graphics","drawString","x","y","template","pdfFooter","size","slice","pages","add","save","destroy","images","fileType","exportImage","buffers","HTMLElement","g","image1","split","byteString","atob","buffer","ArrayBuffer","intArray","Uint8Array","i","charCodeAt","push","b"],"sources":["D:/Theme/package/node_modules/@syncfusion/ej2-charts/src/common/utils/export.js"],"sourcesContent":["import { print as printWindow, createElement, isNullOrUndefined, Browser } from '@syncfusion/ej2-base';\nimport { SvgRenderer } from '@syncfusion/ej2-svg-base';\nimport { getElement, removeElement } from '../utils/helper';\nimport { beforePrint, afterExport } from '../model/constants';\nimport { PdfPageOrientation, PdfDocument, PdfBitmap, SizeF, PdfStandardFont, PdfPageTemplateElement, PdfSolidBrush, PdfColor } from '@syncfusion/ej2-pdf-export';\nvar ExportUtils = /** @class */ (function () {\n    /**\n     * Constructor for chart and accumulation annotation\n     * @param control\n     */\n    function ExportUtils(control) {\n        this.control = control;\n    }\n    /**\n     * To print the accumulation and chart elements\n     * @param elements\n     */\n    ExportUtils.prototype.print = function (elements) {\n        this.printWindow = window.open('', 'print', 'height=' + window.outerHeight + ',width=' + window.outerWidth + ',tabbar=no');\n        this.printWindow.moveTo(0, 0);\n        this.printWindow.resizeTo(screen.availWidth, screen.availHeight);\n        var argsData = {\n            cancel: false, htmlContent: this.getHTMLContent(elements), name: beforePrint\n        };\n        this.control.trigger(beforePrint, argsData);\n        if (!argsData.cancel) {\n            printWindow(argsData.htmlContent, this.printWindow);\n        }\n    };\n    /**\n     * To get the html string of the chart and accumulation\n     * @param elements\n     * @private\n     */\n    ExportUtils.prototype.getHTMLContent = function (elements) {\n        var div = createElement('div');\n        if (elements) {\n            if (elements instanceof Array) {\n                for (var j = 0; j < elements.length; j++) {\n                    var value = elements[j];\n                    div.appendChild(getElement(value).cloneNode(true));\n                }\n            }\n            else if (elements instanceof Element) {\n                div.appendChild(elements.cloneNode(true));\n            }\n            else {\n                div.appendChild(getElement(elements).cloneNode(true));\n            }\n        }\n        else {\n            div.appendChild(this.control.element.cloneNode(true));\n        }\n        return div;\n    };\n    /**\n     * To export the file as image/svg format\n     * @param type\n     * @param fileName\n     */\n    ExportUtils.prototype.export = function (type, fileName, orientation, controls, width, height, isVertical, header, footer) {\n        var _this = this;\n        var controlValue = this.getControlsValue(controls, isVertical);\n        width = width ? width : controlValue.width;\n        height = height ? height : controlValue.height;\n        var element = this.control.svgObject;\n        var isCanvas = this.control.enableCanvas;\n        var image;\n        if (!isCanvas) {\n            element = createElement('canvas', {\n                id: 'ej2-canvas',\n                attrs: {\n                    'width': width.toString(),\n                    'height': height.toString()\n                }\n            });\n        }\n        var isDownload = !(Browser.userAgent.toString().indexOf('HeadlessChrome') > -1);\n        orientation = isNullOrUndefined(orientation) ? PdfPageOrientation.Landscape : orientation;\n        var svgData = '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">' +\n            controlValue.svg.outerHTML +\n            '</svg>';\n        var url = window.URL.createObjectURL(new Blob(type === 'SVG' ? [svgData] :\n            [(new XMLSerializer()).serializeToString(controlValue.svg)], { type: 'image/svg+xml' }));\n        if (type === 'SVG') {\n            if (Browser.info.name === 'msie') {\n                var svg = new Blob([(new XMLSerializer()).serializeToString(controlValue.svg)], { type: 'application/octet-stream' });\n                window.navigator.msSaveOrOpenBlob(svg, fileName + '.' + type.toLocaleLowerCase());\n            }\n            else {\n                this.triggerDownload(fileName, type, url, isDownload);\n            }\n        }\n        else if (Browser.info.name === 'msie') {\n            var canvas = element;\n            if (!isCanvas) {\n                canvas = this.createCanvas();\n            }\n            image = canvas.toDataURL();\n            if (type === 'PDF') {\n                this.exportPdf(canvas, orientation, width, height, isDownload, fileName, header, footer);\n            }\n            else {\n                this.doexport(type, image, fileName);\n            }\n        }\n        else {\n            var image_1 = new Image();\n            var ctx_1 = element.getContext('2d');\n            image_1.onload = (function () {\n                ctx_1.drawImage(image_1, 0, 0);\n                window.URL.revokeObjectURL(url);\n                if (type === 'PDF') {\n                    _this.exportPdf(element, orientation, width, height, isDownload, fileName, header, footer);\n                }\n                else {\n                    if (window.navigator.msSaveOrOpenBlob) {\n                        window.navigator.msSaveOrOpenBlob(element.msToBlob(), fileName + '.' + type.toLocaleLowerCase());\n                    }\n                    else {\n                        _this.triggerDownload(fileName, type, element.toDataURL('image/' + type.toLowerCase()), isDownload);\n                    }\n                }\n            });\n            image_1.src = url;\n        }\n        if (!isCanvas) {\n            removeElement(document.getElementById(this.control.element.id + '_canvas'));\n        }\n    };\n    /**\n     * To get data url for charts.\n     */\n    ExportUtils.prototype.getDataUrl = function (chart) {\n        var controlValue = this.getControlsValue([chart]);\n        var element = this.control.svgObject;\n        var isCanvas = this.control.enableCanvas;\n        if (!isCanvas) {\n            element = createElement('canvas', {\n                id: 'ej2-canvas',\n                attrs: {\n                    'width': controlValue.width.toString(),\n                    'height': controlValue.height.toString()\n                }\n            });\n        }\n        var url = window.URL.createObjectURL(new Blob([(new XMLSerializer()).serializeToString(controlValue.svg)], { type: 'image/svg+xml' }));\n        if (Browser.info.name === 'msie') {\n            var canvas = element;\n            if (!isCanvas) {\n                canvas = this.createCanvas();\n            }\n            var argsData = {\n                name: afterExport, cancel: false, dataUrl: element.toDataURL('image/png')\n            };\n            chart.trigger(afterExport, argsData);\n            return { element: canvas, dataUrl: canvas.toDataURL() };\n        }\n        else {\n            var image_2 = new Image();\n            var ctx_2 = element.getContext('2d');\n            image_2.onload = (function () {\n                ctx_2.drawImage(image_2, 0, 0);\n                window.URL.revokeObjectURL(url);\n                var argsData = {\n                    name: afterExport, cancel: false, dataUrl: element.toDataURL('image/png')\n                };\n                chart.trigger(afterExport, argsData);\n                return argsData.dataUrl;\n            });\n            image_2.src = url;\n            return { element: element, blobUrl: url };\n        }\n    };\n    /**\n     * To trigger the download element\n     * @param fileName\n     * @param type\n     * @param url\n     */\n    ExportUtils.prototype.triggerDownload = function (fileName, type, url, isDownload) {\n        createElement('a', {\n            attrs: {\n                'download': fileName + '.' + type.toLocaleLowerCase(),\n                'href': url\n            }\n        }).dispatchEvent(new MouseEvent(isDownload ? 'click' : 'move', {\n            view: window,\n            bubbles: false,\n            cancelable: true\n        }));\n    };\n    /**\n     * To get the maximum size value\n     * @param controls\n     * @param name\n     */\n    // tslint:disable-next-line:max-line-length\n    ExportUtils.prototype.getControlsValue = function (controls, isVertical) {\n        var width = 0;\n        var height = 0;\n        var content = '';\n        var isCanvas = this.control.enableCanvas;\n        var svgObject = new SvgRenderer('').createSvg({\n            id: 'Svg_Export_Element',\n            width: 200, height: 200\n        });\n        controls.map(function (control) {\n            var svg = control.svgObject.cloneNode(true);\n            var groupEle = control.renderer.createGroup({\n                style: (isNullOrUndefined(isVertical) || isVertical) ? 'transform: translateY(' + height + 'px)' :\n                    'transform: translateX(' + width + 'px)'\n            });\n            if (!isCanvas) {\n                groupEle.appendChild(svg);\n            }\n            width = (isNullOrUndefined(isVertical) || isVertical) ? Math.max(control.availableSize.width, width) :\n                width + control.availableSize.width;\n            height = (isNullOrUndefined(isVertical) || isVertical) ? height + control.availableSize.height :\n                Math.max(control.availableSize.height, height);\n            content += control.svgObject.outerHTML;\n            if (!isCanvas) {\n                svgObject.appendChild(groupEle);\n            }\n        });\n        if (!isCanvas) {\n            svgObject.setAttribute('width', width + '');\n            svgObject.setAttribute('height', height + '');\n        }\n        return {\n            'width': width,\n            'height': height,\n            'svg': svgObject\n        };\n    };\n    ExportUtils.prototype.createCanvas = function () {\n        var chart = this.control;\n        this.canvasRender(true, chart);\n        var canvas = chart.svgObject;\n        this.canvasRender(false, chart);\n        return canvas;\n    };\n    /**\n     * To convert svg chart into canvas chart to fix export issue in IE\n     * We cant export svg to other formats in IE\n     */\n    // tslint:disable:no-string-literal\n    ExportUtils.prototype.canvasRender = function (enableCanvas, chart) {\n        chart.enableCanvas = enableCanvas;\n        chart['preRender']();\n        chart['render']();\n    };\n    // tslint:disable-next-line:max-line-length\n    ExportUtils.prototype.exportPdf = function (element, orientation, width, height, isDownload, fileName, header, footer) {\n        var document = new PdfDocument();\n        var margin = document.pageSettings.margins;\n        var pdfDefaultWidth = document.pageSettings.width;\n        var pdfDefaultHeight = document.pageSettings.height;\n        var exactWidth;\n        var exactHeight;\n        var imageString = element.toDataURL('image/jpeg').replace('image/jpeg', 'image/octet-stream');\n        document.pageSettings.orientation = orientation;\n        exactWidth = (pdfDefaultWidth < width) ? (width + margin.left + margin.right) : pdfDefaultWidth;\n        exactHeight = (pdfDefaultHeight < height) ? (height + margin.top + margin.bottom) : pdfDefaultHeight;\n        if (header !== undefined) {\n            var font = new PdfStandardFont(1, header.fontSize || 15);\n            var pdfHeader = new PdfPageTemplateElement(exactWidth, 40);\n            // tslint:disable-next-line:max-line-length\n            pdfHeader.graphics.drawString(header.content + '', font, null, new PdfSolidBrush(new PdfColor(0, 0, 0)), header.x, header.y, null);\n            document.template.top = pdfHeader;\n        }\n        if (footer !== undefined) {\n            var font = new PdfStandardFont(1, footer.fontSize || 15);\n            var pdfFooter = new PdfPageTemplateElement(exactWidth, 40);\n            // tslint:disable-next-line:max-line-length\n            pdfFooter.graphics.drawString(footer.content + '', font, null, new PdfSolidBrush(new PdfColor(0, 0, 0)), footer.x, footer.y, null);\n            document.template.bottom = pdfFooter;\n        }\n        document.pageSettings.size = new SizeF(exactWidth, exactHeight);\n        imageString = imageString.slice(imageString.indexOf(',') + 1);\n        document.pages.add().graphics.drawImage(new PdfBitmap(imageString), 0, 0, width, height);\n        if (isDownload) {\n            document.save(fileName + '.pdf');\n            document.destroy();\n        }\n    };\n    ExportUtils.prototype.doexport = function (type, image, fileName) {\n        var images = [];\n        var fileType = type || 'JPG';\n        images = [image];\n        this.exportImage(images, fileName, fileType, image);\n    };\n    ExportUtils.prototype.exportImage = function (images, fileName, fileType, image) {\n        var buffers = [];\n        var length = (!(images instanceof HTMLElement)) ? images.length : 0;\n        for (var g = 0; g < length; g++) {\n            image = images[g];\n            image = image.replace(/^data:[a-z]*;,/, '');\n            var image1 = image.split(',');\n            var byteString = atob(image1[1]);\n            var buffer = new ArrayBuffer(byteString.length);\n            var intArray = new Uint8Array(buffer);\n            for (var i = 0; i < byteString.length; i++) {\n                intArray[i] = byteString.charCodeAt(i);\n            }\n            buffers.push(buffer);\n        }\n        for (var j = 0; j < buffers.length; j++) {\n            var b = new Blob([buffers[j]], { type: 'application/octet-stream' });\n            if (Browser.info.name === 'msie') {\n                window.navigator.msSaveOrOpenBlob(b, fileName + '.' + fileType.toLocaleLowerCase());\n            }\n        }\n    };\n    return ExportUtils;\n}());\nexport { ExportUtils };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}